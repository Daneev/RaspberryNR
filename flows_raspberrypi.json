[
    {
        "id": "d452e8ea.f65308",
        "type": "tab",
        "label": "myhome",
        "disabled": false,
        "info": ""
    },
    {
        "id": "58522408.5e1f6c",
        "type": "tab",
        "label": "Timer",
        "disabled": false,
        "info": ""
    },
    {
        "id": "b1723f44.54ecb",
        "type": "tab",
        "label": "Flow 1",
        "disabled": false,
        "info": ""
    },
    {
        "id": "5c2a57a.39a4fa8",
        "type": "tab",
        "label": "Flow 2",
        "disabled": true,
        "info": ""
    },
    {
        "id": "4788f78d.cd37e8",
        "type": "tab",
        "label": "Site parsing",
        "disabled": false,
        "info": ""
    },
    {
        "id": "d09ab75b.1e64b8",
        "type": "tab",
        "label": "Flow 3",
        "disabled": true,
        "info": ""
    },
    {
        "id": "10ab9a74.e34a16",
        "type": "tab",
        "label": "Flow 4",
        "disabled": false,
        "info": ""
    },
    {
        "id": "20e1011b.60ebfe",
        "type": "tab",
        "label": "Flow 5",
        "disabled": true,
        "info": ""
    },
    {
        "id": "600c441d.148fac",
        "type": "tab",
        "label": "Bitrix24",
        "disabled": true,
        "info": ""
    },
    {
        "id": "c41c951762d4a8a3",
        "type": "tab",
        "label": "Home",
        "disabled": false,
        "info": ""
    },
    {
        "id": "760faf65.70c2b",
        "type": "tab",
        "label": "Flow 2",
        "disabled": false,
        "info": ""
    },
    {
        "id": "464ee1dd.9aefa",
        "type": "group",
        "z": "20e1011b.60ebfe",
        "name": "Работа",
        "style": {
            "stroke": "#001f60",
            "fill": "#ffefbf",
            "label": true,
            "color": "#001f60",
            "fill-opacity": "0.51"
        },
        "nodes": [
            "bed84225.65d3e",
            "484f3f55.f2ae4",
            "4c9bc374.cceeec",
            "df4d2bb7.545ea8",
            "b22d332.ddc17d",
            "254c03e3.21d69c",
            "ea8d5f89.dca36",
            "67f2f2ab.f5f27c",
            "3bddd07b.97de2"
        ],
        "x": 64,
        "y": 79
    },
    {
        "id": "2ca5b2ff.5010be",
        "type": "group",
        "z": "20e1011b.60ebfe",
        "name": "Weather",
        "style": {
            "stroke": "#001f60",
            "fill": "#e3f3d3",
            "fill-opacity": "0.5",
            "label": true,
            "color": "#001f60"
        },
        "nodes": [
            "2c8f36dd.8a468a",
            "c7c2465.e4d6db8",
            "ec487599.8aa638",
            "a8f70691.dd5788",
            "c82dbc05.d3f0b",
            "f6b82dfb.2e92e",
            "95ce28b7.b6f3e8",
            "c0f59d10.e72af",
            "e4bee86f.df4438",
            "b4d0b2ff.51bc5",
            "82654ea7.1874",
            "e2dc7ce7.e2956",
            "30de5852.762c28",
            "75a9607c.c14d7",
            "9c4ab118.f28c8",
            "aabc070.1f59af8",
            "81fa9b54.02d268",
            "dd8a4c18.b7a12",
            "b5b27f9d.394ad",
            "c19ffddb.02895",
            "41b85dde.b67db4",
            "53384efc.4b85c",
            "e04fea85.ca3098",
            "4bdacb54.81f4d4",
            "f453b0f6.618da",
            "a038ed57.cf793",
            "5e4b62de.2c69fc"
        ],
        "x": 14,
        "y": 319
    },
    {
        "id": "a61b8cc2.a8a42",
        "type": "group",
        "z": "600c441d.148fac",
        "name": "Calendar",
        "style": {
            "stroke": "#001f60",
            "fill": "#d1d1d1",
            "fill-opacity": "0.5",
            "label": true,
            "color": "#001f60"
        },
        "nodes": [
            "40553aa6.a46924",
            "d778f34b.18d02",
            "ddfcfe71.c55ae",
            "b26c0b72.1d9a68",
            "5d2a1266.1876ec",
            "5d711765.118268",
            "31eb4064.2e9f7",
            "9c6bd7c5.702d28",
            "be412de5.7bd1e",
            "509c1c5d.af2074",
            "c1b2a25f.1e169",
            "296b7171.61a42e",
            "e4197819.9da528",
            "92c21a1c.0787f8",
            "9e0e6bab.0be8f8",
            "c68556ec.3064e8",
            "c3137952.68e258",
            "1f592ba4.9d4a34"
        ],
        "x": 314,
        "y": 99
    },
    {
        "id": "555c4b8b.208494",
        "type": "group",
        "z": "600c441d.148fac",
        "name": "Bitrix24",
        "style": {
            "stroke": "#001f60",
            "fill": "#bfdbef",
            "fill-opacity": "0.5",
            "label": true,
            "color": "#001f60"
        },
        "nodes": [
            "47285c87.ad2d74",
            "14236d8f.884bc2",
            "b592327c.0005f",
            "d91632f1.7565b",
            "180b7eea.0684a1",
            "8c7ed29b.3b7d4",
            "f049c759.cbfa48",
            "8440a4df.094428",
            "c85279bd.d945b8",
            "a42bdffd.d2f66",
            "85b9a3d3.faad6",
            "f9e18bb0.eded58",
            "a52c2fb3.43475",
            "6bcbc26e.a0c47c",
            "f8bf2e6c.b88a8",
            "13b24d02.7a1eb3",
            "2db02908.909206",
            "30dd4303.77663c",
            "f0df4499.769808",
            "2dae541c.d66c8c"
        ],
        "x": 314,
        "y": 719
    },
    {
        "id": "8b61f39488add133",
        "type": "group",
        "z": "10ab9a74.e34a16",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "84aa124b.bd198",
            "ea8c03f9.80f71",
            "c668f4bd.2ff748",
            "5b11fd66.61c384",
            "84e04772.af7048",
            "630e48d9.c5ace8"
        ],
        "x": 74,
        "y": 419
    },
    {
        "id": "3342ed7037652575",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 2000,
        "y": 2880,
        "wires": [
            [
                "b3e185866eb9c27d"
            ]
        ]
    },
    {
        "id": "8f1e645eb4417e18",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1180,
        "y": 1960,
        "wires": [
            [
                "bb237e0906021a01"
            ]
        ]
    },
    {
        "id": "6d6babb17bd9acb0",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1220,
        "y": 2300,
        "wires": [
            [
                "bf1b7ca553a95c38"
            ]
        ]
    },
    {
        "id": "e7ac757485b039b3",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1220,
        "y": 2220,
        "wires": [
            [
                "3b789ec233df452b"
            ]
        ]
    },
    {
        "id": "e69afec2e74fe258",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1960,
        "y": 1960,
        "wires": [
            [
                "576930a8697deece"
            ]
        ]
    },
    {
        "id": "2cc2c4e2e809d64d",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1880,
        "y": 1460,
        "wires": [
            [
                "de73baab2962637a"
            ]
        ]
    },
    {
        "id": "00d5390b3df1ccb2",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1960,
        "y": 1160,
        "wires": [
            [
                "e3d52c4c6cccfc9c"
            ]
        ]
    },
    {
        "id": "c16254f1afa32644",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1020,
        "y": 360,
        "wires": [
            [
                "b3e483ae07e249a3",
                "441f4d0a9950467e",
                "aad17c84ee2c3cab",
                "5d8ef1edf3801359",
                "72530dd621decc12",
                "cc594e6465e0bacf",
                "a8d6789adda561cb"
            ]
        ]
    },
    {
        "id": "e48e1a9768bd6665",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1340,
        "y": 320,
        "wires": [
            [
                "213f3589d47c2ddf",
                "b9dd0fdf734e8170",
                "c88658d8ed137133",
                "52f2ddcbbb75d9dd",
                "96e9e54c52683eae"
            ]
        ]
    },
    {
        "id": "29da792ffe403c1e",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 720,
        "y": 260,
        "wires": [
            [
                "ef25e68aea99126c",
                "8c6aa383cef92e73",
                "59a959a21ae9b6cc"
            ]
        ]
    },
    {
        "id": "74a4cd811e226bf3",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1700,
        "y": 3740,
        "wires": [
            [
                "61ad7db55d206e53"
            ]
        ]
    },
    {
        "id": "21aa9a0a80807757",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1460,
        "y": 3300,
        "wires": [
            [
                "dec20595df7fe0f8"
            ]
        ]
    },
    {
        "id": "f0b560301523d9ee",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1320,
        "y": 1160,
        "wires": [
            [
                "1f6e2ec3365bb2fd"
            ]
        ]
    },
    {
        "id": "72be97ce7f01ef96",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1900,
        "y": 4560,
        "wires": [
            [
                "5c5dab860890f31c"
            ]
        ]
    },
    {
        "id": "f27dc3524d48a813",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1320,
        "y": 2860,
        "wires": [
            []
        ]
    },
    {
        "id": "88f00b03c015c655",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1200,
        "y": 2940,
        "wires": [
            [
                "b0ff5bd12b65a806",
                "7aad36c044c6d6c1"
            ]
        ]
    },
    {
        "id": "b16c39fce743ec0c",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1460,
        "y": 2180,
        "wires": [
            [
                "c78e92b695c80a26"
            ]
        ]
    },
    {
        "id": "c78e92b695c80a26",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1660,
        "y": 2180,
        "wires": [
            [
                "64a03085735ec755"
            ]
        ]
    },
    {
        "id": "50b43888a0f91079",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1340,
        "y": 2340,
        "wires": [
            [
                "d0a27f31fc47b542"
            ]
        ]
    },
    {
        "id": "d0a27f31fc47b542",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1660,
        "y": 2340,
        "wires": [
            [
                "bba3edb93385706a"
            ]
        ]
    },
    {
        "id": "ef516afa39b78457",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1900,
        "y": 2260,
        "wires": [
            [
                "e69afec2e74fe258"
            ]
        ]
    },
    {
        "id": "4546b63325b4d54e",
        "type": "junction",
        "z": "c41c951762d4a8a3",
        "x": 1620,
        "y": 2960,
        "wires": [
            [
                "612777cc153311f2",
                "1d9d19ad36c7a455"
            ]
        ]
    },
    {
        "id": "d995f01d.eeabe",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "6d5d992d.6206c8",
        "type": "mqtt-broker",
        "name": "Mosquitto",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "ff2a4590.cacc08",
        "type": "ui_tab",
        "name": "Home",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "c1233c9d.822f",
        "type": "ui_group",
        "name": "PWM",
        "tab": "ff2a4590.cacc08",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "ece5be85.8a467",
        "type": "tls-config",
        "name": "local-tls",
        "cert": "",
        "key": "",
        "ca": "",
        "certname": "",
        "keyname": "",
        "caname": "",
        "verifyservercert": false
    },
    {
        "id": "3dad2d52.92b2e2",
        "type": "pushbullet-config",
        "name": "main"
    },
    {
        "id": "27b3edbe.608c22",
        "type": "ui_group",
        "z": "d09ab75b.1e64b8",
        "name": "Коридор",
        "tab": "9c149e28.7c011",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "9c149e28.7c011",
        "type": "ui_tab",
        "z": "d09ab75b.1e64b8",
        "name": "Cameras",
        "icon": "camera_alt",
        "order": 2
    },
    {
        "id": "ff602fa2.a5609",
        "type": "alice-service",
        "name": "daneev2009@yandex.ru"
    },
    {
        "id": "a6c29287.593a1",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Настольная лампа",
        "description": "",
        "room": "Стол",
        "dtype": "devices.types.light"
    },
    {
        "id": "ebb0b3e5.33507",
        "type": "google-credentials",
        "displayName": ""
    },
    {
        "id": "5acda325.99c72c",
        "type": "influxdb",
        "hostname": "127.0.0.1",
        "port": "8086",
        "protocol": "http",
        "database": "adc",
        "name": "adc",
        "usetls": false,
        "tls": "",
        "influxdbVersion": "1.x"
    },
    {
        "id": "f5f24bed.d87708",
        "type": "influxdb",
        "z": "5c2a57a.39a4fa8",
        "hostname": "127.0.0.1",
        "port": "8086",
        "database": "aTimeSeries",
        "name": "aTimeSeries",
        "usetls": false,
        "influxdbVersion": "1.x"
    },
    {
        "id": "b420a598.f18178",
        "type": "influxdb",
        "z": "5c2a57a.39a4fa8",
        "hostname": "127.0.0.1",
        "port": "8086",
        "database": "aTimeSeries",
        "name": "aTimeSeries",
        "usetls": false,
        "influxdbVersion": "1.x"
    },
    {
        "id": "fff3774d.8ab808",
        "type": "influxdb",
        "z": "5c2a57a.39a4fa8",
        "hostname": "127.0.0.1",
        "port": "8086",
        "database": "aTimeSeries",
        "name": "aTimeSeries",
        "influxdbVersion": "1.x"
    },
    {
        "id": "91e47ebe.114cc",
        "type": "influxdb",
        "hostname": "127.0.0.1",
        "port": "8086",
        "protocol": "http",
        "database": "floraC47C8D62A577",
        "name": "",
        "usetls": false,
        "tls": "ece5be85.8a467",
        "influxdbVersion": "1.x"
    },
    {
        "id": "3b7cd9bc.25d226",
        "type": "influxdb",
        "hostname": "127.0.0.1",
        "port": "8086",
        "protocol": "http",
        "database": "floraC47C8D62422D",
        "name": "",
        "usetls": false,
        "tls": "ece5be85.8a467",
        "influxdbVersion": "1.x"
    },
    {
        "id": "85ac72e9.c6bb2",
        "type": "influxdb",
        "hostname": "127.0.0.1",
        "port": "8086",
        "protocol": "http",
        "database": "floraC47C8D6273FC",
        "name": "",
        "usetls": false,
        "tls": "ece5be85.8a467",
        "influxdbVersion": "1.x"
    },
    {
        "id": "70d922cd.cc611c",
        "type": "influxdb",
        "hostname": "127.0.0.1",
        "port": "8086",
        "protocol": "http",
        "database": "floraC47C8D61A2A7",
        "name": "",
        "usetls": false,
        "tls": "ece5be85.8a467",
        "influxdbVersion": "1.x"
    },
    {
        "id": "2f328598c5b8aac0",
        "type": "mqtt-broker",
        "name": "Home",
        "broker": "192.168.0.50",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "2fe36fc12d1eb493",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Дверь",
        "description": "",
        "room": "Ванная",
        "dtype": "devices.types.openable"
    },
    {
        "id": "26016f0ebffb6dee",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Слабый свет",
        "description": "",
        "room": "Комната",
        "dtype": "devices.types.light"
    },
    {
        "id": "8baae5e39bdbaa12",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Яркий свет",
        "description": "",
        "room": "Комната",
        "dtype": "devices.types.light"
    },
    {
        "id": "4e9c5ce08da3beac",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Яркий свет",
        "description": "",
        "room": "Ванная",
        "dtype": "devices.types.light"
    },
    {
        "id": "cb9d0652a99fe22e",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Слабый свет",
        "description": "",
        "room": "Ванная",
        "dtype": "devices.types.light"
    },
    {
        "id": "d7333dc2ca307d6b",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Вентилятор",
        "description": "",
        "room": "Ванная",
        "dtype": "devices.types.purifier"
    },
    {
        "id": "70d37abe80c32a5e",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Свет",
        "description": "",
        "room": "Коридор",
        "dtype": "devices.types.light"
    },
    {
        "id": "354b1a97ab509173",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Свет",
        "description": "",
        "room": "Кухня",
        "dtype": "devices.types.light"
    },
    {
        "id": "3cd247b18e2daef9",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Датчики",
        "description": "",
        "room": "Комната",
        "dtype": "devices.types.sensor"
    },
    {
        "id": "b010b8d2e9a3c06c",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Свет",
        "description": "",
        "room": "Центр",
        "dtype": "devices.types.light"
    },
    {
        "id": "4cfa43921fd99ad3",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Дверь",
        "description": "",
        "room": "Прихожая",
        "dtype": "devices.types.openable"
    },
    {
        "id": "324e986f5718e2ac",
        "type": "yandex-login",
        "name": "daneev2009",
        "debugFlag": true
    },
    {
        "id": "939815ebfe2ebd0a",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Кондер",
        "description": "",
        "room": "Комната",
        "dtype": "devices.types.thermostat.ac"
    },
    {
        "id": "a825d5fc0b8b4bea",
        "type": "alice-device",
        "service": "ff602fa2.a5609",
        "name": "Датчики",
        "description": "",
        "room": "Ванная",
        "dtype": "devices.types.sensor"
    },
    {
        "id": "a060f00.6d6fb1",
        "type": "http in",
        "z": "d452e8ea.f65308",
        "name": "",
        "url": "/myhome",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 200,
        "wires": [
            [
                "7da6c7ad.224e78"
            ]
        ]
    },
    {
        "id": "7da6c7ad.224e78",
        "type": "switch",
        "z": "d452e8ea.f65308",
        "name": "not ping",
        "property": "payload.request.command",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "ping",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 300,
        "y": 260,
        "wires": [
            [
                "4425036a.4f2f5c"
            ]
        ]
    },
    {
        "id": "ff6f0d11.a09",
        "type": "debug",
        "z": "d452e8ea.f65308",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1010,
        "y": 480,
        "wires": []
    },
    {
        "id": "d9f68ba5.57b518",
        "type": "http response",
        "z": "d452e8ea.f65308",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1970,
        "y": 300,
        "wires": []
    },
    {
        "id": "9e797367.7ef85",
        "type": "debug",
        "z": "d452e8ea.f65308",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 690,
        "y": 180,
        "wires": []
    },
    {
        "id": "33a990e9.18ee",
        "type": "switch",
        "z": "d452e8ea.f65308",
        "name": "user",
        "property": "payload.session.user_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "myhome.userId[0]",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "myhome.userId[1]",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "myhome.userId[2]",
                "vt": "flow"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 710,
        "y": 260,
        "wires": [
            [
                "76d25f78.4ebcd"
            ],
            [
                "76d25f78.4ebcd"
            ],
            [
                "76d25f78.4ebcd"
            ],
            [
                "fe996ea6.951e2",
                "98c3710c.71ddb"
            ]
        ]
    },
    {
        "id": "fe996ea6.951e2",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "go away",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"response\": {\n    \"text\": \"{{payload.const.intruderText}}\",\n    \"end_session\": false\n        },\n    \"session\": {\n        \"session_id\": \"{{payload.session.session_id}}\",\n        \"message_id\": 4,\n        \"user_id\": \"{{payload.session.user_id}}\"\n        },\n    \"version\": \"1.0\"\n}",
        "output": "json",
        "x": 1500,
        "y": 340,
        "wires": [
            [
                "d9f68ba5.57b518"
            ]
        ]
    },
    {
        "id": "76d25f78.4ebcd",
        "type": "switch",
        "z": "d452e8ea.f65308",
        "name": "entity",
        "property": "payload.request.command",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "myhome.entities.Lamp",
                "vt": "flow"
            },
            {
                "t": "cont",
                "v": "myhome.entities.Close",
                "vt": "flow"
            },
            {
                "t": "empty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 910,
        "y": 180,
        "wires": [
            [
                "89515802.ab0a78"
            ],
            [
                "a428b3ee.ab5d6",
                "98c3710c.71ddb"
            ],
            [
                "e906be5e.2d0c6",
                "efb4d9be.05cdb8"
            ],
            [
                "12e848ae.b275a7",
                "f172f77b.3f5fa8"
            ]
        ]
    },
    {
        "id": "89515802.ab0a78",
        "type": "switch",
        "z": "d452e8ea.f65308",
        "name": "turn on/off",
        "property": "payload.request.command",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "включ",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "выключ",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1080,
        "y": 100,
        "wires": [
            [
                "921061a3.52832",
                "1b04e6c9.6ad999"
            ],
            [
                "a35e61dd.8213",
                "44676f51.b5c8"
            ]
        ]
    },
    {
        "id": "cd5b9c65.e46e4",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "turn on",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"response\": {\n    \"text\": \"{{payload.const.turnOnText}}\",\n    \"end_session\": false\n        },\n    \"session\": {\n        \"session_id\": \"{{payload.session.session_id}}\",\n        \"message_id\": 4,\n        \"user_id\": \"{{payload.session.user_id}}\"\n        },\n    \"version\": \"1.0\"\n}",
        "output": "json",
        "x": 1720,
        "y": 40,
        "wires": [
            [
                "d9f68ba5.57b518"
            ]
        ]
    },
    {
        "id": "12e848ae.b275a7",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "not found",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"response\": {\n    \"text\": \"{{payload.const.notFoundText}}\",\n    \"end_session\": false\n        },\n    \"session\": {\n        \"session_id\": \"{{payload.session.session_id}}\",\n        \"message_id\": 4,\n        \"user_id\": \"{{payload.session.user_id}}\"\n        },\n    \"version\": \"1.0\"\n}",
        "output": "json",
        "x": 1500,
        "y": 300,
        "wires": [
            [
                "d9f68ba5.57b518"
            ]
        ]
    },
    {
        "id": "7a617d4c.2b2b34",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "turn off",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"response\": {\n    \"text\": \"{{payload.const.turnOffText}}\",\n    \"end_session\": false\n        },\n    \"session\": {\n        \"session_id\": \"{{payload.session.session_id}}\",\n        \"message_id\": 4,\n        \"user_id\": \"{{payload.session.user_id}}\"\n        },\n    \"version\": \"1.0\"\n}",
        "output": "json",
        "x": 1710,
        "y": 180,
        "wires": [
            [
                "d9f68ba5.57b518"
            ]
        ]
    },
    {
        "id": "bc6ca9aa.0ee378",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "Settings object",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"helloWord\": \"Здравствуйте, дом приветствует вас!\",\n    \"intruderText\": \"Что-то не похож ты на моего хозяина. А ну-ка вон отсюда!\",\n    \"notFoundText\": \"Устройство не найдено!\",\n    \"overSpeech\": \"Пока, пока\",\n    \"userId\": [\"00023C4E21BEB515A93DC99824FDE96B59F2A7FD69F40E4BCC645E7D8FB37CFD\",\n               \"95F6936A770A9DD5DC4A1DC3BA63049E7DA4FC1AD90E2DB77DA108B1D8CBF6E5\",\n               \"673E752B3F689338D0DBCCF6425D9187A3CFD4CD072CA4C0639FF80AAEB45AA1\"],\n    \"turnOnText\": \"Включаю\",\n    \"turnOffText\": \"Выключаю\",\n    \"turnOnTooText\": \"Уже включен\",\n    \"turnOffTooText\": \"Уже выключен\",\n    \"entities\": {\n        \"Lamp\": \"свет\",\n        \"Close\": \"до свидан\"\n    }\n}\n",
        "output": "json",
        "x": 440,
        "y": 120,
        "wires": [
            [
                "2c690434.a8820c"
            ]
        ]
    },
    {
        "id": "e906be5e.2d0c6",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "hello word",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"response\": {\n    \"text\": \"{{payload.const.helloWord}}\",\n    \"end_session\": false\n        },\n    \"session\": {\n        \"session_id\": \"{{payload.session.session_id}}\",\n        \"message_id\": 4,\n        \"user_id\": \"{{payload.session.user_id}}\"\n        },\n    \"version\": \"1.0\"\n}",
        "output": "json",
        "x": 1510,
        "y": 260,
        "wires": [
            [
                "d9f68ba5.57b518"
            ]
        ]
    },
    {
        "id": "dc85d514.034af8",
        "type": "inject",
        "z": "d452e8ea.f65308",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 250,
        "y": 120,
        "wires": [
            [
                "bc6ca9aa.0ee378",
                "e785471c.8265d8"
            ]
        ]
    },
    {
        "id": "2c690434.a8820c",
        "type": "function",
        "z": "d452e8ea.f65308",
        "name": "Settings myhome",
        "func": "flow.set(\"myhome\", msg.payload)",
        "outputs": 1,
        "noerr": 0,
        "x": 650,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "4425036a.4f2f5c",
        "type": "function",
        "z": "d452e8ea.f65308",
        "name": "Settings const",
        "func": "msg.payload.const = flow.get(\"myhome\")\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "x": 500,
        "y": 260,
        "wires": [
            [
                "9e797367.7ef85",
                "33a990e9.18ee"
            ]
        ]
    },
    {
        "id": "9cbe97ea.488a68",
        "type": "comment",
        "z": "d452e8ea.f65308",
        "name": "Задаем наши статичные параметры (не забываем после изменения нажимать на синюю кнопку timestamp)",
        "info": "",
        "x": 460,
        "y": 80,
        "wires": []
    },
    {
        "id": "dfdc9e0e.aef12",
        "type": "debug",
        "z": "d452e8ea.f65308",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1990,
        "y": 460,
        "wires": []
    },
    {
        "id": "921061a3.52832",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "Включить",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Включить",
        "output": "str",
        "x": 1500,
        "y": 420,
        "wires": [
            [
                "dfdc9e0e.aef12"
            ]
        ]
    },
    {
        "id": "a35e61dd.8213",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "Выключить",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Выключить",
        "output": "str",
        "x": 1510,
        "y": 460,
        "wires": [
            [
                "dfdc9e0e.aef12"
            ]
        ]
    },
    {
        "id": "efb4d9be.05cdb8",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "Привет",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Привет",
        "output": "str",
        "x": 1500,
        "y": 500,
        "wires": [
            [
                "dfdc9e0e.aef12"
            ]
        ]
    },
    {
        "id": "f172f77b.3f5fa8",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "не найдено",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "не найдено",
        "output": "str",
        "x": 1510,
        "y": 540,
        "wires": [
            [
                "dfdc9e0e.aef12"
            ]
        ]
    },
    {
        "id": "98c3710c.71ddb",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "Прощай",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Прощай",
        "output": "str",
        "x": 1500,
        "y": 580,
        "wires": [
            [
                "dfdc9e0e.aef12"
            ]
        ]
    },
    {
        "id": "e785471c.8265d8",
        "type": "debug",
        "z": "d452e8ea.f65308",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 490,
        "y": 200,
        "wires": []
    },
    {
        "id": "1b04e6c9.6ad999",
        "type": "switch",
        "z": "d452e8ea.f65308",
        "name": "Lamp is on/off",
        "property": "lamp",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1280,
        "y": 60,
        "wires": [
            [
                "6aecfd2d.6f5874"
            ],
            [
                "48fa59c.ab720a8"
            ]
        ]
    },
    {
        "id": "6aecfd2d.6f5874",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "turn on too",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"response\": {\n    \"text\": \"{{payload.const.turnOnTooText}}\",\n    \"end_session\": false\n        },\n    \"session\": {\n        \"session_id\": \"{{payload.session.session_id}}\",\n        \"message_id\": 4,\n        \"user_id\": \"{{payload.session.user_id}}\"\n        },\n    \"version\": \"1.0\"\n}",
        "output": "json",
        "x": 1510,
        "y": 40,
        "wires": [
            [
                "d9f68ba5.57b518"
            ]
        ]
    },
    {
        "id": "86f6f3ee.b6aad",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "turn off too",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"response\": {\n    \"text\": \"{{payload.const.turnOffTooText}}\",\n    \"end_session\": false\n        },\n    \"session\": {\n        \"session_id\": \"{{payload.session.session_id}}\",\n        \"message_id\": 4,\n        \"user_id\": \"{{payload.session.user_id}}\"\n        },\n    \"version\": \"1.0\"\n}",
        "output": "json",
        "x": 1510,
        "y": 180,
        "wires": [
            [
                "d9f68ba5.57b518"
            ]
        ]
    },
    {
        "id": "44676f51.b5c8",
        "type": "switch",
        "z": "d452e8ea.f65308",
        "name": "Lamp is on/off",
        "property": "lamp",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1280,
        "y": 160,
        "wires": [
            [
                "8d30ae9f.b5764"
            ],
            [
                "86f6f3ee.b6aad"
            ]
        ]
    },
    {
        "id": "8d30ae9f.b5764",
        "type": "change",
        "z": "d452e8ea.f65308",
        "name": "Lamp set Off",
        "rules": [
            {
                "t": "set",
                "p": "lamp",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1510,
        "y": 140,
        "wires": [
            [
                "7a617d4c.2b2b34",
                "1e3b6008.5a008"
            ]
        ]
    },
    {
        "id": "48fa59c.ab720a8",
        "type": "change",
        "z": "d452e8ea.f65308",
        "name": "Lamp set On",
        "rules": [
            {
                "t": "set",
                "p": "lamp",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1510,
        "y": 80,
        "wires": [
            [
                "cd5b9c65.e46e4",
                "1e3b6008.5a008"
            ]
        ]
    },
    {
        "id": "90c08ca1.3fbf2",
        "type": "debug",
        "z": "d452e8ea.f65308",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 1930,
        "y": 660,
        "wires": []
    },
    {
        "id": "c3df99b5.f54828",
        "type": "inject",
        "z": "d452e8ea.f65308",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "lamp",
        "payloadType": "flow",
        "x": 1500,
        "y": 660,
        "wires": [
            [
                "aa2e11e2.35442"
            ]
        ]
    },
    {
        "id": "2ef2d9b8.0fcdd6",
        "type": "change",
        "z": "d452e8ea.f65308",
        "name": "setOn",
        "rules": [
            {
                "t": "set",
                "p": "lamp",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1750,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "7fd216b2.e59428",
        "type": "inject",
        "z": "d452e8ea.f65308",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "test on",
        "payloadType": "str",
        "x": 1490,
        "y": 720,
        "wires": [
            [
                "2ef2d9b8.0fcdd6"
            ]
        ]
    },
    {
        "id": "fadb4fa4.3fc38",
        "type": "switch",
        "z": "d452e8ea.f65308",
        "name": "on - off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 390,
        "y": 500,
        "wires": [
            [
                "8b87916f.5b569"
            ],
            [
                "bf132955.4408e8"
            ]
        ]
    },
    {
        "id": "8b87916f.5b569",
        "type": "change",
        "z": "d452e8ea.f65308",
        "name": "Lamp set On",
        "rules": [
            {
                "t": "set",
                "p": "lamp",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 480,
        "wires": [
            [
                "22109980.c0d356"
            ]
        ]
    },
    {
        "id": "bf132955.4408e8",
        "type": "change",
        "z": "d452e8ea.f65308",
        "name": "Lamp set Off",
        "rules": [
            {
                "t": "set",
                "p": "lamp",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 540,
        "wires": [
            [
                "22109980.c0d356"
            ]
        ]
    },
    {
        "id": "22109980.c0d356",
        "type": "change",
        "z": "d452e8ea.f65308",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "lamp",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "lamp",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 480,
        "wires": [
            [
                "ff6f0d11.a09"
            ]
        ]
    },
    {
        "id": "d0c24be1.7a2d88",
        "type": "inject",
        "z": "d452e8ea.f65308",
        "name": "make request",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 320,
        "wires": [
            [
                "e787ab9.a032058"
            ]
        ]
    },
    {
        "id": "e787ab9.a032058",
        "type": "http request",
        "z": "d452e8ea.f65308",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "http://192.168.0.13/readjson",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 350,
        "y": 380,
        "wires": [
            [
                "1c9da62d.53b92a"
            ]
        ]
    },
    {
        "id": "1c9da62d.53b92a",
        "type": "function",
        "z": "d452e8ea.f65308",
        "name": "Pin5 status",
        "func": "const value = msg.payload.gpio[\"5\"];\nmsg.payload = value;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 730,
        "y": 380,
        "wires": [
            [
                "ff6f0d11.a09"
            ]
        ]
    },
    {
        "id": "aa2e11e2.35442",
        "type": "change",
        "z": "d452e8ea.f65308",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "lamp",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1720,
        "y": 660,
        "wires": [
            [
                "90c08ca1.3fbf2"
            ]
        ]
    },
    {
        "id": "1f1cfa80.7cdd66",
        "type": "mqtt in",
        "z": "d452e8ea.f65308",
        "name": "Lamp1",
        "topic": "mqtt/Lamp1/output5",
        "qos": "2",
        "datatype": "auto",
        "broker": "6d5d992d.6206c8",
        "inputs": 0,
        "x": 110,
        "y": 480,
        "wires": [
            [
                "24eefba0.c1d5a4",
                "fadb4fa4.3fc38"
            ]
        ]
    },
    {
        "id": "24eefba0.c1d5a4",
        "type": "debug",
        "z": "d452e8ea.f65308",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 310,
        "y": 580,
        "wires": []
    },
    {
        "id": "a428b3ee.ab5d6",
        "type": "template",
        "z": "d452e8ea.f65308",
        "name": "go away off speech",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"response\": {\n    \"text\": \"{{payload.const.overSpeech}}\",\n    \"end_session\": true\n        },\n    \"session\": {\n        \"session_id\": \"{{payload.session.session_id}}\",\n        \"message_id\": 4,\n        \"user_id\": \"{{payload.session.user_id}}\"\n        },\n    \"version\": \"1.0\"\n}",
        "output": "json",
        "x": 1530,
        "y": 220,
        "wires": [
            [
                "d9f68ba5.57b518"
            ]
        ]
    },
    {
        "id": "4673c783.0dac08",
        "type": "mqtt out",
        "z": "d452e8ea.f65308",
        "name": "Lamp1",
        "topic": "mqtt/Lamp1/output5",
        "qos": "2",
        "retain": "",
        "broker": "6d5d992d.6206c8",
        "x": 2210,
        "y": 120,
        "wires": []
    },
    {
        "id": "4ca573fa.e1633c",
        "type": "inject",
        "z": "d452e8ea.f65308",
        "name": "on",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 1990,
        "y": 40,
        "wires": [
            [
                "4673c783.0dac08"
            ]
        ]
    },
    {
        "id": "fef6a137.00237",
        "type": "inject",
        "z": "d452e8ea.f65308",
        "name": "off",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 1990,
        "y": 200,
        "wires": [
            [
                "4673c783.0dac08"
            ]
        ]
    },
    {
        "id": "1e3b6008.5a008",
        "type": "change",
        "z": "d452e8ea.f65308",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "lamp",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1740,
        "y": 120,
        "wires": [
            [
                "df1e6205.571c"
            ]
        ]
    },
    {
        "id": "7b564787.b7c668",
        "type": "inject",
        "z": "d452e8ea.f65308",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "test off",
        "payloadType": "str",
        "x": 1490,
        "y": 780,
        "wires": [
            [
                "54a9bbf0.ab3654"
            ]
        ]
    },
    {
        "id": "54a9bbf0.ab3654",
        "type": "change",
        "z": "d452e8ea.f65308",
        "name": "setOn",
        "rules": [
            {
                "t": "set",
                "p": "lamp",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1750,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "df1e6205.571c",
        "type": "change",
        "z": "d452e8ea.f65308",
        "name": "true/false -> 1/0",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "true",
                "fromt": "str",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "false",
                "fromt": "str",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1980,
        "y": 120,
        "wires": [
            [
                "4673c783.0dac08"
            ]
        ]
    },
    {
        "id": "e7324de1.561be",
        "type": "inject",
        "z": "d452e8ea.f65308",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"system\":{\"hostname\":\"test\",\"uptime\":56858,\"rssi\":-59,\"freemem\":13264},\"sensors\":{\"dsw1\":28.9,\"dsw2\":28.8,\"dsw3\":28.1,\"dsw4\":25.5,\"ping\":1},\"gpio\":{\"5\":1,\"16\":0},\"pwm\":{\"0\":120}}",
        "payloadType": "json",
        "x": 510,
        "y": 340,
        "wires": [
            [
                "1c9da62d.53b92a"
            ]
        ]
    },
    {
        "id": "c6a72b0.3c801d8",
        "type": "inject",
        "z": "58522408.5e1f6c",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "auto",
        "payloadType": "str",
        "x": 110,
        "y": 100,
        "wires": [
            [
                "9730d896.a2ed08",
                "73e66a50.83c1c4"
            ]
        ]
    },
    {
        "id": "3068cd7d.d02cb2",
        "type": "mqtt out",
        "z": "58522408.5e1f6c",
        "name": "Lamp1",
        "topic": "mqtt/Lamp1/output5",
        "qos": "2",
        "retain": "",
        "broker": "6d5d992d.6206c8",
        "x": 1070,
        "y": 720,
        "wires": []
    },
    {
        "id": "9730d896.a2ed08",
        "type": "bigtimer",
        "z": "58522408.5e1f6c",
        "d": true,
        "outtopic": "timer1",
        "outpayload1": "true",
        "outpayload2": "false",
        "name": "Big Timer",
        "comment": "timer1",
        "lat": "53.24802",
        "lon": "50.19207",
        "starttime": "5001",
        "endtime": "1425",
        "starttime2": "0",
        "endtime2": "0",
        "startoff": 0,
        "endoff": 0,
        "startoff2": 0,
        "endoff2": 0,
        "offs": 0,
        "outtext1": "",
        "outtext2": "",
        "timeout": "1440",
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": "0",
        "month1": "0",
        "day2": "",
        "month2": "",
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": "",
        "month7": "",
        "day8": "",
        "month8": "",
        "day9": "",
        "month9": "",
        "day10": "",
        "month10": "",
        "day11": "",
        "month11": "",
        "day12": "",
        "month12": "",
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": "",
        "xmonth1": "",
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": "",
        "xmonth7": "",
        "xday8": "",
        "xmonth8": "",
        "xday9": "",
        "xmonth9": "",
        "xday10": "",
        "xmonth10": "",
        "xday11": "",
        "xmonth11": "",
        "xday12": "",
        "xmonth12": "",
        "xd1": "0",
        "xw1": "0",
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": false,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 340,
        "y": 160,
        "wires": [
            [
                "5eba41f4.6554e"
            ],
            [
                "bcf66ae.ea8b298"
            ],
            [
                "e55b2b25.0416e8"
            ]
        ]
    },
    {
        "id": "5eba41f4.6554e",
        "type": "debug",
        "z": "58522408.5e1f6c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 550,
        "y": 100,
        "wires": []
    },
    {
        "id": "5a051127.c5d41",
        "type": "inject",
        "z": "58522408.5e1f6c",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "on",
        "payloadType": "str",
        "x": 110,
        "y": 160,
        "wires": [
            [
                "9730d896.a2ed08"
            ]
        ]
    },
    {
        "id": "66dcfcc5.607fb4",
        "type": "inject",
        "z": "58522408.5e1f6c",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "off",
        "payloadType": "str",
        "x": 110,
        "y": 200,
        "wires": [
            [
                "9730d896.a2ed08"
            ]
        ]
    },
    {
        "id": "73e66a50.83c1c4",
        "type": "bigtimer",
        "z": "58522408.5e1f6c",
        "d": true,
        "outtopic": "timer2",
        "outpayload1": "true",
        "outpayload2": "false",
        "name": "Big Timer",
        "comment": "timer2",
        "lat": "53.24802",
        "lon": "50.19207",
        "starttime": "5004",
        "endtime": "5000",
        "starttime2": "0",
        "endtime2": "0",
        "startoff": "-15",
        "endoff": "30",
        "startoff2": 0,
        "endoff2": 0,
        "offs": 0,
        "outtext1": "",
        "outtext2": "",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": "",
        "month7": "",
        "day8": "",
        "month8": "",
        "day9": "",
        "month9": "",
        "day10": "",
        "month10": "",
        "day11": "",
        "month11": "",
        "day12": "",
        "month12": "",
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": "",
        "xmonth7": "",
        "xday8": "",
        "xmonth8": "",
        "xday9": "",
        "xmonth9": "",
        "xday10": "",
        "xmonth10": "",
        "xday11": "",
        "xmonth11": "",
        "xday12": "",
        "xmonth12": "",
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": false,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 340,
        "y": 280,
        "wires": [
            [
                "4bb9a6da.f64318",
                "6999c898.12aa98"
            ],
            [],
            []
        ]
    },
    {
        "id": "4bb9a6da.f64318",
        "type": "debug",
        "z": "58522408.5e1f6c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 570,
        "y": 220,
        "wires": []
    },
    {
        "id": "2a4f6424.f719ac",
        "type": "inject",
        "z": "58522408.5e1f6c",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "on",
        "payloadType": "str",
        "x": 110,
        "y": 280,
        "wires": [
            [
                "73e66a50.83c1c4"
            ]
        ]
    },
    {
        "id": "a2a21787.0728f8",
        "type": "inject",
        "z": "58522408.5e1f6c",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "off",
        "payloadType": "str",
        "x": 110,
        "y": 320,
        "wires": [
            [
                "73e66a50.83c1c4"
            ]
        ]
    },
    {
        "id": "e55b2b25.0416e8",
        "type": "debug",
        "z": "58522408.5e1f6c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 570,
        "y": 180,
        "wires": []
    },
    {
        "id": "bcf66ae.ea8b298",
        "type": "debug",
        "z": "58522408.5e1f6c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 550,
        "y": 140,
        "wires": []
    },
    {
        "id": "c27bac63.b2148",
        "type": "inject",
        "z": "58522408.5e1f6c",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "sync",
        "payloadType": "str",
        "x": 110,
        "y": 40,
        "wires": [
            [
                "9730d896.a2ed08"
            ]
        ]
    },
    {
        "id": "f13d0c87.178f5",
        "type": "inject",
        "z": "58522408.5e1f6c",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 830,
        "y": 780,
        "wires": [
            [
                "3068cd7d.d02cb2"
            ]
        ]
    },
    {
        "id": "df90168a.332578",
        "type": "inject",
        "z": "58522408.5e1f6c",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 830,
        "y": 840,
        "wires": [
            [
                "3068cd7d.d02cb2"
            ]
        ]
    },
    {
        "id": "dba7e504.a22108",
        "type": "mqtt in",
        "z": "58522408.5e1f6c",
        "name": "MSI",
        "topic": "msi/powerstatus",
        "qos": "2",
        "datatype": "auto",
        "broker": "6d5d992d.6206c8",
        "inputs": 0,
        "x": 750,
        "y": 100,
        "wires": [
            [
                "8b6fdc18.72995",
                "9282d4f0.60a598"
            ]
        ]
    },
    {
        "id": "8b6fdc18.72995",
        "type": "debug",
        "z": "58522408.5e1f6c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 990,
        "y": 100,
        "wires": []
    },
    {
        "id": "9282d4f0.60a598",
        "type": "change",
        "z": "58522408.5e1f6c",
        "name": "MSI ip",
        "rules": [
            {
                "t": "set",
                "p": "msi-ip",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "31b69ad8.7df206",
        "type": "adv ping",
        "z": "58522408.5e1f6c",
        "d": true,
        "name": "",
        "host": "",
        "x": 940,
        "y": 360,
        "wires": [
            [
                "40f72a16.ff0764"
            ]
        ]
    },
    {
        "id": "80924e9c.de6dc",
        "type": "change",
        "z": "58522408.5e1f6c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "host",
                "pt": "msg",
                "to": "msi-ip",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 950,
        "y": 300,
        "wires": [
            [
                "31b69ad8.7df206"
            ]
        ]
    },
    {
        "id": "40f72a16.ff0764",
        "type": "switch",
        "z": "58522408.5e1f6c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 630,
        "y": 420,
        "wires": [
            [
                "cbfad464.f59168"
            ],
            [
                "e9de1e1c.0b65b"
            ]
        ]
    },
    {
        "id": "567252a7.61edbc",
        "type": "debug",
        "z": "58522408.5e1f6c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 770,
        "y": 560,
        "wires": []
    },
    {
        "id": "61512355.43846c",
        "type": "inject",
        "z": "58522408.5e1f6c",
        "name": "",
        "repeat": "180",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 830,
        "y": 200,
        "wires": [
            [
                "4449852a.9fe0fc"
            ]
        ]
    },
    {
        "id": "e9de1e1c.0b65b",
        "type": "change",
        "z": "58522408.5e1f6c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 500,
        "wires": [
            [
                "353136c.61396ca"
            ]
        ]
    },
    {
        "id": "cbfad464.f59168",
        "type": "change",
        "z": "58522408.5e1f6c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msi",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 460,
        "wires": [
            [
                "a12098e5.356718",
                "567252a7.61edbc"
            ]
        ]
    },
    {
        "id": "353136c.61396ca",
        "type": "change",
        "z": "58522408.5e1f6c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msi",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 600,
        "wires": [
            [
                "f7f2caec.593e88",
                "567252a7.61edbc"
            ]
        ]
    },
    {
        "id": "76eff066.70dab",
        "type": "change",
        "z": "58522408.5e1f6c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "timer",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 280,
        "wires": [
            [
                "80924e9c.de6dc"
            ]
        ]
    },
    {
        "id": "6999c898.12aa98",
        "type": "switch",
        "z": "58522408.5e1f6c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 530,
        "y": 300,
        "wires": [
            [
                "76eff066.70dab"
            ],
            [
                "10266a71.510766"
            ]
        ]
    },
    {
        "id": "10266a71.510766",
        "type": "change",
        "z": "58522408.5e1f6c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "timer",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 250,
        "y": 720,
        "wires": [
            [
                "a12098e5.356718"
            ]
        ]
    },
    {
        "id": "f7f2caec.593e88",
        "type": "change",
        "z": "58522408.5e1f6c",
        "name": "1",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 830,
        "y": 660,
        "wires": [
            [
                "3068cd7d.d02cb2"
            ]
        ]
    },
    {
        "id": "a12098e5.356718",
        "type": "change",
        "z": "58522408.5e1f6c",
        "name": "0",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 830,
        "y": 720,
        "wires": [
            [
                "3068cd7d.d02cb2"
            ]
        ]
    },
    {
        "id": "865130e0.00776",
        "type": "mqtt in",
        "z": "58522408.5e1f6c",
        "name": "Lamp2",
        "topic": "mqtt/Lamp2/blue",
        "qos": "2",
        "datatype": "auto",
        "broker": "6d5d992d.6206c8",
        "inputs": 0,
        "x": 90,
        "y": 400,
        "wires": [
            [
                "54b210f3.b4f64"
            ]
        ]
    },
    {
        "id": "54b210f3.b4f64",
        "type": "debug",
        "z": "58522408.5e1f6c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 350,
        "y": 400,
        "wires": []
    },
    {
        "id": "7c873e63.c9606",
        "type": "mqtt in",
        "z": "58522408.5e1f6c",
        "name": "Lamp1",
        "topic": "mqtt/Lamp1/output5",
        "qos": "2",
        "datatype": "auto",
        "broker": "6d5d992d.6206c8",
        "inputs": 0,
        "x": 90,
        "y": 460,
        "wires": [
            [
                "54b210f3.b4f64"
            ]
        ]
    },
    {
        "id": "4449852a.9fe0fc",
        "type": "switch",
        "z": "58522408.5e1f6c",
        "name": "timer == true",
        "property": "timer",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1040,
        "y": 200,
        "wires": [
            [
                "80924e9c.de6dc"
            ]
        ]
    },
    {
        "id": "1091f695.3aad39",
        "type": "function",
        "z": "58522408.5e1f6c",
        "name": "status",
        "func": "msg.payload = !msg.payload;\nif (msg.payload) node.status({fill:\"green\",shape:\"ring\",text:\"on\"})\nelse node.status({fill:\"green\",shape:\"dot\",text:\"on\"});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 170,
        "y": 540,
        "wires": [
            [
                "165890c5.3c0a5f"
            ]
        ]
    },
    {
        "id": "351a80fd.c5189",
        "type": "inject",
        "z": "58522408.5e1f6c",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 290,
        "y": 900,
        "wires": [
            [
                "6c7e419f.77d4b"
            ]
        ]
    },
    {
        "id": "79ec5ab9.548fd4",
        "type": "inject",
        "z": "58522408.5e1f6c",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 290,
        "y": 960,
        "wires": [
            [
                "90a9229f.08c87"
            ]
        ]
    },
    {
        "id": "1baed8af.949a37",
        "type": "delay",
        "z": "58522408.5e1f6c",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 280,
        "y": 820,
        "wires": [
            [
                "b39bb426.0bfe88"
            ]
        ]
    },
    {
        "id": "165890c5.3c0a5f",
        "type": "link out",
        "z": "58522408.5e1f6c",
        "name": "",
        "links": [
            "b1d3a4d0.0d5c18"
        ],
        "x": 275,
        "y": 540,
        "wires": []
    },
    {
        "id": "b1d3a4d0.0d5c18",
        "type": "link in",
        "z": "58522408.5e1f6c",
        "name": "",
        "links": [
            "165890c5.3c0a5f"
        ],
        "x": 155,
        "y": 820,
        "wires": [
            [
                "1baed8af.949a37"
            ]
        ]
    },
    {
        "id": "10978d6f.293d83",
        "type": "link in",
        "z": "58522408.5e1f6c",
        "name": "",
        "links": [
            "b39bb426.0bfe88",
            "6c7e419f.77d4b",
            "90a9229f.08c87"
        ],
        "x": 55,
        "y": 540,
        "wires": [
            [
                "1091f695.3aad39"
            ]
        ]
    },
    {
        "id": "b39bb426.0bfe88",
        "type": "link out",
        "z": "58522408.5e1f6c",
        "name": "",
        "links": [
            "10978d6f.293d83"
        ],
        "x": 395,
        "y": 820,
        "wires": []
    },
    {
        "id": "6c7e419f.77d4b",
        "type": "link out",
        "z": "58522408.5e1f6c",
        "name": "",
        "links": [
            "10978d6f.293d83"
        ],
        "x": 435,
        "y": 900,
        "wires": []
    },
    {
        "id": "90a9229f.08c87",
        "type": "link out",
        "z": "58522408.5e1f6c",
        "name": "",
        "links": [
            "10978d6f.293d83"
        ],
        "x": 435,
        "y": 960,
        "wires": []
    },
    {
        "id": "4c2d4d33.a45484",
        "type": "mqtt in",
        "z": "b1723f44.54ecb",
        "d": true,
        "name": "Lamp1Blue",
        "topic": "mqtt/Lamp1/pwm1",
        "qos": "2",
        "datatype": "auto",
        "broker": "6d5d992d.6206c8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 130,
        "y": 660,
        "wires": [
            [
                "f8d7101a.02c4b"
            ]
        ]
    },
    {
        "id": "f8d7101a.02c4b",
        "type": "debug",
        "z": "b1723f44.54ecb",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 430,
        "y": 660,
        "wires": []
    },
    {
        "id": "f5b25aeb.41c868",
        "type": "mqtt out",
        "z": "b1723f44.54ecb",
        "d": true,
        "name": "Lamp1Blue",
        "topic": "mqtt/Lamp1/pwm1",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "6d5d992d.6206c8",
        "x": 450,
        "y": 740,
        "wires": []
    },
    {
        "id": "f6c20eae.0cb2f",
        "type": "inject",
        "z": "b1723f44.54ecb",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 130,
        "y": 740,
        "wires": [
            [
                "f5b25aeb.41c868"
            ]
        ]
    },
    {
        "id": "23768fcc.7a215",
        "type": "ui_slider",
        "z": "b1723f44.54ecb",
        "name": "Green",
        "label": "Green",
        "tooltip": "",
        "group": "c1233c9d.822f",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "all",
        "topic": "",
        "min": 0,
        "max": "255",
        "step": 1,
        "x": 350,
        "y": 140,
        "wires": [
            [
                "12b0a73c.5a22f9"
            ]
        ]
    },
    {
        "id": "4ea237f5.03c7d8",
        "type": "inject",
        "z": "b1723f44.54ecb",
        "name": "make request",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "100",
        "payload": "10",
        "payloadType": "num",
        "x": 390,
        "y": 60,
        "wires": [
            [
                "d940f4f8.46f798",
                "12b0a73c.5a22f9"
            ]
        ]
    },
    {
        "id": "d940f4f8.46f798",
        "type": "http request",
        "z": "b1723f44.54ecb",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.71/pwm?ch=1&set={{{payload}}}",
        "tls": "",
        "proxy": "",
        "x": 690,
        "y": 240,
        "wires": [
            [
                "fa64306e.0e586"
            ]
        ]
    },
    {
        "id": "fa64306e.0e586",
        "type": "debug",
        "z": "b1723f44.54ecb",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 890,
        "y": 180,
        "wires": []
    },
    {
        "id": "12b0a73c.5a22f9",
        "type": "http request",
        "z": "b1723f44.54ecb",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "http://192.168.1.71/pwm?ch=0&set={{{payload}}}",
        "tls": "",
        "proxy": "",
        "x": 690,
        "y": 100,
        "wires": [
            [
                "fa64306e.0e586"
            ]
        ]
    },
    {
        "id": "6cf5da1e.8be734",
        "type": "ui_slider",
        "z": "b1723f44.54ecb",
        "name": "Blue",
        "label": "Blue",
        "tooltip": "",
        "group": "c1233c9d.822f",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "all",
        "topic": "",
        "min": 0,
        "max": "255",
        "step": 1,
        "x": 350,
        "y": 180,
        "wires": [
            [
                "d940f4f8.46f798"
            ]
        ]
    },
    {
        "id": "dfca38d3.1cb358",
        "type": "inject",
        "z": "b1723f44.54ecb",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 370,
        "y": 280,
        "wires": [
            [
                "d940f4f8.46f798",
                "12b0a73c.5a22f9"
            ]
        ]
    },
    {
        "id": "3a4db4f6.b3b2bc",
        "type": "inject",
        "z": "b1723f44.54ecb",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 400,
        "wires": [
            [
                "95dd706.e003b9"
            ]
        ]
    },
    {
        "id": "b1e496c1.ed3d68",
        "type": "debug",
        "z": "b1723f44.54ecb",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 790,
        "y": 400,
        "wires": []
    },
    {
        "id": "95dd706.e003b9",
        "type": "change",
        "z": "b1723f44.54ecb",
        "name": "LampON",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "http://192.168.1.71/gpio?st=1&pin=15",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 400,
        "wires": [
            [
                "b66ca01d.f50e6"
            ]
        ]
    },
    {
        "id": "b66ca01d.f50e6",
        "type": "http request",
        "z": "b1723f44.54ecb",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "proxy": "",
        "x": 550,
        "y": 400,
        "wires": [
            [
                "b1e496c1.ed3d68"
            ]
        ]
    },
    {
        "id": "e6ca9ab4.109998",
        "type": "inject",
        "z": "b1723f44.54ecb",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 460,
        "wires": [
            [
                "c9cebf33.078d2"
            ]
        ]
    },
    {
        "id": "c9cebf33.078d2",
        "type": "change",
        "z": "b1723f44.54ecb",
        "name": "LampOff",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "http://192.168.1.71/gpio?st=0&pin=15",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 460,
        "wires": [
            [
                "b66ca01d.f50e6"
            ]
        ]
    },
    {
        "id": "fa0c8159.6c2f6",
        "type": "mqtt in",
        "z": "b1723f44.54ecb",
        "d": true,
        "name": "Lamp2",
        "topic": "mqtt/Lamp2/blue",
        "qos": "2",
        "datatype": "auto",
        "broker": "6d5d992d.6206c8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 110,
        "y": 840,
        "wires": [
            [
                "ee626eca.510d3"
            ]
        ]
    },
    {
        "id": "ee626eca.510d3",
        "type": "debug",
        "z": "b1723f44.54ecb",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 370,
        "y": 840,
        "wires": []
    },
    {
        "id": "65fadc71.8ba204",
        "type": "mqtt out",
        "z": "b1723f44.54ecb",
        "d": true,
        "name": "Lamp2/blue",
        "topic": "mqtt/Lamp2/blue",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "6d5d992d.6206c8",
        "x": 1030,
        "y": 740,
        "wires": []
    },
    {
        "id": "7eb973c9.61674c",
        "type": "inject",
        "z": "b1723f44.54ecb",
        "name": "10",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "10",
        "payloadType": "str",
        "x": 710,
        "y": 740,
        "wires": [
            [
                "65fadc71.8ba204"
            ]
        ]
    },
    {
        "id": "ed364fb7.0fb88",
        "type": "inject",
        "z": "b1723f44.54ecb",
        "name": "0",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "str",
        "x": 710,
        "y": 660,
        "wires": [
            [
                "65fadc71.8ba204"
            ]
        ]
    },
    {
        "id": "b993ca32.122d98",
        "type": "inject",
        "z": "b1723f44.54ecb",
        "name": "100",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "100",
        "payloadType": "str",
        "x": 710,
        "y": 820,
        "wires": [
            [
                "65fadc71.8ba204"
            ]
        ]
    },
    {
        "id": "6f39a714.336bc8",
        "type": "inject",
        "z": "b1723f44.54ecb",
        "name": "255",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "255",
        "payloadType": "str",
        "x": 710,
        "y": 900,
        "wires": [
            [
                "65fadc71.8ba204"
            ]
        ]
    },
    {
        "id": "ba4566ad.0d1998",
        "type": "mqtt in",
        "z": "b1723f44.54ecb",
        "d": true,
        "name": "ADC2",
        "topic": "mqtt/Lamp2/adc",
        "qos": "2",
        "datatype": "auto",
        "broker": "6d5d992d.6206c8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 570,
        "y": 1020,
        "wires": [
            [
                "23aea17b.7af65e"
            ]
        ]
    },
    {
        "id": "6f7bbb29.1c0f94",
        "type": "debug",
        "z": "b1723f44.54ecb",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1010,
        "y": 1020,
        "wires": []
    },
    {
        "id": "23aea17b.7af65e",
        "type": "function",
        "z": "b1723f44.54ecb",
        "name": "Fields",
        "func": "var value = msg.payload\nmsg.payload = {\n    valueADC: value,\n    strValue: \"Lamp2ADC\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 790,
        "y": 1020,
        "wires": [
            [
                "6f7bbb29.1c0f94"
            ]
        ]
    },
    {
        "id": "e9af59cf.015218",
        "type": "inject",
        "z": "b1723f44.54ecb",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "100",
        "payloadType": "num",
        "x": 130,
        "y": 780,
        "wires": [
            [
                "f5b25aeb.41c868"
            ]
        ]
    },
    {
        "id": "84719c90.8e315",
        "type": "inject",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 300,
        "y": 280,
        "wires": [
            [
                "9dea3da0.a5289"
            ]
        ]
    },
    {
        "id": "9dea3da0.a5289",
        "type": "function",
        "z": "5c2a57a.39a4fa8",
        "name": "simple query",
        "func": "msg.query=\"select * from /.*/;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 460,
        "y": 280,
        "wires": [
            [
                "788204c2.bad02c"
            ]
        ]
    },
    {
        "id": "78f6993b.c4af48",
        "type": "debug",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 930,
        "y": 280,
        "wires": []
    },
    {
        "id": "468582d4.a9a9ac",
        "type": "inject",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 299,
        "y": 160,
        "wires": [
            [
                "57ac2d34.c97fb4"
            ]
        ]
    },
    {
        "id": "eff78dfd.cc5da",
        "type": "debug",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "complete": "false",
        "x": 770,
        "y": 160,
        "wires": []
    },
    {
        "id": "59b11266.8f2c2c",
        "type": "function",
        "z": "5c2a57a.39a4fa8",
        "name": "single value",
        "func": "msg.payload = Math.random()*10;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 470,
        "y": 380,
        "wires": [
            [
                "9eb702a9.b4dd7"
            ]
        ]
    },
    {
        "id": "3d3423f5.276d2c",
        "type": "inject",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 280,
        "y": 380,
        "wires": [
            [
                "59b11266.8f2c2c"
            ]
        ]
    },
    {
        "id": "384a2264.71f90e",
        "type": "inject",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 300,
        "y": 480,
        "wires": [
            [
                "740519.3d15aae8"
            ]
        ]
    },
    {
        "id": "740519.3d15aae8",
        "type": "function",
        "z": "5c2a57a.39a4fa8",
        "name": "Fields",
        "func": "msg.payload = {\n    numValue: 123.0,\n    strValue: \"message\",\n    randomValue: Math.random()*10\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 448,
        "y": 480,
        "wires": [
            [
                "e94b47a3.01ae38"
            ]
        ]
    },
    {
        "id": "cce199ca.88c318",
        "type": "function",
        "z": "5c2a57a.39a4fa8",
        "name": "multiple readings",
        "func": "msg.payload = [\n    [{\n        numValue: 10,\n        randomValue: Math.random()*10,\n        strValue: \"message1\",\n        time: new Date(\"2015-12-28T19:41:13Z\").getTime()\n    },\n    {\n        tag1:\"sensor1\",\n        tag2:\"device2\"\n    }],\n    [{\n        numValue: 20,\n        randomValue: Math.random()*10,\n        strValue: \"message2\",\n        time: new Date(\"2015-12-28T19:41:14Z\").getTime()\n    },\n    {\n        tag1:\"sensor1\",\n        tag2:\"device2\"\n    }]\n];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 450,
        "y": 560,
        "wires": [
            [
                "2f844f5a.86b35"
            ]
        ]
    },
    {
        "id": "4fbe8cfa.0938f4",
        "type": "inject",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 276,
        "y": 560,
        "wires": [
            [
                "cce199ca.88c318"
            ]
        ]
    },
    {
        "id": "c24ef1b7.b6fe9",
        "type": "function",
        "z": "5c2a57a.39a4fa8",
        "name": "multiple measurement points",
        "func": "msg.payload = [\n    {\n        measurement: \"weather_sensor\",\n        fields: {\n            temp: 5.5,\n            light: 678,\n            humidity: 51\n        },\n        tags:{\n            location:\"garden\"\n        },\n        timestamp: new Date()\n    },\n    {\n        measurement: \"alarm_sensor\",\n        fields: {\n            proximity: 999,\n            temp: 19.5\n        },\n        tags:{\n            location:\"home\"\n        },\n        timestamp: new Date()\n    }\n];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 480,
        "y": 640,
        "wires": [
            [
                "88fa9dbe.ae4eb"
            ]
        ]
    },
    {
        "id": "95afe376.73c66",
        "type": "inject",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 640,
        "wires": [
            [
                "c24ef1b7.b6fe9"
            ]
        ]
    },
    {
        "id": "461bcfbc.d10d8",
        "type": "mqtt in",
        "z": "5c2a57a.39a4fa8",
        "name": "floraC47C8D62A577",
        "topic": "home/Gateway/BTtoMQTT/C47C8D62A577/#",
        "qos": "0",
        "datatype": "auto",
        "broker": "6d5d992d.6206c8",
        "inputs": 0,
        "x": 210,
        "y": 820,
        "wires": [
            [
                "a6d9952d.813ec8",
                "216efb57.154f94"
            ]
        ]
    },
    {
        "id": "9c43bbb9.0cd648",
        "type": "debug",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 770,
        "y": 820,
        "wires": []
    },
    {
        "id": "8a5aabc4.286bc8",
        "type": "function",
        "z": "5c2a57a.39a4fa8",
        "name": "Fields",
        "func": "var keyFlora = (Object.keys(msg.payload)[0]);\nmsg.payload = {\n    numFlora: \"C47C8D62A577\",\n    name: 'Cymbidium',\n    parametr: keyFlora,\n    value: msg.payload[keyFlora]\n    }\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 570,
        "y": 820,
        "wires": [
            [
                "9c43bbb9.0cd648",
                "d21d2726.3ce028"
            ]
        ]
    },
    {
        "id": "a6d9952d.813ec8",
        "type": "json",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 410,
        "y": 820,
        "wires": [
            [
                "8a5aabc4.286bc8"
            ]
        ]
    },
    {
        "id": "4138a93e.a59a88",
        "type": "mqtt in",
        "z": "5c2a57a.39a4fa8",
        "name": "floraC47C8D62422D",
        "topic": "home/Gateway/BTtoMQTT/C47C8D62422D/#",
        "qos": "0",
        "datatype": "auto",
        "broker": "6d5d992d.6206c8",
        "inputs": 0,
        "x": 210,
        "y": 900,
        "wires": [
            [
                "5b343ae3.b78434"
            ]
        ]
    },
    {
        "id": "956303e1.f5695",
        "type": "debug",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 780,
        "y": 900,
        "wires": []
    },
    {
        "id": "e7b6ccc2.5d78a",
        "type": "function",
        "z": "5c2a57a.39a4fa8",
        "name": "Fields",
        "func": "var keyFlora = (Object.keys(msg.payload)[0]);\nmsg.payload = {\n    numFlora: \"C47C8D62422D\",\n    name: 'Laurus',\n    parametr: keyFlora,\n    value: msg.payload[keyFlora]\n    }\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 570,
        "y": 900,
        "wires": [
            [
                "956303e1.f5695",
                "5d02d152.73f61"
            ]
        ]
    },
    {
        "id": "5b343ae3.b78434",
        "type": "json",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 410,
        "y": 900,
        "wires": [
            [
                "e7b6ccc2.5d78a"
            ]
        ]
    },
    {
        "id": "9fb77258.2ab42",
        "type": "mqtt in",
        "z": "5c2a57a.39a4fa8",
        "name": "floraC47C8D6273FC",
        "topic": "home/Gateway/BTtoMQTT/C47C8D6273FC/#",
        "qos": "0",
        "datatype": "auto",
        "broker": "6d5d992d.6206c8",
        "inputs": 0,
        "x": 220,
        "y": 980,
        "wires": [
            [
                "39817d1e.5bf9e2"
            ]
        ]
    },
    {
        "id": "39817d1e.5bf9e2",
        "type": "json",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 410,
        "y": 980,
        "wires": [
            [
                "eeaecf1a.86d34"
            ]
        ]
    },
    {
        "id": "eeaecf1a.86d34",
        "type": "function",
        "z": "5c2a57a.39a4fa8",
        "name": "Fields",
        "func": "var keyFlora = (Object.keys(msg.payload)[0]);\nmsg.payload = {\n    numFlora: \"C47C8D6273FC\",\n    name: 'Ficus',\n    parametr: keyFlora,\n    value: msg.payload[keyFlora]\n    }\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 570,
        "y": 980,
        "wires": [
            [
                "4100d2de.647d0c",
                "e942ba6e.022228"
            ]
        ]
    },
    {
        "id": "4100d2de.647d0c",
        "type": "debug",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 760,
        "y": 980,
        "wires": []
    },
    {
        "id": "6776e746.3b5748",
        "type": "mqtt in",
        "z": "5c2a57a.39a4fa8",
        "name": "floraC47C8D61A2A7",
        "topic": "home/Gateway/BTtoMQTT/C47C8D61A2A7/#",
        "qos": "0",
        "datatype": "auto",
        "broker": "6d5d992d.6206c8",
        "inputs": 0,
        "x": 220,
        "y": 1060,
        "wires": [
            [
                "6c17cadd.3c3be4"
            ]
        ]
    },
    {
        "id": "d077f982.b59198",
        "type": "debug",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 770,
        "y": 1060,
        "wires": []
    },
    {
        "id": "6c17cadd.3c3be4",
        "type": "json",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 410,
        "y": 1060,
        "wires": [
            [
                "c910e130.807fd"
            ]
        ]
    },
    {
        "id": "c910e130.807fd",
        "type": "function",
        "z": "5c2a57a.39a4fa8",
        "name": "Fields",
        "func": "var keyFlora = (Object.keys(msg.payload)[0]);\nmsg.payload = {\n    numFlora: \"C47C8D61A2A7\",\n    name: 'Dracaena',\n    parametr: keyFlora,\n    value: msg.payload[keyFlora]\n    }\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 570,
        "y": 1060,
        "wires": [
            [
                "d077f982.b59198",
                "caeb3f69.a8d6b"
            ]
        ]
    },
    {
        "id": "216efb57.154f94",
        "type": "debug",
        "z": "5c2a57a.39a4fa8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 540,
        "y": 720,
        "wires": []
    },
    {
        "id": "9eb702a9.b4dd7",
        "type": "influxdb out",
        "z": "5c2a57a.39a4fa8",
        "influxdb": "f5f24bed.d87708",
        "name": "",
        "measurement": "test",
        "precision": "",
        "retentionPolicy": "",
        "x": 710,
        "y": 380,
        "wires": []
    },
    {
        "id": "e94b47a3.01ae38",
        "type": "influxdb out",
        "z": "5c2a57a.39a4fa8",
        "influxdb": "b420a598.f18178",
        "name": "",
        "measurement": "test",
        "x": 618,
        "y": 480,
        "wires": []
    },
    {
        "id": "2f844f5a.86b35",
        "type": "influxdb out",
        "z": "5c2a57a.39a4fa8",
        "influxdb": "fff3774d.8ab808",
        "name": "",
        "measurement": "test",
        "x": 651,
        "y": 559,
        "wires": []
    },
    {
        "id": "d21d2726.3ce028",
        "type": "influxdb out",
        "z": "5c2a57a.39a4fa8",
        "influxdb": "91e47ebe.114cc",
        "name": "flora-C47C8D62A577",
        "measurement": "flora-C47C8D62A577",
        "precision": "",
        "retentionPolicy": "",
        "x": 780,
        "y": 780,
        "wires": []
    },
    {
        "id": "5d02d152.73f61",
        "type": "influxdb out",
        "z": "5c2a57a.39a4fa8",
        "influxdb": "3b7cd9bc.25d226",
        "name": "flora-C47C8D62422D",
        "measurement": "flora-C47C8D62422D",
        "precision": "",
        "retentionPolicy": "",
        "x": 780,
        "y": 860,
        "wires": []
    },
    {
        "id": "e942ba6e.022228",
        "type": "influxdb out",
        "z": "5c2a57a.39a4fa8",
        "influxdb": "85ac72e9.c6bb2",
        "name": "flora-C47C8D6273FC",
        "measurement": "flora-C47C8D6273FC",
        "precision": "",
        "retentionPolicy": "",
        "x": 780,
        "y": 940,
        "wires": []
    },
    {
        "id": "caeb3f69.a8d6b",
        "type": "influxdb out",
        "z": "5c2a57a.39a4fa8",
        "influxdb": "70d922cd.cc611c",
        "name": "flora-C47C8D61A2A7",
        "measurement": "flora-C47C8D61A2A7",
        "precision": "",
        "retentionPolicy": "",
        "x": 780,
        "y": 1020,
        "wires": []
    },
    {
        "id": "88fa9dbe.ae4eb",
        "type": "influxdb batch",
        "z": "5c2a57a.39a4fa8",
        "influxdb": "fff3774d.8ab808",
        "precision": "",
        "retentionPolicy": "",
        "name": "",
        "x": 750,
        "y": 640,
        "wires": []
    },
    {
        "id": "788204c2.bad02c",
        "type": "influxdb in",
        "z": "5c2a57a.39a4fa8",
        "influxdb": "5acda325.99c72c",
        "name": "time query",
        "query": "",
        "rawOutput": false,
        "precision": "",
        "retentionPolicy": "",
        "x": 690,
        "y": 280,
        "wires": [
            [
                "78f6993b.c4af48"
            ]
        ]
    },
    {
        "id": "57ac2d34.c97fb4",
        "type": "influxdb in",
        "z": "5c2a57a.39a4fa8",
        "influxdb": "5acda325.99c72c",
        "name": "time query",
        "query": "select * from /.*/;",
        "rawOutput": false,
        "precision": "",
        "retentionPolicy": "",
        "x": 510,
        "y": 160,
        "wires": [
            [
                "eff78dfd.cc5da"
            ]
        ]
    },
    {
        "id": "47d7444d.23e7fc",
        "type": "inject",
        "z": "4788f78d.cd37e8",
        "name": "URL every 15 min",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "Кунгуров",
                "vt": "str"
            }
        ],
        "repeat": "900",
        "crontab": "",
        "once": true,
        "onceDelay": "30",
        "topic": "Кунгуров",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 540,
        "wires": [
            [
                "94ff47b.610c9b8",
                "759305ea.b33b9c",
                "d38e6d7d.a7dd9",
                "caa6d14b.61861"
            ]
        ]
    },
    {
        "id": "97b9a61d.38a9d8",
        "type": "html",
        "z": "4788f78d.cd37e8",
        "name": "Select all post",
        "property": "payload",
        "outproperty": "payload",
        "tag": ".entry",
        "ret": "attr",
        "as": "multi",
        "x": 320,
        "y": 280,
        "wires": [
            [
                "d1771260.266fa"
            ]
        ]
    },
    {
        "id": "d1771260.266fa",
        "type": "switch",
        "z": "4788f78d.cd37e8",
        "name": "first post select",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "head",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 540,
        "y": 280,
        "wires": [
            [
                "446f4611.6de428"
            ]
        ]
    },
    {
        "id": "b07b8010.c370b",
        "type": "delay",
        "z": "4788f78d.cd37e8",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 420,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "9612ed1.d1b731",
        "type": "pushbullet",
        "z": "4788f78d.cd37e8",
        "config": "3dad2d52.92b2e2",
        "pushtype": "",
        "title": "",
        "chan": "",
        "name": "Node-Red notification",
        "x": 1940,
        "y": 680,
        "wires": []
    },
    {
        "id": "9593be59.7d046",
        "type": "inject",
        "z": "4788f78d.cd37e8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "https://kungurov.livejournal.com/",
        "payloadType": "str",
        "x": 1920,
        "y": 580,
        "wires": [
            [
                "9612ed1.d1b731"
            ]
        ]
    },
    {
        "id": "3760ced5.e77552",
        "type": "pushbullet in",
        "z": "4788f78d.cd37e8",
        "d": true,
        "config": "3dad2d52.92b2e2",
        "name": "xiaomi",
        "x": 650,
        "y": 160,
        "wires": [
            [
                "4af3b485.faa5bc"
            ]
        ]
    },
    {
        "id": "4af3b485.faa5bc",
        "type": "debug",
        "z": "4788f78d.cd37e8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 850,
        "y": 160,
        "wires": []
    },
    {
        "id": "cfb23764.733598",
        "type": "catch",
        "z": "4788f78d.cd37e8",
        "name": "site",
        "scope": [
            "d1771260.266fa",
            "836f9825.d26218"
        ],
        "uncaught": false,
        "x": 90,
        "y": 160,
        "wires": [
            [
                "a142e448.650788"
            ]
        ]
    },
    {
        "id": "a142e448.650788",
        "type": "delay",
        "z": "4788f78d.cd37e8",
        "name": "repit",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "3",
        "nbRateUnits": "10",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 250,
        "y": 160,
        "wires": [
            [
                "b07b8010.c370b"
            ]
        ]
    },
    {
        "id": "b63bc9cb.3fae78",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "save post",
        "rules": [
            {
                "t": "set",
                "p": "#:(nas)::post",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "post",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 360,
        "wires": [
            [
                "d406c03f.0fe06"
            ]
        ]
    },
    {
        "id": "da90b33d.76c34",
        "type": "switch",
        "z": "4788f78d.cd37e8",
        "name": "compare post",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "post",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "#:(nas)::post",
                "vt": "flow"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 880,
        "y": 360,
        "wires": [
            [],
            [],
            [
                "b63bc9cb.3fae78"
            ]
        ]
    },
    {
        "id": "ed93e302.83cb4",
        "type": "switch",
        "z": "4788f78d.cd37e8",
        "name": "post init",
        "property": "#:(nas)::post",
        "propertyType": "flow",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1160,
        "y": 200,
        "wires": [
            [],
            [
                "4d7950f5.a6bd9"
            ]
        ]
    },
    {
        "id": "4d7950f5.a6bd9",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(nas)::post",
                "pt": "flow",
                "to": "\" \"",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "14f1944.4aa686c",
        "type": "inject",
        "z": "4788f78d.cd37e8",
        "name": "init post",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1170,
        "y": 140,
        "wires": [
            [
                "4d7950f5.a6bd9"
            ]
        ]
    },
    {
        "id": "446f4611.6de428",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "select id",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 280,
        "wires": [
            [
                "da90b33d.76c34"
            ]
        ]
    },
    {
        "id": "836f9825.d26218",
        "type": "http request",
        "z": "4788f78d.cd37e8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "https://kungurov.livejournal.com/",
        "tls": "",
        "proxy": "",
        "authType": "",
        "x": 110,
        "y": 280,
        "wires": [
            [
                "97b9a61d.38a9d8"
            ]
        ]
    },
    {
        "id": "3f5b61d1.9173be",
        "type": "inject",
        "z": "4788f78d.cd37e8",
        "name": "make request",
        "props": [
            {
                "p": "payload",
                "v": "Node-Red",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "100",
        "topic": "",
        "payload": "Node-Red",
        "payloadType": "str",
        "x": 190,
        "y": 700,
        "wires": [
            [
                "94ff47b.610c9b8"
            ]
        ]
    },
    {
        "id": "94ff47b.610c9b8",
        "type": "http request",
        "z": "4788f78d.cd37e8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "https://www.npmjs.com/package/node-red",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 610,
        "y": 700,
        "wires": [
            [
                "9b0c115a.9633e",
                "e226be69.a9c72"
            ]
        ]
    },
    {
        "id": "9b0c115a.9633e",
        "type": "html",
        "z": "4788f78d.cd37e8",
        "name": "select version NR",
        "property": "",
        "outproperty": "",
        "tag": "span._76473bea:nth-child(2)",
        "ret": "text",
        "as": "single",
        "x": 850,
        "y": 700,
        "wires": [
            [
                "eae153a9.0e36a",
                "9c51116b.c30f"
            ]
        ]
    },
    {
        "id": "a591d66f.ff62b8",
        "type": "debug",
        "z": "4788f78d.cd37e8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1350,
        "y": 700,
        "wires": []
    },
    {
        "id": "eae153a9.0e36a",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "select 5 simbols",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$substring(payload[0], 0, 5)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 700,
        "wires": [
            [
                "a591d66f.ff62b8",
                "92ff7162fb31fd77"
            ]
        ]
    },
    {
        "id": "4268a4a9.4a17bc",
        "type": "switch",
        "z": "4788f78d.cd37e8",
        "name": "compare post",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "node",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "#:(nas)::node",
                "vt": "flow"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 1220,
        "y": 620,
        "wires": [
            [],
            [],
            [
                "7450ddef.fe8d24"
            ]
        ]
    },
    {
        "id": "caa6d14b.61861",
        "type": "switch",
        "z": "4788f78d.cd37e8",
        "name": "node init",
        "property": "#:(nas)::node",
        "propertyType": "flow",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 500,
        "y": 580,
        "wires": [
            [],
            [
                "eb8bc730.75f828"
            ]
        ]
    },
    {
        "id": "eb8bc730.75f828",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "node",
                "pt": "flow",
                "to": "\"\"",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "7450ddef.fe8d24",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "save node",
        "rules": [
            {
                "t": "set",
                "p": "#:(nas)::node",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "node",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 620,
        "wires": [
            [
                "6e9d4c4f.42d034"
            ]
        ]
    },
    {
        "id": "6e9d4c4f.42d034",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Node-Red version:",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1640,
        "y": 620,
        "wires": [
            [
                "9612ed1.d1b731"
            ]
        ]
    },
    {
        "id": "995db54c.10d6e8",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "address",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "https://kungurov.livejournal.com/",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 380,
        "wires": [
            [
                "e9c1dace.688358",
                "4bc71946.24fb98"
            ]
        ]
    },
    {
        "id": "7c68f006.69f24",
        "type": "http request",
        "z": "4788f78d.cd37e8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "url": "",
        "x": 1450,
        "y": 280,
        "wires": [
            [
                "78192a14.bb22b4"
            ]
        ]
    },
    {
        "id": "c16ef2d4.e3277",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1250,
        "y": 280,
        "wires": [
            [
                "7c68f006.69f24"
            ]
        ]
    },
    {
        "id": "78192a14.bb22b4",
        "type": "html",
        "z": "4788f78d.cd37e8",
        "name": "",
        "property": "payload",
        "outproperty": "topic",
        "tag": "head > title",
        "ret": "text",
        "as": "multi",
        "x": 1630,
        "y": 280,
        "wires": [
            [
                "995db54c.10d6e8"
            ]
        ]
    },
    {
        "id": "d406c03f.0fe06",
        "type": "function",
        "z": "4788f78d.cd37e8",
        "name": "create URL",
        "func": "msg.payload = parseInt(msg.payload.match(/\\d+/));\nmsg.payload = `https://kungurov.livejournal.com/${msg.payload}.html`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1050,
        "y": 280,
        "wires": [
            [
                "c16ef2d4.e3277"
            ]
        ]
    },
    {
        "id": "e9c1dace.688358",
        "type": "debug",
        "z": "4788f78d.cd37e8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1710,
        "y": 380,
        "wires": []
    },
    {
        "id": "4bc71946.24fb98",
        "type": "debug",
        "z": "4788f78d.cd37e8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "topic",
        "targetType": "msg",
        "x": 1720,
        "y": 440,
        "wires": []
    },
    {
        "id": "9c51116b.c30f",
        "type": "debug",
        "z": "4788f78d.cd37e8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1070,
        "y": 760,
        "wires": []
    },
    {
        "id": "e226be69.a9c72",
        "type": "debug",
        "z": "4788f78d.cd37e8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 850,
        "y": 760,
        "wires": []
    },
    {
        "id": "c044201b.033f4",
        "type": "inject",
        "z": "4788f78d.cd37e8",
        "name": "make request",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "100",
        "topic": "",
        "payload": "XP-Pen",
        "payloadType": "str",
        "x": 190,
        "y": 880,
        "wires": [
            [
                "d38e6d7d.a7dd9"
            ]
        ]
    },
    {
        "id": "d38e6d7d.a7dd9",
        "type": "http request",
        "z": "4788f78d.cd37e8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://www.xp-pen.ru/download-445.html",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 610,
        "y": 880,
        "wires": [
            [
                "88ff5336.e12fb",
                "74e4ac5f.b69a64",
                "65fefe1d.a2bed",
                "da0104a7.1b03c8"
            ]
        ]
    },
    {
        "id": "88ff5336.e12fb",
        "type": "html",
        "z": "4788f78d.cd37e8",
        "name": "select version XP-Pen",
        "property": "",
        "outproperty": "",
        "tag": "div.info_right_main:nth-child(3) > div:nth-child(3) > div:nth-child(1) > p:nth-child(1)",
        "ret": "text",
        "as": "multi",
        "x": 840,
        "y": 880,
        "wires": [
            [
                "b5622293.3de5b",
                "971086a527a6f43b"
            ]
        ]
    },
    {
        "id": "74e4ac5f.b69a64",
        "type": "debug",
        "z": "4788f78d.cd37e8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 850,
        "y": 960,
        "wires": []
    },
    {
        "id": "b5622293.3de5b",
        "type": "debug",
        "z": "4788f78d.cd37e8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1070,
        "y": 960,
        "wires": []
    },
    {
        "id": "adc8f767.c0b4c8",
        "type": "switch",
        "z": "4788f78d.cd37e8",
        "name": "compare post",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "xpen",
                "vt": "flow"
            },
            {
                "t": "eq",
                "v": "#:(nas)::xpen",
                "vt": "flow"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 1220,
        "y": 880,
        "wires": [
            [],
            [],
            [
                "5368d3aa.b3711c"
            ]
        ]
    },
    {
        "id": "5368d3aa.b3711c",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "save xpen",
        "rules": [
            {
                "t": "set",
                "p": "#:(nas)::xpen",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "xpen",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1420,
        "y": 880,
        "wires": [
            [
                "3c4bf186.9b081e"
            ]
        ]
    },
    {
        "id": "3c4bf186.9b081e",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "XP-Pen",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1650,
        "y": 880,
        "wires": [
            [
                "9612ed1.d1b731"
            ]
        ]
    },
    {
        "id": "759305ea.b33b9c",
        "type": "switch",
        "z": "4788f78d.cd37e8",
        "name": "X-Pen init",
        "property": "#:(nas)::xpen",
        "propertyType": "flow",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 500,
        "y": 540,
        "wires": [
            [],
            [
                "3789eb2d.df9c44"
            ]
        ]
    },
    {
        "id": "3789eb2d.df9c44",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "xpen",
                "pt": "flow",
                "to": "\"\"",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "65fefe1d.a2bed",
        "type": "functionx",
        "z": "4788f78d.cd37e8",
        "d": true,
        "name": "xpath-html",
        "func": "const xpath = require(\"xpath-html\");\nconst result = xpath.fromPageSource(msg.payload).findElement(\"//p[@class='name_text'][contains(text(), 'PenWin')][1]\");\n\nmsg.payload = {\n    matched: `tag name is ${result.getTagName()}`,\n    text: result.getText(),\n}\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 870,
        "y": 1120,
        "wires": [
            [
                "b11467d9.591098"
            ]
        ]
    },
    {
        "id": "386fa581.9a6c5a",
        "type": "inject",
        "z": "4788f78d.cd37e8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 260,
        "y": 1120,
        "wires": [
            [
                "65fefe1d.a2bed"
            ]
        ]
    },
    {
        "id": "b11467d9.591098",
        "type": "debug",
        "z": "4788f78d.cd37e8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1120,
        "y": 1120,
        "wires": []
    },
    {
        "id": "da0104a7.1b03c8",
        "type": "functionx",
        "z": "4788f78d.cd37e8",
        "d": true,
        "name": "xpath",
        "func": "const xpath = require('xpath');\nconst dom = require('xmldom').DOMParser;\nconst doc = new dom().parseFromString(msg.payload);\n\nconst result = xpath.select('//div[@class=\"info_right_main\"][2]/descendant::p[@class=\"name_text\"][1]', doc);\n\nmsg.payload = {\n    matched: result[0].toString(),\n    text: result[0].firstChild.data\n}\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 1200,
        "wires": [
            [
                "c70bc0a3.28a7"
            ]
        ]
    },
    {
        "id": "4c7d564f.8383b8",
        "type": "inject",
        "z": "4788f78d.cd37e8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "\"<book><title>Harry Potter</title></book>\"",
        "payloadType": "str",
        "x": 240,
        "y": 1200,
        "wires": [
            [
                "da0104a7.1b03c8"
            ]
        ]
    },
    {
        "id": "c70bc0a3.28a7",
        "type": "debug",
        "z": "4788f78d.cd37e8",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1110,
        "y": 1200,
        "wires": []
    },
    {
        "id": "92ff7162fb31fd77",
        "type": "switch",
        "z": "4788f78d.cd37e8",
        "name": "node",
        "property": "node",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "\"\"",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 600,
        "wires": [
            [
                "3d1b7b604a272ff8"
            ],
            [
                "4268a4a9.4a17bc"
            ]
        ]
    },
    {
        "id": "3d1b7b604a272ff8",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "save node",
        "rules": [
            {
                "t": "set",
                "p": "#:(nas)::node",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "node",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "971086a527a6f43b",
        "type": "switch",
        "z": "4788f78d.cd37e8",
        "name": "xpen",
        "property": "xpen",
        "propertyType": "flow",
        "rules": [
            {
                "t": "eq",
                "v": "\"\"",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1050,
        "y": 880,
        "wires": [
            [
                "00b6e9b259630338"
            ],
            [
                "adc8f767.c0b4c8"
            ]
        ]
    },
    {
        "id": "00b6e9b259630338",
        "type": "change",
        "z": "4788f78d.cd37e8",
        "name": "save xpen",
        "rules": [
            {
                "t": "set",
                "p": "#:(nas)::xpen",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "xpen",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "3b439e21.6f2d12",
        "type": "http request",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "url": "",
        "x": 610,
        "y": 480,
        "wires": [
            [
                "3946a9bc.225676",
                "152278f6.cc9e07"
            ]
        ]
    },
    {
        "id": "f6463ae1.0353d8",
        "type": "inject",
        "z": "d09ab75b.1e64b8",
        "name": "URL",
        "props": [
            {
                "p": "payload",
                "v": "https://kungurov.livejournal.com/",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "https://kungurov.livejournal.com/",
        "payloadType": "str",
        "x": 230,
        "y": 480,
        "wires": [
            [
                "12ad2fc0.3f2e5"
            ]
        ]
    },
    {
        "id": "12ad2fc0.3f2e5",
        "type": "change",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 480,
        "wires": [
            [
                "3b439e21.6f2d12"
            ]
        ]
    },
    {
        "id": "3946a9bc.225676",
        "type": "debug",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 810,
        "y": 480,
        "wires": []
    },
    {
        "id": "652ccbbd.dfa6d4",
        "type": "debug",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 835,
        "y": 580,
        "wires": []
    },
    {
        "id": "152278f6.cc9e07",
        "type": "html",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "property": "",
        "outproperty": "",
        "tag": ".entry",
        "ret": "attr",
        "as": "multi",
        "x": 541.5,
        "y": 580,
        "wires": [
            [
                "652ccbbd.dfa6d4"
            ]
        ]
    },
    {
        "id": "c01e6eaa.f9808",
        "type": "html",
        "z": "d09ab75b.1e64b8",
        "name": "Select all post",
        "property": "payload",
        "outproperty": "payload",
        "tag": ".entry",
        "ret": "attr",
        "as": "multi",
        "x": 600,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "208d8f37.34b51",
        "type": "http request",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "method": "GET",
        "ret": "bin",
        "paytoqs": false,
        "url": "http://192.168.1.97/cgi-bin/snapshot.cgi",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "basic",
        "x": 390,
        "y": 300,
        "wires": [
            [
                "e968776a.8cc358",
                "6ea21d6.96acee4"
            ]
        ]
    },
    {
        "id": "7cdec381.123aec",
        "type": "ui_template",
        "z": "d09ab75b.1e64b8",
        "group": "27b3edbe.608c22",
        "name": "Display image",
        "order": 1,
        "width": "6",
        "height": "6",
        "format": "<img width=\"16\" height=\"16\" alt=\"mjpeg test...\" src=\"data:image/jpg;base64,{{msg.payload}}\" />\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 772.3645515441895,
        "y": 300.6041603088379,
        "wires": [
            []
        ]
    },
    {
        "id": "e968776a.8cc358",
        "type": "base64",
        "z": "d09ab75b.1e64b8",
        "name": "Encode",
        "action": "",
        "property": "payload",
        "x": 572.3645515441895,
        "y": 300.6041603088379,
        "wires": [
            [
                "7cdec381.123aec"
            ]
        ]
    },
    {
        "id": "54ceb22.eedd64c",
        "type": "inject",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 172.36455154418945,
        "y": 300.6041603088379,
        "wires": [
            [
                "208d8f37.34b51"
            ]
        ]
    },
    {
        "id": "6ea21d6.96acee4",
        "type": "debug",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 752.3645515441895,
        "y": 360.6041603088379,
        "wires": []
    },
    {
        "id": "6f54b8c8.5d27e8",
        "type": "debug",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 950,
        "y": 740,
        "wires": []
    },
    {
        "id": "5359f628.01dbc8",
        "type": "change",
        "z": "d09ab75b.1e64b8",
        "name": "+1",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload + 1",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 740,
        "wires": [
            [
                "a387d342.d4bd4",
                "a0c03c46.ab10b"
            ]
        ]
    },
    {
        "id": "22d9b63e.86f3da",
        "type": "inject",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 150,
        "y": 740,
        "wires": [
            [
                "5359f628.01dbc8",
                "206246a4.a41a9a"
            ]
        ]
    },
    {
        "id": "206246a4.a41a9a",
        "type": "debug",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 390,
        "y": 880,
        "wires": []
    },
    {
        "id": "a387d342.d4bd4",
        "type": "change",
        "z": "d09ab75b.1e64b8",
        "name": "+1",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload + 1",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 740,
        "wires": [
            [
                "6f54b8c8.5d27e8"
            ]
        ]
    },
    {
        "id": "a0c03c46.ab10b",
        "type": "debug",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 690,
        "y": 880,
        "wires": []
    },
    {
        "id": "2eb80e5.ff0eef2",
        "type": "inject",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "post-kungurov-260369",
        "payloadType": "str",
        "x": 180,
        "y": 1220,
        "wires": [
            [
                "ad1e9b7e.dd5d48"
            ]
        ]
    },
    {
        "id": "e3979513.4eb468",
        "type": "http request",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "url": "",
        "x": 450,
        "y": 1360,
        "wires": [
            [
                "ab8d2029.5c7c7"
            ]
        ]
    },
    {
        "id": "a0375848.830c78",
        "type": "change",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 1220,
        "wires": [
            [
                "e3979513.4eb468"
            ]
        ]
    },
    {
        "id": "759f5364.bced9c",
        "type": "debug",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 830,
        "y": 1360,
        "wires": []
    },
    {
        "id": "ab8d2029.5c7c7",
        "type": "html",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "property": "payload",
        "outproperty": "payload",
        "tag": "head > title",
        "ret": "text",
        "as": "multi",
        "x": 630,
        "y": 1360,
        "wires": [
            [
                "759f5364.bced9c"
            ]
        ]
    },
    {
        "id": "ad1e9b7e.dd5d48",
        "type": "function",
        "z": "d09ab75b.1e64b8",
        "name": "create URL",
        "func": "msg.payload = parseInt(msg.payload.match(/\\d+/));\nmsg.payload = `https://kungurov.livejournal.com/${msg.payload}.html`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 370,
        "y": 1160,
        "wires": [
            [
                "a0375848.830c78"
            ]
        ]
    },
    {
        "id": "4cea582f.2021d8",
        "type": "file",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "filename": "/mnt/nas/test.txt",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 454,
        "y": 110,
        "wires": [
            []
        ]
    },
    {
        "id": "4e498201.878b4c",
        "type": "inject",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "test NAS",
        "payloadType": "str",
        "x": 194,
        "y": 110,
        "wires": [
            [
                "4cea582f.2021d8"
            ]
        ]
    },
    {
        "id": "37795c6c.7d94a4",
        "type": "file",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "filename": "/mnt/yandex.disk/testYansexDAV.txt",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 654,
        "y": 170,
        "wires": [
            []
        ]
    },
    {
        "id": "af8a5bad.c5e848",
        "type": "inject",
        "z": "d09ab75b.1e64b8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "test YandexDAV from NR",
        "payloadType": "str",
        "x": 294,
        "y": 170,
        "wires": [
            [
                "37795c6c.7d94a4"
            ]
        ]
    },
    {
        "id": "a0cf2469.7fbf38",
        "type": "http request",
        "z": "10ab9a74.e34a16",
        "name": "request work calendar",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "https://data.gov.ru/api/json/dataset/7708660670-proizvcalendar/version/20151123T183036/content?access_token=8248049d3b80aced78befffb1893a35d",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 200,
        "y": 240,
        "wires": [
            [
                "6e06d577.2ff39c"
            ]
        ]
    },
    {
        "id": "6e06d577.2ff39c",
        "type": "json",
        "z": "10ab9a74.e34a16",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 150,
        "y": 320,
        "wires": [
            [
                "b0adeefd.18434"
            ]
        ]
    },
    {
        "id": "b0adeefd.18434",
        "type": "function",
        "z": "10ab9a74.e34a16",
        "name": "get this and next year",
        "func": "const thisYear = new Date().getFullYear();\n\nconst nextAndThisYear = msg.payload.filter(x=>{\n    return x[\"Год/Месяц\"] === thisYear.toString() || x[\"Год/Месяц\"] === (thisYear + 1).toString();\n})\nconst newMsg = {payload: nextAndThisYear};\n\nreturn newMsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 340,
        "y": 320,
        "wires": [
            [
                "e254507a.1bb4c"
            ]
        ]
    },
    {
        "id": "e254507a.1bb4c",
        "type": "function",
        "z": "10ab9a74.e34a16",
        "name": "transform",
        "func": "const documents = [];\n\nmsg.payload.forEach(x=>{\n    const yearDocument = [];\n    \n    yearDocument[0] = x[\"Январь\"].split(',');\n    yearDocument[1] = x[\"Февраль\"].split(',');\n    yearDocument[2] = x[\"Март\"].split(',');\n    yearDocument[3] = x[\"Апрель\"].split(',');\n    yearDocument[4] = x[\"Май\"].split(',');\n    yearDocument[5] = x[\"Июнь\"].split(',');\n    yearDocument[6] = x[\"Июль\"].split(',');\n    yearDocument[7] = x[\"Август\"].split(',');\n    yearDocument[8] = x[\"Сентябрь\"].split(',');\n    yearDocument[9] = x[\"Октябрь\"].split(',');\n    yearDocument[10] = x[\"Ноябрь\"].split(',');\n    yearDocument[11] = x[\"Декабрь\"].split(',');\n    \n    documents.push(yearDocument);\n});\n\nmsg.payload = documents;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 540,
        "y": 320,
        "wires": [
            [
                "93d95182.adb33"
            ]
        ]
    },
    {
        "id": "93d95182.adb33",
        "type": "split",
        "z": "10ab9a74.e34a16",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 710,
        "y": 320,
        "wires": [
            [
                "bb69d796.0e7338"
            ]
        ]
    },
    {
        "id": "bb69d796.0e7338",
        "type": "function",
        "z": "10ab9a74.e34a16",
        "name": "transform for db",
        "func": "const newMsg = {};\nconst thisYear = new Date().getFullYear();\n\nnewMsg.payload = {\n    year: msg.parts.index === 0 ? thisYear : thisYear + 1,\n    monthes: msg.payload\n}\n\nreturn newMsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 880,
        "y": 320,
        "wires": [
            [
                "a06a9483.f03ef8",
                "2599981b.2c7b58"
            ]
        ]
    },
    {
        "id": "2599981b.2c7b58",
        "type": "function",
        "z": "10ab9a74.e34a16",
        "name": "set ready to save",
        "func": "const $set = {$set: msg.payload};\nconst newMsg ={payload: $set, query: {year:msg.payload.year}};\nreturn newMsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 930,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "c43b28b5.d21568",
        "type": "inject",
        "z": "10ab9a74.e34a16",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 160,
        "wires": [
            [
                "a0cf2469.7fbf38"
            ]
        ]
    },
    {
        "id": "a06a9483.f03ef8",
        "type": "debug",
        "z": "10ab9a74.e34a16",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 950,
        "y": 400,
        "wires": []
    },
    {
        "id": "1a917fb3.0992c",
        "type": "function",
        "z": "10ab9a74.e34a16",
        "name": "",
        "func": "var telegraff = global.get('telegraf');\n\nvar bot = new telegraff(flow.get(\"BOT_TOKEN\"));\n\n\nbot.use(async (ctx, next) => {\n  msg.payload = ctx;\n  node.send(msg);\n  await next(ctx);\n})\n\n\nbot.start(({reply}) => {\n    reply(`Hello! from NR!!!`);\n});\n\nbot.help(({reply}) => {\n    reply(`Send any message and i will copy it`);\n});\n\n\nbot.command('pay', ({replyWithInvoice}) => {\n    replyWithInvoice(flow.get(\"Sber\"));\n})\n\n\nbot.on('pre_checkout_query', ({ answerPreCheckoutQuery }) => answerPreCheckoutQuery(true));\n\nbot.on('successful_payment', (ctx) => {\n    ctx.reply(\"Thanks!\");\n    msg.payload = `пришли бабки - ${ctx.update.message.successful_payment.total_amount/100} руб. номер транзакции: \n    ${ctx.update.message.successful_payment.provider_payment_charge_id}`;\n    node.send(msg);\n});\n\n\nbot.on(\"message\", (ctx) => {\n    ctx.telegram.sendCopy(ctx.chat.id, ctx.message);\n});\n\n\nbot.launch()\n    .then((res) => {\n        msg.payload = \"Run\";\n        node.send(msg);\n    })\n    .catch((err) => {\n        msg.payload = err;\n        node.error(msg);\n    });\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is deployed.\nflow.set(\"BOT_TOKEN\", \"967482997:AAEh5VAoGvN7KyLZ6PROgAyvRUqMOn78Pyo\");\n\n///////////////////////////////////////////////////////////\n\nvar sber = {\n  provider_token: \"401643678:TEST:a45829bc-6dcc-462e-8ecd-efc34de15283\",\n  start_parameter: 'ufo-machine-sku',\n  title: 'НЛО',\n  description: 'Хотите удивить своих друзей? Отправится на ближайшую планету? Утереть нос Илону Маску? Закажите наш НЛО сегодня!',\n  currency: \"RUB\",\n  photo_url: 'https://ichef.bbci.co.uk/news/410/cpsprodpb/16CE8/production/_109061439_hi018470968.jpg',\n  prices: [\n    { label: 'Working Time Machine', amount: 42000 }\n  ],\n  payload: {\n    coupon: 'BLACK FRIDAY'\n  }\n}\n\nflow.set(\"Sber\", sber);\n\n////////////////////////////////////////////////////////////\n\nvar yandex = {\n    title: \"Test Yandex\",\n    description: \"проверка онлайн платежей\",\n    payload: \"sendInvoice\",\n    provider_token: \"381764678:TEST:17784\",\n    currency: \"RUB\",\n    start_parameter: \"test\",\n    prices: [{\n\t    label: \"руб\",\n\t    amount: 20000,\n}]\n}\n\nflow.set(\"Yandex\", yandex);",
        "finalize": "",
        "x": 520,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "e5312c687689f26c",
        "type": "function",
        "z": "10ab9a74.e34a16",
        "name": "",
        "func": "let obj = msg.payload\nconst entries = Object.entries(obj);\nnode.send({topic: \"entries\", payload: entries })\n\nfunction flatten(arr) {\n  return [].concat(...arr)\n}\n\n\nfunction deepFlatten(arr) {\n  return flatten(           // return shalowly flattened array\n    arr.map(x=>             // with each x in array\n      Array.isArray(x)      // is x an array?\n        ? deepFlatten(x)    // if yes, return deeply flattened x\n        : x                 // if no, return just x\n    )\n  )\n}\n\nlet ries = deepFlatten(entries)\n\n\nnode.send({topic: \"ries\",  payload: ries })\n\nries.forEach(([key, value]) => {\n  node.send({topic: \"forEach\", payload:`${key}: ${value}`})\n})",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1000,
        "y": 640,
        "wires": [
            [
                "98a7104fbffbcc07"
            ]
        ]
    },
    {
        "id": "49a6dc6fe7936ca3",
        "type": "change",
        "z": "10ab9a74.e34a16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "home",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 640,
        "wires": [
            [
                "e5312c687689f26c"
            ]
        ]
    },
    {
        "id": "8d73a97b4775536b",
        "type": "inject",
        "z": "10ab9a74.e34a16",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 530,
        "y": 640,
        "wires": [
            [
                "49a6dc6fe7936ca3"
            ]
        ]
    },
    {
        "id": "98a7104fbffbcc07",
        "type": "debug",
        "z": "10ab9a74.e34a16",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1180,
        "y": 680,
        "wires": []
    },
    {
        "id": "84aa124b.bd198",
        "type": "function",
        "z": "10ab9a74.e34a16",
        "g": "8b61f39488add133",
        "name": "function init",
        "func": "",
        "outputs": 1,
        "noerr": 0,
        "initialize": "const sqrt = Math.sqrt;\nconst q2 = (num) => num**=2;\n\n//function diag\nconst diag = (a, b) => sqrt(q2(a) + q2(b));\nflow.set(\"diag\", diag);\n\n//function sum\nconst sum = (a, b) => a + b;\nflow.set(\"sum\", sum);",
        "finalize": "",
        "x": 570,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "ea8c03f9.80f71",
        "type": "inject",
        "z": "10ab9a74.e34a16",
        "g": "8b61f39488add133",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 460,
        "wires": [
            [
                "84e04772.af7048"
            ]
        ]
    },
    {
        "id": "c668f4bd.2ff748",
        "type": "function",
        "z": "10ab9a74.e34a16",
        "g": "8b61f39488add133",
        "name": "sum(5,3)",
        "func": "let sum = flow.get(\"sum\");\nmsg.payload = sum(msg.one,msg.two);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 380,
        "y": 520,
        "wires": [
            [
                "5b11fd66.61c384"
            ]
        ]
    },
    {
        "id": "5b11fd66.61c384",
        "type": "debug",
        "z": "10ab9a74.e34a16",
        "g": "8b61f39488add133",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 570,
        "y": 520,
        "wires": []
    },
    {
        "id": "84e04772.af7048",
        "type": "function",
        "z": "10ab9a74.e34a16",
        "g": "8b61f39488add133",
        "name": "diag(12,5)",
        "func": "msg.payload = flow.get(\"diag\")(12,5);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 380,
        "y": 460,
        "wires": [
            [
                "5b11fd66.61c384"
            ]
        ]
    },
    {
        "id": "630e48d9.c5ace8",
        "type": "inject",
        "z": "10ab9a74.e34a16",
        "g": "8b61f39488add133",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "one",
                "v": "5",
                "vt": "num"
            },
            {
                "p": "two",
                "v": "3",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 520,
        "wires": [
            [
                "c668f4bd.2ff748"
            ]
        ]
    },
    {
        "id": "ce1de646.75e118",
        "type": "trigger",
        "z": "10ab9a74.e34a16",
        "name": "",
        "op1": "start",
        "op2": "stop",
        "op1type": "str",
        "op2type": "str",
        "duration": "40",
        "extend": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "outputs": 1,
        "x": 870,
        "y": 860,
        "wires": [
            [
                "bf803970.becfc8",
                "a9a68a8c.e31a38"
            ]
        ]
    },
    {
        "id": "50e205c7.c5e3ec",
        "type": "inject",
        "z": "10ab9a74.e34a16",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "start",
        "payloadType": "str",
        "x": 708.9999198913574,
        "y": 861,
        "wires": [
            [
                "ce1de646.75e118"
            ]
        ]
    },
    {
        "id": "bf803970.becfc8",
        "type": "debug",
        "z": "10ab9a74.e34a16",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 1128.9999771118164,
        "y": 825,
        "wires": []
    },
    {
        "id": "a9a68a8c.e31a38",
        "type": "function",
        "z": "10ab9a74.e34a16",
        "name": "Branch to display time remaining",
        "func": "var counting = function () {\n  let counter = flow.get('counter');\n  counter += 1;\n  node.status({text:counter + \" seconds\"});\n  flow.set('counter',counter);\n   return counter;\n}\n\nif (msg.payload === \"start\") {\n    flow.set('counter',0);\n    node.status({text: \"Started..\"}); \n    let timer1 = setInterval(counting, 1000);\n    flow.set('timer1',timer1);\n} else if (msg.payload === \"stop\") {\n    node.status({}); // clear the status decoration\n    clearInterval(flow.get('timer1')); \n    \n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1140.9999771118164,
        "y": 916,
        "wires": [
            [
                "e66bad9a.b704a"
            ]
        ]
    },
    {
        "id": "e66bad9a.b704a",
        "type": "debug",
        "z": "10ab9a74.e34a16",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 1353.8999290466309,
        "y": 915,
        "wires": []
    },
    {
        "id": "bed84225.65d3e",
        "type": "inject",
        "z": "20e1011b.60ebfe",
        "g": "464ee1dd.9aefa",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 190,
        "y": 120,
        "wires": [
            [
                "4c9bc374.cceeec"
            ]
        ]
    },
    {
        "id": "484f3f55.f2ae4",
        "type": "http request",
        "z": "20e1011b.60ebfe",
        "g": "464ee1dd.9aefa",
        "name": "работа",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://samara.rabota.ru/my-resume/publish/28401048",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 590,
        "y": 120,
        "wires": [
            [
                "df4d2bb7.545ea8",
                "ea8d5f89.dca36"
            ]
        ]
    },
    {
        "id": "4c9bc374.cceeec",
        "type": "function",
        "z": "20e1011b.60ebfe",
        "g": "464ee1dd.9aefa",
        "name": "set headers",
        "func": "var cookie = \"csrf=f4e383b387131b09e4d5939ccb52ea601b345b9e; sid=LK2nlweBQ3BGK3XGwvm517mjxfikwmuo; came_from=; jump_id=159505344976420; sendToEmailWasShown=1; frontend:rabota-id:v1=khfi83l0wmqlq8i8pj9yzycgdfc63ad3; _ym_visorc_2020546=w; AB_1=1; tmr_lvidTS=1595053444049; mded=c; rabota_ru_hash=ZGFuZWV2QGdtYWlsLmNvbTozNzM5ODI1OA%3D%3D_3e7a80bc55bb3373211a038a8e724deccbfcfd4a; _gcl_au=1.1.599612372.1595053445; user_id=159505344976420; tmr_lvid=dba0167daaf81350fcac80b8a96ac432; _ym_isad=2; _ym_d=1595053434; _ym_visorc_50951945=w; _gid=GA1.2.17554443.1595053449; _ga=GA1.2.284609088.1595053449; tmr_reqNum=23; AB_1_pred=1; _fbp=fb.1.1595053447985.1134297663; prsid=1; _ym_uid=1595053434992555837; top100_id=t1.-1.926624547.1595053458297; _ym_visorc_50981513=w; user_tags=%5B%7B%22id%22%3A23820749%2C%22add_date%22%3A%222020-07-17%22%2C%22name%22%3A%22search_hardradius_control1%22%7D%2C%7B%22id%22%3A23802952%2C%22add_date%22%3A%222020-07-17%22%2C%22name%22%3A%22hr_vacancy_address_control%22%7D%5D; v3_zabota_reg=daneev%40gmail.com%3B1%3B1597645528; pro_rabota=ZGFuZWV2QGdtYWlsLmNvbTozNzM5ODI1OA%3D%3D_3e7a80bc55bb3373211a038a8e724deccbfcfd4a; auth=1; yaMetricaEcommerceCartId_2020546=shop_25423725; yaMetricaEcommerceCartId_11083246=shop_92448094; device_view=full; last_visit=1595039559882::1595053959882; tmr_detect=0%7C1595053969479\"\n\n\nmsg.headers = {\n    Cookie : cookie,\n    \"User-Agent\" : \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36 Edge/18.18363\",\n    Accept : \"*/*\",\n    \"Accept-Language\": \"ru,en-US;q=0.7,en;q=0.3\",\n    \"X-Requested-With\": \"XMLHttpRequest\",\n    \"Accept-Encoding\": \"gzip, deflate, br\",\n    Host: \"samara.rabota.ru\"\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 400,
        "y": 120,
        "wires": [
            [
                "484f3f55.f2ae4"
            ]
        ]
    },
    {
        "id": "df4d2bb7.545ea8",
        "type": "debug",
        "z": "20e1011b.60ebfe",
        "g": "464ee1dd.9aefa",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "false",
        "x": 800,
        "y": 120,
        "wires": []
    },
    {
        "id": "b22d332.ddc17d",
        "type": "http request",
        "z": "20e1011b.60ebfe",
        "g": "464ee1dd.9aefa",
        "name": "работа",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://samara.rabota.ru/my-resume/promo/28401048",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 590,
        "y": 240,
        "wires": [
            [
                "df4d2bb7.545ea8"
            ]
        ]
    },
    {
        "id": "254c03e3.21d69c",
        "type": "function",
        "z": "20e1011b.60ebfe",
        "g": "464ee1dd.9aefa",
        "name": "set headers",
        "func": "var cookie = \"csrf=f4e383b387131b09e4d5939ccb52ea601b345b9e; sid=LK2nlweBQ3BGK3XGwvm517mjxfikwmuo; came_from=; jump_id=159505344976420; sendToEmailWasShown=1; frontend:rabota-id:v1=khfi83l0wmqlq8i8pj9yzycgdfc63ad3; _ym_visorc_2020546=w; AB_1=1; tmr_lvidTS=1595053444049; mded=c; rabota_ru_hash=ZGFuZWV2QGdtYWlsLmNvbTozNzM5ODI1OA%3D%3D_3e7a80bc55bb3373211a038a8e724deccbfcfd4a; _gcl_au=1.1.599612372.1595053445; user_id=159505344976420; tmr_lvid=dba0167daaf81350fcac80b8a96ac432; _ym_isad=2; _ym_d=1595053434; _ym_visorc_50951945=w; _gid=GA1.2.17554443.1595053449; _ga=GA1.2.284609088.1595053449; tmr_reqNum=23; AB_1_pred=1; _fbp=fb.1.1595053447985.1134297663; prsid=1; _ym_uid=1595053434992555837; top100_id=t1.-1.926624547.1595053458297; _ym_visorc_50981513=w; user_tags=%5B%7B%22id%22%3A23820749%2C%22add_date%22%3A%222020-07-17%22%2C%22name%22%3A%22search_hardradius_control1%22%7D%2C%7B%22id%22%3A23802952%2C%22add_date%22%3A%222020-07-17%22%2C%22name%22%3A%22hr_vacancy_address_control%22%7D%5D; v3_zabota_reg=daneev%40gmail.com%3B1%3B1597645528; pro_rabota=ZGFuZWV2QGdtYWlsLmNvbTozNzM5ODI1OA%3D%3D_3e7a80bc55bb3373211a038a8e724deccbfcfd4a; auth=1; _gat_gtag_UA_3926701_1=1; yaMetricaEcommerceCartId_2020546=shop_25423725; yaMetricaEcommerceCartId_11083246=shop_92448094; device_view=full; last_visit=1595039559882::1595053959882; tmr_detect=0%7C1595053969479\"\n\n\nmsg.headers = {\n    Cookie : cookie,\n    \"User-Agent\" : \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36 Edge/18.18363\",\n    Accept : \"*/*\",\n    \"Accept-Language\": \"ru,en-US;q=0.7,en;q=0.3\",\n    \"X-Requested-With\": \"XMLHttpRequest\",\n    \"Accept-Encoding\": \"gzip, deflate, br\",\n    Host: \"samara.rabota.ru\"\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 400,
        "y": 240,
        "wires": [
            [
                "b22d332.ddc17d"
            ]
        ]
    },
    {
        "id": "ea8d5f89.dca36",
        "type": "delay",
        "z": "20e1011b.60ebfe",
        "g": "464ee1dd.9aefa",
        "name": "",
        "pauseType": "delay",
        "timeout": "350",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 500,
        "y": 180,
        "wires": [
            [
                "254c03e3.21d69c"
            ]
        ]
    },
    {
        "id": "67f2f2ab.f5f27c",
        "type": "eztimer",
        "z": "20e1011b.60ebfe",
        "d": true,
        "g": "464ee1dd.9aefa",
        "name": "",
        "debug": false,
        "autoname": "8:00",
        "tag": "eztimer",
        "suspended": false,
        "sendEventsOnSuspend": false,
        "latLongSource": "manual",
        "lat": "53.24472",
        "lon": "50.19075",
        "timerType": "2",
        "startupMessage": false,
        "ontype": "2",
        "ontimesun": "dawn",
        "ontimetod": "8:00",
        "onpropertytype": "msg",
        "onproperty": "payload",
        "onvaluetype": "num",
        "onvalue": 1,
        "onoffset": "180",
        "onrandomoffset": true,
        "onsuppressrepeats": false,
        "offtype": "1",
        "offtimesun": "dusk",
        "offtimetod": "dusk",
        "offduration": "00:01:00",
        "offpropertytype": "msg",
        "offproperty": "payload",
        "offvaluetype": "num",
        "offvalue": 0,
        "offoffset": 0,
        "offrandomoffset": 0,
        "offsuppressrepeats": false,
        "resend": false,
        "resendInterval": "1m",
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "sun": true,
        "x": 150,
        "y": 180,
        "wires": [
            [
                "4c9bc374.cceeec"
            ]
        ]
    },
    {
        "id": "3bddd07b.97de2",
        "type": "eztimer",
        "z": "20e1011b.60ebfe",
        "d": true,
        "g": "464ee1dd.9aefa",
        "name": "",
        "debug": false,
        "autoname": "12:00",
        "tag": "eztimer",
        "suspended": false,
        "sendEventsOnSuspend": false,
        "latLongSource": "manual",
        "lat": "53.24472",
        "lon": "50.19075",
        "timerType": "2",
        "startupMessage": false,
        "ontype": "2",
        "ontimesun": "dawn",
        "ontimetod": "12:00",
        "onpropertytype": "msg",
        "onproperty": "payload",
        "onvaluetype": "num",
        "onvalue": 1,
        "onoffset": "360",
        "onrandomoffset": true,
        "onsuppressrepeats": false,
        "offtype": "1",
        "offtimesun": "dusk",
        "offtimetod": "dusk",
        "offduration": "00:01:00",
        "offpropertytype": "msg",
        "offproperty": "payload",
        "offvaluetype": "num",
        "offvalue": 0,
        "offoffset": 0,
        "offrandomoffset": 0,
        "offsuppressrepeats": false,
        "resend": false,
        "resendInterval": "1m",
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "sun": true,
        "x": 150,
        "y": 240,
        "wires": [
            [
                "4c9bc374.cceeec"
            ]
        ]
    },
    {
        "id": "2c8f36dd.8a468a",
        "type": "inject",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "Параметры запроса",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "lat",
                "v": "53.244946",
                "vt": "num"
            },
            {
                "p": "lon",
                "v": "50.189400",
                "vt": "num"
            },
            {
                "p": "unit_system",
                "v": "si",
                "vt": "str"
            },
            {
                "p": "fields",
                "v": "temp,humidity,precipitation,baro_pressure:mmHg,pm25,pm10,co",
                "vt": "str"
            },
            {
                "p": "apiKey",
                "v": "QUiHHOAweTs9fRaksMTpA45EZd9wh2r9",
                "vt": "str"
            },
            {
                "p": "count",
                "v": "120",
                "vt": "num"
            }
        ],
        "repeat": "720",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 360,
        "wires": [
            [
                "c7c2465.e4d6db8"
            ]
        ]
    },
    {
        "id": "c7c2465.e4d6db8",
        "type": "function",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "Запрос",
        "func": "msg.headers = {\n    'content-type': 'application/json'\n}\n\nmsg.url = 'https://api.tomorrow.io/v4/timelines'; //'https://api.climacell.co/v3/weather/realtime?lat=LAT&lon=LONG&unit_system=si&fields=FIELD_NAME'\n                                                         // 'https://api.tomorrow.io/v4/timelines?location=LAT%2CLONG&fields=FIELD_NAME&timesteps=current'\n\nmsg.payload = {\n    location: msg.lat,\n    lon: msg.lon,\n    unit_system: msg.unit_system,\n    fields: msg.fields,\n    apikey: msg.apiKey\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 360,
        "wires": [
            [
                "ec487599.8aa638"
            ]
        ]
    },
    {
        "id": "ec487599.8aa638",
        "type": "http request",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 550,
        "y": 360,
        "wires": [
            [
                "a8f70691.dd5788"
            ]
        ]
    },
    {
        "id": "a8f70691.dd5788",
        "type": "function",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "получение данных",
        "func": "//функция добавляющая лидирующий ноль. например 7 -> 07\nconst format = item => (item + 100).toString().slice(1, 3);\n\n//формируем текущие дату и время\nconst today = new Date();\nconst date = `${format(today.getDate())}-${format(today.getMonth()+1)}-${today.getFullYear()}`;\nconst time = `${format(today.getHours())}:${format(today.getMinutes())}`\n\n//формируем объект с данными\nmsg.payload.date = date;\nmsg.payload.time = time;\n\n\n//сохраняем в массив значений\nlet data = flow.get(\"data\") || [];\ndata.splice(0, data.length-msg.count);\ndata.push(msg.payload);\nflow.set(\"data\", data);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 360,
        "wires": [
            [
                "c82dbc05.d3f0b",
                "a038ed57.cf793"
            ]
        ]
    },
    {
        "id": "c82dbc05.d3f0b",
        "type": "debug",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 360,
        "wires": []
    },
    {
        "id": "f6b82dfb.2e92e",
        "type": "inject",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": false,
        "onceDelay": "20",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 500,
        "wires": [
            [
                "dd8a4c18.b7a12",
                "9c4ab118.f28c8",
                "81fa9b54.02d268"
            ]
        ]
    },
    {
        "id": "95ce28b7.b6f3e8",
        "type": "change",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "backup data to NAS",
        "rules": [
            {
                "t": "set",
                "p": "#:(nas)::data",
                "pt": "flow",
                "to": "data",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "c0f59d10.e72af",
        "type": "http in",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "url": "/weater",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 620,
        "wires": [
            [
                "b4d0b2ff.51bc5"
            ]
        ]
    },
    {
        "id": "e4bee86f.df4438",
        "type": "http response",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 670,
        "y": 680,
        "wires": []
    },
    {
        "id": "b4d0b2ff.51bc5",
        "type": "change",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "load data",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "data",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 680,
        "wires": [
            [
                "82654ea7.1874"
            ]
        ]
    },
    {
        "id": "82654ea7.1874",
        "type": "json",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 510,
        "y": 680,
        "wires": [
            [
                "e4bee86f.df4438"
            ]
        ]
    },
    {
        "id": "e2dc7ce7.e2956",
        "type": "change",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "restore data from NAS",
        "rules": [
            {
                "t": "set",
                "p": "data",
                "pt": "flow",
                "to": "#:(nas)::data",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "30de5852.762c28",
        "type": "switch",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "property": "#:(nas)::data.length",
        "propertyType": "flow",
        "rules": [
            {
                "t": "lte",
                "v": "data.length",
                "vt": "flow"
            },
            {
                "t": "gt",
                "v": "data.length",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 570,
        "y": 500,
        "wires": [
            [
                "95ce28b7.b6f3e8"
            ],
            [
                "e2dc7ce7.e2956"
            ]
        ]
    },
    {
        "id": "75a9607c.c14d7",
        "type": "change",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "#:(nas)::data",
                "pt": "flow",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "9c4ab118.f28c8",
        "type": "switch",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "property": "#:(nas)::data",
        "propertyType": "flow",
        "rules": [
            {
                "t": "istype",
                "v": "undefined",
                "vt": "undefined"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 430,
        "y": 580,
        "wires": [
            [
                "75a9607c.c14d7"
            ]
        ]
    },
    {
        "id": "aabc070.1f59af8",
        "type": "change",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "data",
                "pt": "flow",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "81fa9b54.02d268",
        "type": "switch",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "property": "data",
        "propertyType": "flow",
        "rules": [
            {
                "t": "istype",
                "v": "undefined",
                "vt": "undefined"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 430,
        "y": 620,
        "wires": [
            [
                "aabc070.1f59af8"
            ]
        ]
    },
    {
        "id": "dd8a4c18.b7a12",
        "type": "delay",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 400,
        "y": 500,
        "wires": [
            [
                "30de5852.762c28"
            ]
        ]
    },
    {
        "id": "6e5f09c9.07a838",
        "type": "function",
        "z": "20e1011b.60ebfe",
        "name": "callback",
        "func": "flow.get(\"data\", \"nas\", (err, data) => {\n    if (err) {\n        node.error(err, msg);\n    } else {\n        msg.payload = data.length;\n        node.send(msg)\n    }\n})",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 400,
        "y": 1100,
        "wires": [
            [
                "22d74210.41d0fe"
            ]
        ]
    },
    {
        "id": "102c3e02.90e9e2",
        "type": "inject",
        "z": "20e1011b.60ebfe",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 210,
        "y": 1100,
        "wires": [
            [
                "6e5f09c9.07a838"
            ]
        ]
    },
    {
        "id": "22d74210.41d0fe",
        "type": "debug",
        "z": "20e1011b.60ebfe",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 1100,
        "wires": []
    },
    {
        "id": "b5b27f9d.394ad",
        "type": "catch",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "scope": [
            "ec487599.8aa638"
        ],
        "uncaught": false,
        "x": 730,
        "y": 740,
        "wires": [
            [
                "c19ffddb.02895"
            ]
        ]
    },
    {
        "id": "c19ffddb.02895",
        "type": "debug",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 910,
        "y": 740,
        "wires": []
    },
    {
        "id": "e04fea85.ca3098",
        "type": "inject",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 740,
        "wires": [
            [
                "53384efc.4b85c"
            ]
        ]
    },
    {
        "id": "53384efc.4b85c",
        "type": "function",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "correct data",
        "func": "let data = flow.get(\"data\");\n//data.splice(10, 1, \"Error\");\nfor (let i = 0; i <= data.length; i++) {\n    try {\n        if (typeof(data[i]) === \"string\" || data[i].message || !(data[i].temp.value)){\n          node.send({payload: { \"i\":i, \"data\": data[i]}});\n          let temp = data[i-1];\n          if (typeof(temp) === \"object\"){\n              node.send({payload: {\"newdata\": temp}});\n              data.splice(i, 1, temp);\n          }\n        }\n    }\n    catch (err) {\n        node.error(err, msg);\n    }\n}\nflow.set(\"data\", data);\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 350,
        "y": 740,
        "wires": [
            [
                "41b85dde.b67db4",
                "e4bee86f.df4438"
            ]
        ]
    },
    {
        "id": "41b85dde.b67db4",
        "type": "debug",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 550,
        "y": 740,
        "wires": []
    },
    {
        "id": "4bdacb54.81f4d4",
        "type": "http in",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "url": "/weater/error",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 680,
        "wires": [
            [
                "53384efc.4b85c"
            ]
        ]
    },
    {
        "id": "268760fd.51a83",
        "type": "function",
        "z": "20e1011b.60ebfe",
        "name": "Error",
        "func": "let data = flow.get(\"data\");\ndata.splice(30, 1, \"Error\");\nflow.set(\"data\", data);\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 320,
        "y": 1200,
        "wires": [
            [
                "2c0c07b6.c3b738"
            ]
        ]
    },
    {
        "id": "2c0c07b6.c3b738",
        "type": "debug",
        "z": "20e1011b.60ebfe",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 560,
        "y": 1200,
        "wires": []
    },
    {
        "id": "e5bcb35a.04dc2",
        "type": "inject",
        "z": "20e1011b.60ebfe",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 1200,
        "wires": [
            [
                "268760fd.51a83"
            ]
        ]
    },
    {
        "id": "a038ed57.cf793",
        "type": "function",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "correct data",
        "func": "try {\n    if (typeof(msg.payload) === \"string\" || msg.payload.message || !(msg.payload.temp.value)){\n      node.send({payload: { \"Error\": msg.payload }});\n      flow.get(\"data\").pop();\n    }\n}\ncatch (err) {\n    node.error(err, msg);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 690,
        "y": 420,
        "wires": [
            [
                "5e4b62de.2c69fc"
            ]
        ]
    },
    {
        "id": "5e4b62de.2c69fc",
        "type": "debug",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 910,
        "y": 420,
        "wires": []
    },
    {
        "id": "f453b0f6.618da",
        "type": "inject",
        "z": "20e1011b.60ebfe",
        "g": "2ca5b2ff.5010be",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "test Error",
        "payloadType": "str",
        "x": 480,
        "y": 420,
        "wires": [
            [
                "a038ed57.cf793"
            ]
        ]
    },
    {
        "id": "81280488.9ede98",
        "type": "function",
        "z": "20e1011b.60ebfe",
        "name": "correct data",
        "func": "try {\n    if (typeof(msg.payload) === \"string\"){\n      node.send({payload: { \"Error\": msg.payload }});\n      let data = flow.get(\"data\")[flow.get(\"data\").length-2];\n      if (typeof(data) === \"object\"){\n          node.send({payload: {\"newdata\": data}});\n          flow.get(\"data\").pop();\n          flow.get(\"data\").push(data);\n      }\n    }\n}\ncatch (err) {\n    node.error(err, msg);\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 130,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "47285c87.ad2d74",
        "type": "debug",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 830,
        "y": 860,
        "wires": []
    },
    {
        "id": "40553aa6.a46924",
        "type": "debug",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1330,
        "y": 420,
        "wires": []
    },
    {
        "id": "d778f34b.18d02",
        "type": "http request",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 650,
        "y": 140,
        "wires": [
            [
                "ddfcfe71.c55ae",
                "b26c0b72.1d9a68"
            ]
        ]
    },
    {
        "id": "ddfcfe71.c55ae",
        "type": "debug",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 140,
        "wires": []
    },
    {
        "id": "b26c0b72.1d9a68",
        "type": "function",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "Bitrix add new to array",
        "func": "flow.set(\"Bitrix24-tasks\", flow.get(\"Bitrix24-tasks\") || [])\nlet tasks = msg.payload.result.tasks.filter(item => item.status !=5);\nlet data = tasks.map(item => { \n                    return {\n                        id: item.id,\n                        status: \"b\",\n                        Calendar: flow.get(\"CalendarId\"), \n                        tittle: item.title,\n                        start: item.startDatePlan || item.createdDate,\n                        end: item.endDatePlan || item.deadline,\n                        description: item.description,\n                        location: ''\n                    }\n                });\n                \n//\nlet arhive = flow.get(\"Bitrix24-tasks\").map(item => item.id);\nmsg.payload = data.filter(item => !(arhive.includes(item.id)));\nif (msg.payload.length === 0) return [null, msg];\nflow.set(\"Bitrix24-tasks\", [].concat(flow.get(\"Bitrix24-tasks\"), msg.payload).sort((a, b) => a.id - b.id ));\nreturn [msg, null];\n\n\n// let oldItem = flow.get(\"Bitrix24-tasks\").filter(item => !(numId.includes(item.id)))    \n// msg.payload = flow.get(\"Bitrix24-tasks\").filter(item => numId.includes(item.id)).map(item => ({...item, status: \"g\"}));\n\n// flow.set(\"Bitrix24-tasks\", [...msg.payload, ...oldItem].sort( (a, b) => a.id - b.id ));",
        "outputs": 2,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is deployed.\nflow.set(\"CalendarId\", \"daneev@gmail.com\");\n",
        "finalize": "",
        "x": 540,
        "y": 200,
        "wires": [
            [
                "e4197819.9da528"
            ],
            []
        ]
    },
    {
        "id": "5d2a1266.1876ec",
        "type": "debug",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1110,
        "y": 360,
        "wires": []
    },
    {
        "id": "5d711765.118268",
        "type": "split",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 530,
        "y": 360,
        "wires": [
            [
                "31eb4064.2e9f7"
            ]
        ]
    },
    {
        "id": "31eb4064.2e9f7",
        "type": "function",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "",
        "func": "msg = msg.payload\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 720,
        "y": 360,
        "wires": [
            [
                "9c6bd7c5.702d28"
            ]
        ]
    },
    {
        "id": "9c6bd7c5.702d28",
        "type": "delay",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 920,
        "y": 360,
        "wires": [
            [
                "5d2a1266.1876ec",
                "1f592ba4.9d4a34"
            ]
        ]
    },
    {
        "id": "14236d8f.884bc2",
        "type": "inject",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1160,
        "y": 920,
        "wires": [
            [
                "85b9a3d3.faad6"
            ]
        ]
    },
    {
        "id": "b592327c.0005f",
        "type": "debug",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1330,
        "y": 1060,
        "wires": []
    },
    {
        "id": "d91632f1.7565b",
        "type": "function",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "Delete task in Bitrix",
        "func": "msg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\n\nlet numTask = msg.payload;\n\nmsg.payload = {\n      taskId: numTask \n    }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 530,
        "y": 1060,
        "wires": [
            [
                "180b7eea.0684a1"
            ]
        ]
    },
    {
        "id": "180b7eea.0684a1",
        "type": "json",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 730,
        "y": 1060,
        "wires": [
            [
                "6bcbc26e.a0c47c"
            ]
        ]
    },
    {
        "id": "8c7ed29b.3b7d4",
        "type": "http request",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1130,
        "y": 1060,
        "wires": [
            [
                "b592327c.0005f"
            ]
        ]
    },
    {
        "id": "be412de5.7bd1e",
        "type": "inject",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 450,
        "y": 140,
        "wires": [
            [
                "cb57c2a.1d1204"
            ]
        ]
    },
    {
        "id": "509c1c5d.af2074",
        "type": "debug",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1230,
        "y": 240,
        "wires": []
    },
    {
        "id": "c1b2a25f.1e169",
        "type": "function",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "select task",
        "func": "const serial = ({Title, StartDate, EndDate}) => Title + StartDate + EndDate;\nmsg.payload.shift();\nflow.set(\"google\", msg.payload);\nlet google = flow.get(\"google\").map(item => serial(item));\n\n// msg.payload = `google ${google}`;\n// node.send(msg);\n\nconst zero = (arg) => arg[0] === \"0\" ? arg[1] : arg;\nconst format = (str) => str.substr(0, 4) + \"/\" + zero(str.substr(5, 2)) + \"/\" + zero(str.substr(8, 2)) + \" \" + str.substr(11, 5);\nconst serial2 = ({tittle, start, end}) => tittle + format(start) + format(end);\n\nlet bitrix = flow.get(\"Bitrix24-tasks\").map(item => ({id: item.id, status: item.status, description: serial2(item)}))\n    .filter(item => item.status === \"b\")\n\nlet numId = bitrix.map(item => google.includes(item.description) ? null : item.id)\n    .filter(item => item !== null);\n\n// msg.payload = `numId ${numId}`;\n// node.send(msg);   \n\nlet oldItem = flow.get(\"Bitrix24-tasks\").filter(item => !(numId.includes(item.id)))    \nmsg.payload = flow.get(\"Bitrix24-tasks\").filter(item => numId.includes(item.id)).map(item => ({...item, status: \"g\"}));\n\nflow.set(\"Bitrix24-tasks\", [...msg.payload, ...oldItem].sort( (a, b) => a.id - b.id ));    \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 530,
        "y": 300,
        "wires": [
            [
                "5d711765.118268",
                "92c21a1c.0787f8"
            ]
        ]
    },
    {
        "id": "296b7171.61a42e",
        "type": "debug",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1030,
        "y": 200,
        "wires": []
    },
    {
        "id": "e4197819.9da528",
        "type": "function",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "Data min/max",
        "func": "let dataMinMax = flow.get(\"dataMinMax\");\nmsg.payload = dataMinMax();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 220,
        "wires": [
            [
                "296b7171.61a42e",
                "c3137952.68e258"
            ]
        ]
    },
    {
        "id": "f5bed978.aa8818",
        "type": "trigger",
        "z": "600c441d.148fac",
        "name": "",
        "op1": "",
        "op2": "true",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "30",
        "extend": true,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 810,
        "y": 580,
        "wires": [
            [
                "de05f352.744dd",
                "1b4fd46a.ec9f1c",
                "1b9e65b.de5539a"
            ]
        ]
    },
    {
        "id": "8292387f.9e3148",
        "type": "inject",
        "z": "600c441d.148fac",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 620,
        "y": 520,
        "wires": [
            [
                "f5bed978.aa8818"
            ]
        ]
    },
    {
        "id": "de05f352.744dd",
        "type": "debug",
        "z": "600c441d.148fac",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1150,
        "y": 520,
        "wires": []
    },
    {
        "id": "f049c759.cbfa48",
        "type": "function",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "select task",
        "func": "const serial = ({Title, StartDate, EndDate}) => Title + StartDate + EndDate;\nmsg.payload.shift();\nflow.set(\"google\", msg.payload);\nlet google = flow.get(\"google\").map(item => serial(item));\n\nconst zero = (arg) => arg[0] === \"0\" ? arg[1] : arg;\nconst format = (str) => str.substr(0, 4) + \"/\" + zero(str.substr(5, 2)) + \"/\" + zero(str.substr(8, 2)) + \" \" + str.substr(11, 5);\nconst serial2 = ({tittle, start, end}) => tittle + format(start) + format(end);\n\nlet bitrix = flow.get(\"Bitrix24-tasks\").map(item => ({id: item.id, status: item.status, description: serial2(item)}))\n    .filter(item => item.status === \"g\")\n\nlet numId = bitrix.map(item => google.includes(item.description) ? null : item.id)\n    .filter(item => item !== null);\n\nflow.set(\"deleteTask\", numId.length ? numId : null )    \n\nlet oldItem = flow.get(\"Bitrix24-tasks\").filter(item => !(numId.includes(item.id)))    \n//msg.payload = flow.get(\"Bitrix24-tasks\").filter(item => numId.includes(item.id)).map(item => ({...item, status: \"g\"}));\n\nflow.set(\"Bitrix24-tasks\", oldItem.sort( (a, b) => a.id - b.id ));    \nmsg.payload = numId \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 570,
        "y": 980,
        "wires": [
            [
                "8440a4df.094428",
                "f8bf2e6c.b88a8"
            ]
        ]
    },
    {
        "id": "1b4fd46a.ec9f1c",
        "type": "delay",
        "z": "600c441d.148fac",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 1080,
        "y": 580,
        "wires": [
            [
                "bdd6dae7.649358"
            ]
        ]
    },
    {
        "id": "8440a4df.094428",
        "type": "debug",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 920,
        "wires": []
    },
    {
        "id": "92c21a1c.0787f8",
        "type": "debug",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 300,
        "wires": []
    },
    {
        "id": "c85279bd.d945b8",
        "type": "inject",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": true,
        "onceDelay": "120",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 450,
        "y": 760,
        "wires": [
            [
                "a42bdffd.d2f66"
            ]
        ]
    },
    {
        "id": "a42bdffd.d2f66",
        "type": "function",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "Data min/max",
        "func": "let dataMinMax = flow.get(\"dataMinMax\");\nmsg.payload = dataMinMax();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 680,
        "y": 760,
        "wires": [
            [
                "13b24d02.7a1eb3"
            ]
        ]
    },
    {
        "id": "85b9a3d3.faad6",
        "type": "split",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1330,
        "y": 980,
        "wires": [
            [
                "d91632f1.7565b"
            ]
        ]
    },
    {
        "id": "f9e18bb0.eded58",
        "type": "delay",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 980,
        "y": 980,
        "wires": [
            [
                "a52c2fb3.43475"
            ]
        ]
    },
    {
        "id": "a52c2fb3.43475",
        "type": "change",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "deleteTask",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "deleteTask",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1150,
        "y": 980,
        "wires": [
            [
                "85b9a3d3.faad6"
            ]
        ]
    },
    {
        "id": "6bcbc26e.a0c47c",
        "type": "delay",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "3",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 920,
        "y": 1060,
        "wires": [
            [
                "fcd87d73.5be0f"
            ]
        ]
    },
    {
        "id": "f8bf2e6c.b88a8",
        "type": "switch",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "not null",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 820,
        "y": 980,
        "wires": [
            [
                "f9e18bb0.eded58"
            ]
        ]
    },
    {
        "id": "13b24d02.7a1eb3",
        "type": "switch",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "filter",
        "property": "timemin",
        "propertyType": "flow",
        "rules": [
            {
                "t": "cont",
                "v": "Invalid",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 820,
        "wires": [
            [],
            [
                "2dae541c.d66c8c"
            ]
        ]
    },
    {
        "id": "9e0e6bab.0be8f8",
        "type": "link out",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "",
        "links": [
            "b2c79c2a.33b32"
        ],
        "x": 1255,
        "y": 360,
        "wires": []
    },
    {
        "id": "b2c79c2a.33b32",
        "type": "link in",
        "z": "600c441d.148fac",
        "name": "",
        "links": [
            "9e0e6bab.0be8f8"
        ],
        "x": 575,
        "y": 580,
        "wires": [
            [
                "f5bed978.aa8818"
            ]
        ]
    },
    {
        "id": "1b9e65b.de5539a",
        "type": "link out",
        "z": "600c441d.148fac",
        "name": "",
        "links": [
            "c68556ec.3064e8"
        ],
        "x": 975,
        "y": 520,
        "wires": []
    },
    {
        "id": "c68556ec.3064e8",
        "type": "link in",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "name": "",
        "links": [
            "1b9e65b.de5539a"
        ],
        "x": 655,
        "y": 240,
        "wires": [
            [
                "e4197819.9da528"
            ]
        ]
    },
    {
        "id": "2db02908.909206",
        "type": "link in",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "",
        "links": [
            "bdd6dae7.649358"
        ],
        "x": 435,
        "y": 820,
        "wires": [
            [
                "a42bdffd.d2f66"
            ]
        ]
    },
    {
        "id": "bdd6dae7.649358",
        "type": "link out",
        "z": "600c441d.148fac",
        "name": "",
        "links": [
            "2db02908.909206"
        ],
        "x": 1215,
        "y": 580,
        "wires": []
    },
    {
        "id": "30dd4303.77663c",
        "type": "catch",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 970,
        "y": 780,
        "wires": [
            [
                "f0df4499.769808"
            ]
        ]
    },
    {
        "id": "f0df4499.769808",
        "type": "debug",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "error",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 780,
        "wires": []
    },
    {
        "id": "a486675d.cdba98",
        "type": "function",
        "z": "600c441d.148fac",
        "name": "function Data min/max",
        "func": "",
        "outputs": 1,
        "noerr": 0,
        "initialize": "function dataMin(dateNow) {return dateNow.setMonth(dateNow.getMonth())};\n\nfunction dataMax(dateNow) {return dateNow.setMonth(dateNow.getMonth()+1)};\n\n\nfunction dataMinMax() {\nlet dateNow = new Date();\nlet min = flow.get(\"Bitrix24-tasks\").map(item => Date.parse(item.start)).sort();\nlet max = flow.get(\"Bitrix24-tasks\").map(item => Date.parse(item.end)).sort();\n\nflow.set(\"timemin\", new Date(min[0] || dataMin(dateNow)));\nflow.set(\"timemax\", new Date(max[max.length-1] || dataMax(dateNow)));\n\nlet result = { timemin : flow.get(\"timemin\"),\n                timemax : flow.get(\"timemax\")\n            };\nreturn result;\n}\nflow.set(\"dataMinMax\", dataMinMax);",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "9a4bd4da.d7eea8",
        "type": "function",
        "z": "600c441d.148fac",
        "name": "",
        "func": "msg.payload = flow.get(\"Bitrix24-tasks\").map(item => Date.parse(item.end)).sort();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1390,
        "y": 560,
        "wires": [
            [
                "7cb50a71.fea984"
            ]
        ]
    },
    {
        "id": "2e8f8c6d.5ae404",
        "type": "inject",
        "z": "600c441d.148fac",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1330,
        "y": 500,
        "wires": [
            [
                "9a4bd4da.d7eea8"
            ]
        ]
    },
    {
        "id": "7cb50a71.fea984",
        "type": "debug",
        "z": "600c441d.148fac",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1400,
        "y": 620,
        "wires": []
    },
    {
        "id": "7eec4093.779d6",
        "type": "http in",
        "z": "600c441d.148fac",
        "name": "",
        "url": "/test2",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 630,
        "y": 1340,
        "wires": [
            [
                "7276c9ae.e478a8"
            ]
        ]
    },
    {
        "id": "8121c8b7.305d18",
        "type": "http response",
        "z": "600c441d.148fac",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1170,
        "y": 1340,
        "wires": []
    },
    {
        "id": "7276c9ae.e478a8",
        "type": "function",
        "z": "600c441d.148fac",
        "name": "",
        "func": "msg.payload = \"test\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 820,
        "y": 1340,
        "wires": [
            [
                "7cd8e75f.c2fe78"
            ]
        ]
    },
    {
        "id": "7cd8e75f.c2fe78",
        "type": "template",
        "z": "600c441d.148fac",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "This is the payload: {{payload}} !",
        "output": "str",
        "x": 1000,
        "y": 1340,
        "wires": [
            [
                "8121c8b7.305d18"
            ]
        ]
    },
    {
        "id": "c9268b5b.0cec68",
        "type": "google calendar",
        "z": "600c441d.148fac",
        "google": "ebb0b3e5.33507",
        "name": "",
        "calendar": "",
        "ongoing": false,
        "x": 840,
        "y": 1440,
        "wires": [
            [
                "11929809.7b7a88"
            ]
        ]
    },
    {
        "id": "c88137ba.1ca8e8",
        "type": "inject",
        "z": "600c441d.148fac",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 560,
        "y": 1440,
        "wires": [
            [
                "c9268b5b.0cec68"
            ]
        ]
    },
    {
        "id": "11929809.7b7a88",
        "type": "debug",
        "z": "600c441d.148fac",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1080,
        "y": 1440,
        "wires": []
    },
    {
        "id": "2dae541c.d66c8c",
        "type": "google calendar",
        "z": "600c441d.148fac",
        "g": "555c4b8b.208494",
        "google": "ebb0b3e5.33507",
        "name": "",
        "calendar": "",
        "ongoing": false,
        "x": 510,
        "y": 900,
        "wires": [
            [
                "47285c87.ad2d74",
                "f049c759.cbfa48"
            ]
        ]
    },
    {
        "id": "c3137952.68e258",
        "type": "google calendar",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "google": "ebb0b3e5.33507",
        "name": "",
        "calendar": "",
        "ongoing": false,
        "x": 1030,
        "y": 240,
        "wires": [
            [
                "509c1c5d.af2074",
                "c1b2a25f.1e169"
            ]
        ]
    },
    {
        "id": "1f592ba4.9d4a34",
        "type": "google calendar",
        "z": "600c441d.148fac",
        "g": "a61b8cc2.a8a42",
        "google": "ebb0b3e5.33507",
        "name": "",
        "calendar": "",
        "ongoing": false,
        "x": 1090,
        "y": 420,
        "wires": [
            [
                "9e0e6bab.0be8f8",
                "40553aa6.a46924"
            ]
        ]
    },
    {
        "id": "fcd87d73.5be0f",
        "type": "function",
        "z": "600c441d.148fac",
        "name": "",
        "func": "flow.set(\"temp\", msg.payload);\nmsg.payload = \"U2FsdGVkX1/MouDRM7BCHn65peZ//r603TagkrnEFwpVPecBJ9CQ4Y0mM9vbgVn1eB+ZZJ3mPIeFeF5cCqjcX/+0zyAvjUaRpPSeWGyiSc8hkNPYnnN1Lku5D1Zu1sBwxieav9XrMFcGiVhDMonJBU7xC4831ikNNfTTY/meLA4=\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 1160,
        "wires": [
            [
                "c2061d69.cc1cc"
            ]
        ]
    },
    {
        "id": "4beac1dd.6d6d",
        "type": "inject",
        "z": "600c441d.148fac",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 610,
        "y": 1160,
        "wires": [
            [
                "fcd87d73.5be0f"
            ]
        ]
    },
    {
        "id": "85979171.f94f3",
        "type": "debug",
        "z": "600c441d.148fac",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1350,
        "y": 1160,
        "wires": []
    },
    {
        "id": "c2061d69.cc1cc",
        "type": "decrypt",
        "z": "600c441d.148fac",
        "name": "",
        "algorithm": "AES",
        "key": "220678",
        "x": 1020,
        "y": 1160,
        "wires": [
            [
                "b69ffefa.df81e"
            ]
        ]
    },
    {
        "id": "b69ffefa.df81e",
        "type": "function",
        "z": "600c441d.148fac",
        "name": "",
        "func": "msg.url = msg.payload;\nmsg.payload = flow.get(\"temp\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1200,
        "y": 1160,
        "wires": [
            [
                "85979171.f94f3",
                "8c7ed29b.3b7d4"
            ]
        ]
    },
    {
        "id": "cb57c2a.1d1204",
        "type": "function",
        "z": "600c441d.148fac",
        "name": "",
        "func": "flow.set(\"temp\", msg.payload);\nmsg.payload = \"U2FsdGVkX1+Ql1B3ZigS7cR+rGGP2X59EFwRkx1dzhNLuZFqRYdPcbjqAFR8cCo03wzNz7+7OZx08gcS2C/TpyRkrwfwrjPRXw9ZFJe8hKiaX7EUOlBPkkI9WIloS9H5\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 480,
        "y": 60,
        "wires": [
            [
                "cc88746f.4a7308"
            ]
        ]
    },
    {
        "id": "cc88746f.4a7308",
        "type": "decrypt",
        "z": "600c441d.148fac",
        "name": "",
        "algorithm": "AES",
        "key": "220678",
        "x": 680,
        "y": 60,
        "wires": [
            [
                "ef95fe83.cb922"
            ]
        ]
    },
    {
        "id": "ef95fe83.cb922",
        "type": "function",
        "z": "600c441d.148fac",
        "name": "",
        "func": "msg.url = msg.payload;\nmsg.payload = flow.get(\"temp\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 860,
        "y": 60,
        "wires": [
            [
                "62c049f0.09c4b8",
                "d778f34b.18d02"
            ]
        ]
    },
    {
        "id": "62c049f0.09c4b8",
        "type": "debug",
        "z": "600c441d.148fac",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1030,
        "y": 60,
        "wires": []
    },
    {
        "id": "c7173a83eeeaca14",
        "type": "mqtt in",
        "z": "c41c951762d4a8a3",
        "name": "home",
        "topic": "home/#",
        "qos": "2",
        "datatype": "auto",
        "broker": "2f328598c5b8aac0",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 190,
        "y": 440,
        "wires": [
            [
                "c54be80b06c4860b",
                "335a03a69b926287"
            ]
        ]
    },
    {
        "id": "c54be80b06c4860b",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 370,
        "y": 440,
        "wires": []
    },
    {
        "id": "0de44d74708b1e41",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "Lumi",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Lumi",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 450,
        "y": 760,
        "wires": [
            [
                "fbe8c9b4cce15823"
            ]
        ]
    },
    {
        "id": "fbe8c9b4cce15823",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 760,
        "wires": [
            [
                "f2c89a8a963f1e11"
            ]
        ],
        "l": false
    },
    {
        "id": "8db39e7cebe2938c",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "illuminance",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bedroom.sensor.illuminance",
                "pt": "global",
                "to": "payload.illuminance",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.illuminance",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 760,
        "wires": [
            [
                "304f4fa53482db25"
            ]
        ]
    },
    {
        "id": "962c2a152fc3a121",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "DoorBath",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "DoorBath",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 460,
        "y": 1240,
        "wires": [
            [
                "6ce4039ea9fc9669"
            ]
        ]
    },
    {
        "id": "6ce4039ea9fc9669",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 1240,
        "wires": [
            [
                "42bb6c1b10c6c724"
            ]
        ],
        "l": false
    },
    {
        "id": "940e44ee8f3d3154",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "MoveWhite",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "MoveWhite",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 960,
        "wires": [
            [
                "369ba94822acb6c6"
            ]
        ]
    },
    {
        "id": "369ba94822acb6c6",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 960,
        "wires": [
            [
                "2bd8c836040f3d06"
            ]
        ],
        "l": false
    },
    {
        "id": "5662846ed29b737b",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "moveWhite",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bedroom.sensor.moveWhite.state",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "home.rooms.bedroom.sensor.moveWhite.time",
                "pt": "global",
                "to": "$flowContext(\"timeStamp\")()",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.state",
                "pt": "global",
                "to": "home.rooms.bedroom.sensor.moveWhite.state",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.time",
                "pt": "global",
                "to": "home.rooms.bedroom.sensor.moveWhite.time",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1010,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "b6e366205ed05d32",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "TemperatureRoom",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "TemperatureRoom",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 820,
        "wires": [
            [
                "cfa2f1881ca6f4d8"
            ]
        ]
    },
    {
        "id": "cfa2f1881ca6f4d8",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 625,
        "y": 820,
        "wires": [
            [
                "d95fc15dda837b65",
                "1539082ae4173dcf"
            ]
        ],
        "l": false
    },
    {
        "id": "d95fc15dda837b65",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "temperature",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bedroom.sensor.temperature",
                "pt": "global",
                "to": "payload.temperature",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 820,
        "wires": [
            [
                "b8f2c0891a68723a"
            ]
        ]
    },
    {
        "id": "1539082ae4173dcf",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "humidity",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bedroom.sensor.humidity",
                "pt": "global",
                "to": "payload.humidity",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 880,
        "wires": [
            [
                "9f595e364e94d75e"
            ]
        ]
    },
    {
        "id": "b8f2c0891a68723a",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "Home.temp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "home.rooms.bedroom.sensor.temperature",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 820,
        "wires": [
            [
                "159420011a8e2d7f"
            ]
        ]
    },
    {
        "id": "9f595e364e94d75e",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "Home.humidity",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "home.rooms.bedroom.sensor.humidity",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 880,
        "wires": [
            [
                "1544a58896c0c43e"
            ]
        ]
    },
    {
        "id": "ce63d05bf77dbaad",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": " opened",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 1220,
        "wires": [
            [
                "1f6e2ec3365bb2fd",
                "7d77beaae2bccf7a"
            ]
        ]
    },
    {
        "id": "6804248c8872ab55",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "closed",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "closed",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 1260,
        "wires": [
            [
                "7d77beaae2bccf7a"
            ]
        ]
    },
    {
        "id": "ce4d78cd30dfbe13",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "Дверь в ванную",
        "property": "home.rooms.bathroom.sensor.doorBath.state",
        "propertyType": "global",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1180,
        "y": 1240,
        "wires": [
            [
                "ce63d05bf77dbaad"
            ],
            [
                "6804248c8872ab55"
            ]
        ]
    },
    {
        "id": "0a9243e039e932df",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "Button",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Button",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 450,
        "y": 1360,
        "wires": [
            [
                "e0c0882558578574"
            ]
        ]
    },
    {
        "id": "1412f680e6168273",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 695,
        "y": 3120,
        "wires": [],
        "l": false
    },
    {
        "id": "e0c0882558578574",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 1360,
        "wires": [
            [
                "9f075764aa805a93"
            ]
        ],
        "l": false
    },
    {
        "id": "9f075764aa805a93",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "Кнопка",
        "property": "payload.action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "single",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "double",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "long",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "long_release",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 1420,
        "y": 1360,
        "wires": [
            [
                "140cbb0c2a5bbd71"
            ],
            [
                "0e687c1f8167bbda"
            ],
            [
                "07bcf83e6a7212a9"
            ],
            [],
            []
        ]
    },
    {
        "id": "89b28e942aa668f8",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "toggle button",
        "func": "flow.set('button', !flow.get('button'))\nflow.set('lamp', !flow.get('button'))\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nflow.set('button', false)",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 4760,
        "wires": [
            [
                "af1a380647b92ef1"
            ]
        ]
    },
    {
        "id": "2456f41f70e53929",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "toggle button",
        "func": "flow.set('button_long', !flow.get('button_long'))\nmsg.payload = flow.get('button_long')\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nflow.set('button_long', false)",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 4760,
        "wires": [
            []
        ]
    },
    {
        "id": "1a419b3145646910",
        "type": "mqtt out",
        "z": "c41c951762d4a8a3",
        "name": "Lamp1",
        "topic": "mqtt/Lamp1/output5",
        "qos": "2",
        "retain": "",
        "broker": "6d5d992d.6206c8",
        "x": 910,
        "y": 4820,
        "wires": []
    },
    {
        "id": "2bea3cc77d06ba28",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "on - off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 250,
        "y": 4860,
        "wires": [
            [
                "53dd576d9b5a62c4"
            ],
            [
                "abdde3534165b9ad"
            ]
        ]
    },
    {
        "id": "53dd576d9b5a62c4",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "Lamp set On",
        "rules": [
            {
                "t": "set",
                "p": "lamp",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 4840,
        "wires": [
            []
        ]
    },
    {
        "id": "abdde3534165b9ad",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "Lamp set Off",
        "rules": [
            {
                "t": "set",
                "p": "lamp",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 4900,
        "wires": [
            []
        ]
    },
    {
        "id": "399d7cb8ecdcfcb1",
        "type": "mqtt in",
        "z": "c41c951762d4a8a3",
        "name": "Lamp1",
        "topic": "mqtt/Lamp1/output5",
        "qos": "2",
        "datatype": "auto",
        "broker": "6d5d992d.6206c8",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 90,
        "y": 4860,
        "wires": [
            [
                "b60703b883ba1e5d",
                "2bea3cc77d06ba28"
            ]
        ]
    },
    {
        "id": "b60703b883ba1e5d",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 270,
        "y": 4940,
        "wires": []
    },
    {
        "id": "af1a380647b92ef1",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "1/0",
        "func": "msg.payload = global.get('lamp')*1\nglobal.get('lamp') ? node.status({fill:\"green\",shape:\"dot\",text:\"on\"}) : node.status({fill:\"red\",shape:\"dot\",text:\"off\"});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 4760,
        "wires": [
            [
                "1a419b3145646910",
                "9ec8a8f7820d0236"
            ]
        ]
    },
    {
        "id": "9ec8a8f7820d0236",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 930,
        "y": 4740,
        "wires": []
    },
    {
        "id": "983cab34251c6577",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "SwRoom",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "SwRoom",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 460,
        "y": 1640,
        "wires": [
            [
                "7088e0865ca812d7"
            ]
        ]
    },
    {
        "id": "7088e0865ca812d7",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 575,
        "y": 1640,
        "wires": [
            [
                "b5fd52f6bce8608b",
                "75edb24ccb8d9a15"
            ]
        ],
        "l": false
    },
    {
        "id": "b5fd52f6bce8608b",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 565,
        "y": 1540,
        "wires": [],
        "l": false
    },
    {
        "id": "de73baab2962637a",
        "type": "mqtt out",
        "z": "c41c951762d4a8a3",
        "name": "SwRoom",
        "topic": "",
        "qos": "0",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2f328598c5b8aac0",
        "x": 2060,
        "y": 1460,
        "wires": []
    },
    {
        "id": "26f7728f0adf94a3",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "OFF",
        "payloadType": "str",
        "x": 1530,
        "y": 1440,
        "wires": [
            [
                "07bcf83e6a7212a9"
            ]
        ]
    },
    {
        "id": "07bcf83e6a7212a9",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Общий OFF",
        "func": "node.send({topic: \"home/SwRoom/set\", payload: {\n    \"state_left\":\"OFF\",\n    \"state_right\":\"OFF\"\n    }})",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1730,
        "y": 1440,
        "wires": [
            [
                "2cc2c4e2e809d64d"
            ]
        ]
    },
    {
        "id": "140cbb0c2a5bbd71",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "SwRoom_right_TOGGLE",
        "func": "msg.topic = \"home/SwRoom/set\"\nmsg.payload = {\"state_right\": \"TOGGLE\"}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1690,
        "y": 1320,
        "wires": [
            [
                "2cc2c4e2e809d64d"
            ]
        ]
    },
    {
        "id": "0e687c1f8167bbda",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "SwRoom_left_TOGGLE",
        "func": "msg.topic = \"home/SwRoom/set\"\nmsg.payload = {\"state_left\": \"TOGGLE\"}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1690,
        "y": 1380,
        "wires": [
            [
                "2cc2c4e2e809d64d"
            ]
        ]
    },
    {
        "id": "8459ea1579c12796",
        "type": "On_Off",
        "z": "c41c951762d4a8a3",
        "device": "26016f0ebffb6dee",
        "name": "Комната:Слабый свет",
        "retrievable": true,
        "response": true,
        "x": 1490,
        "y": 1560,
        "wires": [
            [
                "bbefb6765c4849a4"
            ]
        ]
    },
    {
        "id": "adcca41785b40cd1",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 830,
        "y": 4620,
        "wires": []
    },
    {
        "id": "061537c790429243",
        "type": "On_Off",
        "z": "c41c951762d4a8a3",
        "device": "a6c29287.593a1",
        "name": "Стол:Настольная лампа",
        "retrievable": true,
        "response": true,
        "x": 530,
        "y": 4620,
        "wires": [
            [
                "adcca41785b40cd1",
                "6a68e30241555dcf"
            ]
        ]
    },
    {
        "id": "6a68e30241555dcf",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "Lamp set",
        "rules": [
            {
                "t": "set",
                "p": "lamp",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 4680,
        "wires": [
            [
                "af1a380647b92ef1"
            ]
        ]
    },
    {
        "id": "6a1a7232de625a6b",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 710,
        "y": 4820,
        "wires": [
            [
                "1a419b3145646910"
            ]
        ]
    },
    {
        "id": "16448b56ac8c8c74",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 710,
        "y": 4880,
        "wires": [
            [
                "1a419b3145646910"
            ]
        ]
    },
    {
        "id": "8777c66006376e5a",
        "type": "On_Off",
        "z": "c41c951762d4a8a3",
        "device": "8baae5e39bdbaa12",
        "name": "Комната:Яркий свет",
        "retrievable": true,
        "response": true,
        "x": 1480,
        "y": 1640,
        "wires": [
            [
                "91bcdaa48594b75d"
            ]
        ]
    },
    {
        "id": "1544a58896c0c43e",
        "type": "Sensor",
        "z": "c41c951762d4a8a3",
        "device": "3cd247b18e2daef9",
        "name": "Комната:Датчики:Humidity",
        "stype": "devices.properties.float",
        "instance": "humidity",
        "unit": "unit.percent",
        "x": 1240,
        "y": 880,
        "wires": []
    },
    {
        "id": "159420011a8e2d7f",
        "type": "Sensor",
        "z": "c41c951762d4a8a3",
        "device": "3cd247b18e2daef9",
        "name": "Комната:Датчики:Temperature",
        "stype": "devices.properties.float",
        "instance": "temperature",
        "unit": "unit.temperature.celsius",
        "x": 1250,
        "y": 820,
        "wires": []
    },
    {
        "id": "1cca477ae2c0c41b",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "home",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "let home = {\n    rooms:{\n        kitchen:{\n            sensor:{\n                moveKitchen: {\n                    state: false, \n                    time: 0\n                }\n            },\n            switches:{},\n            devices:{},\n            lights:{\n                lamp: false\n            }\n        },\n        bathroom:{\n            sensor:{\n                temperature: 0,\n                humidity: 0,\n                moveBathDoor: {\n                    state: false, \n                    time: 0\n                },\n                moveBathIn: {\n                    state: false, \n                    time: 0\n                },\n                human1: {\n                    state: false,\n                    time: 0\n                },\n                doorBath: {\n                    state: false, \n                    time: 0\n                }\n            },\n            switches:{},\n            devices:{\n                vent: false\n            },\n            lights:{    \n                lampLow: false,\n                lampHigh: false,\n                stateLampBath() {return ((!this.lampLow) && (!this.lampHigh))} //true когда все выключено\n            }\n        },\n        bedroom:{\n            sensor:{\n                temperature: 0,\n                humidity: 0,\n                illuminance: 0,\n                moveWhite: {\n                    state: false, \n                    time: 0\n                }\n            },\n            switches:{},\n            devices:{\n                conditioner: {\n                    state: false,\n                    time: 0\n                },\n            },\n            lights:{\n                lampLow: false,\n                lampHigh: false\n            }\n        },\n        coridor:{\n            sensor:{\n                doorHome: {\n                    state: true, \n                    time: 0\n                },   \n                moveBlack: {\n                    state: false, \n                    time: 0\n                }, \n                aqara: {\n                    state: false,\n                    time: 0\n                },\n                moveCoridor: {\n                    state: false, \n                    time: 0\n                }\n            },\n            switches:{\n                topic: \"home/SwCoridor/set\",\n                on: {\"state\":\"ON\"},\n                off: {\"state\":\"OFF\"}\n            },\n            lights:{\n                lamp: false\n            }\n        },\n        central:{\n            sensor:{},\n            lights:{\n                lamp: false\n            }\n        },\n        moveLast: {\n            state: false, \n            time: 0\n        }\n    }\n}\nglobal.set(\"home\",home);\nflow.set(\"timeStamp\", () => Date.now())",
        "finalize": "",
        "libs": [],
        "x": 1210,
        "y": 120,
        "wires": [
            [
                "540fb3f4991f139e",
                "f3aed31d290db938"
            ]
        ]
    },
    {
        "id": "540d94d4b4bfbf2c",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "30",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 970,
        "y": 120,
        "wires": [
            [
                "1cca477ae2c0c41b",
                "6e097cd1bfe44df8"
            ]
        ]
    },
    {
        "id": "02302338db340a0d",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "сохранение данных",
        "func": "//функция добавляющая лидирующий ноль. например 7 -> 07\nconst format = item => (item + 100).toString().slice(1, 3);\n\n//формируем текущие дату и время\nconst today = new Date();\nconst date = `${format(today.getDate())}-${format(today.getMonth()+1)}-${today.getFullYear()}`;\nconst time = `${format(today.getHours())}:${format(today.getMinutes())}:${format(today.getSeconds())}`\n\n//сохраняем в массив значений\nlet data = flow.get(\"data\") || [];\ndata.splice(0, data.length-1000);\nlet home = JSON.parse(JSON.stringify(global.get(\"home\")));\ndata.push({\n    home: home,\n    date: date,\n    time: time\n});\nflow.set(\"data\", data);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 880,
        "y": 200,
        "wires": [
            [
                "c16254f1afa32644",
                "29da792ffe403c1e"
            ]
        ]
    },
    {
        "id": "80fa48d8b7fd6c13",
        "type": "http in",
        "z": "c41c951762d4a8a3",
        "name": "",
        "url": "/home",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 60,
        "wires": [
            [
                "ce16ccc836e8efb7"
            ]
        ]
    },
    {
        "id": "e67e534c20398aef",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "load data",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "data",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 60,
        "wires": [
            [
                "7498cd28ce673c12"
            ]
        ]
    },
    {
        "id": "7498cd28ce673c12",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 575,
        "y": 60,
        "wires": [
            [
                "0e8adad80f94767e"
            ]
        ],
        "l": false
    },
    {
        "id": "0e8adad80f94767e",
        "type": "http response",
        "z": "c41c951762d4a8a3",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 690,
        "y": 60,
        "wires": []
    },
    {
        "id": "ef25e68aea99126c",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 850,
        "y": 320,
        "wires": []
    },
    {
        "id": "8b5b2c4528047ac0",
        "type": "complete",
        "z": "c41c951762d4a8a3",
        "name": "",
        "scope": [
            "8db39e7cebe2938c",
            "5662846ed29b737b",
            "b8f2c0891a68723a",
            "9f595e364e94d75e",
            "9f075764aa805a93",
            "6a68e30241555dcf",
            "311345c5a6125823",
            "bbaae823551bbe18",
            "2678be56057e6dca",
            "8eaa3663c0e8de26",
            "ef7e78bee08dede7",
            "f1d25ccf817b24ba",
            "8636121b256de90a",
            "24f6865907e8fd39",
            "f16a13fa0a92c084",
            "cb95e896478aa225",
            "cf80c882f9a1be48",
            "043858ba18b3fd54",
            "4e9767ddb3f25391",
            "c162de837b841ca2",
            "e7bf7069fb39fcc2",
            "1a3d9a70b5b5a9fc",
            "8f9b1d01858f610f",
            "b947529834b5bf72",
            "66dd99fd8b8b514e",
            "921e53ca7d458c15"
        ],
        "uncaught": false,
        "x": 640,
        "y": 200,
        "wires": [
            [
                "02302338db340a0d"
            ]
        ]
    },
    {
        "id": "a539bd93b5debcc6",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "MoveKitchen",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "MoveKitchen",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 1060,
        "wires": [
            [
                "f5b28fd0c9a9b3a8"
            ]
        ]
    },
    {
        "id": "f5b28fd0c9a9b3a8",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 1060,
        "wires": [
            [
                "cd2b06bd5ba84b4d"
            ]
        ],
        "l": false
    },
    {
        "id": "e02d44aa5a2267b1",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "MoveBathD",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "MoveBathDoor",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 1140,
        "wires": [
            [
                "5cb710d754fc6493"
            ]
        ]
    },
    {
        "id": "5cb710d754fc6493",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 1140,
        "wires": [
            [
                "15a69ab72d8ee553"
            ]
        ],
        "l": false
    },
    {
        "id": "f2c89a8a963f1e11",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "446",
        "property": "payload.illuminance",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "446",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 760,
        "wires": [
            [
                "8db39e7cebe2938c"
            ]
        ]
    },
    {
        "id": "9cf36fbc58e483dd",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "SwBath",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "SwBath",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 460,
        "y": 1900,
        "wires": [
            [
                "89561b8c16b162e3"
            ]
        ]
    },
    {
        "id": "89561b8c16b162e3",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 1900,
        "wires": [
            [
                "ca254d474e62a18c",
                "20c7c92737aa61ae"
            ]
        ],
        "l": false
    },
    {
        "id": "ca254d474e62a18c",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 795,
        "y": 1900,
        "wires": [],
        "l": false
    },
    {
        "id": "6ca3e0b175c58a56",
        "type": "mqtt out",
        "z": "c41c951762d4a8a3",
        "name": "Switches",
        "topic": "",
        "qos": "0",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2f328598c5b8aac0",
        "x": 2140,
        "y": 3640,
        "wires": []
    },
    {
        "id": "9162dae5258ad37a",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "SwKitchen",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "SwKitchen",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 3640,
        "wires": [
            [
                "fad866f9cd568861"
            ]
        ]
    },
    {
        "id": "fad866f9cd568861",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 3640,
        "wires": [
            [
                "bc95cf1ad18a3d16",
                "b6a80095f4d24fb1"
            ]
        ],
        "l": false
    },
    {
        "id": "bc95cf1ad18a3d16",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 695,
        "y": 3580,
        "wires": [],
        "l": false
    },
    {
        "id": "3e508e33f5df6707",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "ON",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ON",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 3760,
        "wires": [
            [
                "d4c8f92968343d39"
            ]
        ]
    },
    {
        "id": "b6a80095f4d24fb1",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "linkquality",
        "property": "payload.linkquality",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 800,
        "y": 3640,
        "wires": [
            [
                "311345c5a6125823",
                "bbaae823551bbe18"
            ]
        ]
    },
    {
        "id": "311345c5a6125823",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "state_left",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state_left",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 3760,
        "wires": [
            [
                "93078390057d61f3"
            ]
        ]
    },
    {
        "id": "bbaae823551bbe18",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "state_right",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state_right",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 990,
        "y": 3640,
        "wires": [
            [
                "922f487938307366"
            ]
        ]
    },
    {
        "id": "922f487938307366",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "ON/OFF",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1180,
        "y": 3640,
        "wires": [
            [
                "6fac2cbcbbe65b72"
            ],
            [
                "e9010bc89210ebec"
            ]
        ]
    },
    {
        "id": "6fac2cbcbbe65b72",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "ON",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.kitchen.lights.lamp",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 3620,
        "wires": [
            [
                "1e7bc46c0df3501f"
            ]
        ]
    },
    {
        "id": "e9010bc89210ebec",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.kitchen.lights.lamp",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 3660,
        "wires": [
            [
                "1e7bc46c0df3501f"
            ]
        ]
    },
    {
        "id": "d4c8f92968343d39",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "lamp OFF",
        "property": "home.rooms.kitchen.lights.lamp",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1360,
        "y": 3760,
        "wires": [
            [
                "7fa0e3b87c6cb9f4"
            ],
            [
                "253564f224ea4631"
            ]
        ]
    },
    {
        "id": "20c7c92737aa61ae",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "linkquality",
        "property": "payload.linkquality",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 460,
        "y": 1960,
        "wires": [
            [
                "8eaa3663c0e8de26",
                "2678be56057e6dca",
                "ef7e78bee08dede7"
            ]
        ]
    },
    {
        "id": "2678be56057e6dca",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "state_right",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state_right",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 2220,
        "wires": [
            [
                "0f6de43bad8d10d5"
            ]
        ]
    },
    {
        "id": "0f6de43bad8d10d5",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 775,
        "y": 2220,
        "wires": [
            [
                "f6663a84a40382b5"
            ]
        ],
        "l": false
    },
    {
        "id": "8eaa3663c0e8de26",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "state_left",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state_left",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 1960,
        "wires": [
            [
                "b3ec6a90e7f98084"
            ]
        ]
    },
    {
        "id": "b3ec6a90e7f98084",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 775,
        "y": 1960,
        "wires": [
            [
                "ec71f5082f2a697a"
            ]
        ],
        "l": false
    },
    {
        "id": "f6663a84a40382b5",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "ON/OFF",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 880,
        "y": 2220,
        "wires": [
            [
                "9163d7a0b1760954"
            ],
            [
                "758bf00a219389a2"
            ]
        ]
    },
    {
        "id": "9163d7a0b1760954",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "ON",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bathroom.lights.lampLow",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1090,
        "y": 2200,
        "wires": [
            [
                "e7ac757485b039b3"
            ]
        ]
    },
    {
        "id": "758bf00a219389a2",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bathroom.lights.lampLow",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1090,
        "y": 2240,
        "wires": [
            [
                "e7ac757485b039b3"
            ]
        ]
    },
    {
        "id": "ef7e78bee08dede7",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "state_center",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state_center",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 2300,
        "wires": [
            [
                "c410327faaa5b89c"
            ]
        ]
    },
    {
        "id": "c410327faaa5b89c",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 775,
        "y": 2300,
        "wires": [
            [
                "d549560d05e0ae56"
            ]
        ],
        "l": false
    },
    {
        "id": "ec71f5082f2a697a",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "ON/OFF",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 880,
        "y": 1960,
        "wires": [
            [
                "76597e951341ec58"
            ],
            [
                "af0c8434e31f7e0d"
            ]
        ]
    },
    {
        "id": "76597e951341ec58",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "ON",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bathroom.devices.vent",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1090,
        "y": 1940,
        "wires": [
            [
                "8f1e645eb4417e18"
            ]
        ]
    },
    {
        "id": "af0c8434e31f7e0d",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bathroom.devices.vent",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1090,
        "y": 1980,
        "wires": [
            [
                "8f1e645eb4417e18"
            ]
        ]
    },
    {
        "id": "d549560d05e0ae56",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "ON/OFF",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 880,
        "y": 2300,
        "wires": [
            [
                "274c86583ebcbd2d"
            ],
            [
                "b6858cb716ec5d0d"
            ]
        ]
    },
    {
        "id": "274c86583ebcbd2d",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "ON",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bathroom.lights.lampHigh",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1090,
        "y": 2280,
        "wires": [
            [
                "6d6babb17bd9acb0"
            ]
        ]
    },
    {
        "id": "b6858cb716ec5d0d",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bathroom.lights.lampHigh",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1090,
        "y": 2320,
        "wires": [
            [
                "6d6babb17bd9acb0"
            ]
        ]
    },
    {
        "id": "e3d52c4c6cccfc9c",
        "type": "mqtt out",
        "z": "c41c951762d4a8a3",
        "name": "Switches",
        "topic": "",
        "qos": "0",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2f328598c5b8aac0",
        "x": 2060,
        "y": 1160,
        "wires": []
    },
    {
        "id": "299ecece30289225",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "ON Light Low",
        "func": "msg.topic = \"home/SwBath/set\"\nmsg.payload = {\"state_right\":\"ON\"}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1820,
        "y": 1160,
        "wires": [
            [
                "00d5390b3df1ccb2"
            ]
        ]
    },
    {
        "id": "93d091c145275cf2",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "ON",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "ON",
        "payloadType": "str",
        "x": 1650,
        "y": 1100,
        "wires": [
            [
                "299ecece30289225"
            ]
        ]
    },
    {
        "id": "a9ccb33fdc314982",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "moveBathD",
        "property": "home.rooms.bathroom.sensor.moveBathDoor.state",
        "propertyType": "global",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1190,
        "y": 1140,
        "wires": [
            [],
            [
                "f0b560301523d9ee"
            ]
        ]
    },
    {
        "id": "9c17bd96c53d883c",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "OFF Light",
        "func": "msg.topic = \"home/SwBath/set\"\nmsg.payload = {\"state_center\":\"OFF\",\"state_right\":\"OFF\"}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1840,
        "y": 1060,
        "wires": [
            [
                "00d5390b3df1ccb2"
            ]
        ]
    },
    {
        "id": "5590a5bb5dcd8670",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "OFF",
        "payloadType": "str",
        "x": 1650,
        "y": 1060,
        "wires": [
            [
                "9c17bd96c53d883c"
            ]
        ]
    },
    {
        "id": "0877d1f8f4ff7a15",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 855,
        "y": 1140,
        "wires": [
            [
                "8636121b256de90a"
            ]
        ],
        "l": false
    },
    {
        "id": "d9aef2e5be62b555",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 855,
        "y": 1060,
        "wires": [
            [
                "f1d25ccf817b24ba"
            ]
        ],
        "l": false
    },
    {
        "id": "21159bb6cd9ecfed",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 855,
        "y": 960,
        "wires": [
            [
                "5662846ed29b737b"
            ]
        ],
        "l": false
    },
    {
        "id": "1f6e2ec3365bb2fd",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "LampBath state OFF",
        "func": "if (global.get(\"home.rooms.bathroom.lights\").stateLampBath()) {return msg} else return null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1540,
        "y": 1160,
        "wires": [
            [
                "299ecece30289225"
            ]
        ]
    },
    {
        "id": "2bd8c836040f3d06",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "occupancy",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.occupancy",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 960,
        "wires": [
            [
                "21159bb6cd9ecfed"
            ]
        ]
    },
    {
        "id": "cd2b06bd5ba84b4d",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "occupancy",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.occupancy",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 1060,
        "wires": [
            [
                "d9aef2e5be62b555"
            ]
        ]
    },
    {
        "id": "15a69ab72d8ee553",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "occupancy",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.occupancy",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 1140,
        "wires": [
            [
                "0877d1f8f4ff7a15"
            ]
        ]
    },
    {
        "id": "e288404b897129e9",
        "type": "trigger",
        "z": "c41c951762d4a8a3",
        "name": "2 min ON",
        "op1": "",
        "op2": "true",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "2",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1640,
        "y": 2040,
        "wires": [
            [
                "3c6348b1b6f5b935"
            ]
        ]
    },
    {
        "id": "f1d25ccf817b24ba",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "moveKitchen",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.kitchen.sensor.moveKitchen.state",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "home.rooms.kitchen.sensor.moveKitchen.time",
                "pt": "global",
                "to": "$flowContext(\"timeStamp\")()",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.state",
                "pt": "global",
                "to": "home.rooms.kitchen.sensor.moveKitchen.state",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.time",
                "pt": "global",
                "to": "home.rooms.kitchen.sensor.moveKitchen.time",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1010,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "8636121b256de90a",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "moveBathD",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bathroom.sensor.moveBathDoor.state",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "home.rooms.bathroom.sensor.moveBathDoor.time",
                "pt": "global",
                "to": "$flowContext(\"timeStamp\")()",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.state",
                "pt": "global",
                "to": "home.rooms.bathroom.sensor.moveBathDoor.state",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.time",
                "pt": "global",
                "to": "home.rooms.bathroom.sensor.moveBathDoor.time",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1010,
        "y": 1140,
        "wires": [
            [
                "a9ccb33fdc314982"
            ]
        ]
    },
    {
        "id": "72249326c040223f",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "moveLast",
        "func": "let moveLast = global.get(\"home.rooms.moveLast.time\");\n//node.send({topic: \"moveLast\", payload: moveLast})\nlet moveBathD = global.get(\"home.rooms.bathroom.sensor.moveBathDoor.time\");\n//node.send({topic: \"moveBath\", payload: moveBath})\nlet inBath = global.get(\"home.rooms.bathroom.sensor.moveBathIn.time\");\n//node.send({topic: \"inBath\", payload: inBath})\nif ((moveLast === moveBathD) || (moveLast === inBath))  {\n    node.status({fill:\"red\",shape:\"dot\",text:\"совпадает\"});\n    return null\n} \nelse {\n    msg.payload = \"не совпадает\";\n    node.status({fill:\"green\",shape:\"dot\",text:\"не совпадает\"});\n    return msg\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 980,
        "wires": [
            [
                "f4ae07e0ff5ab7e3"
            ]
        ],
        "outputLabels": [
            "не совпадает"
        ]
    },
    {
        "id": "1c92863ab6734a5d",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "moveBathIn.state",
        "property": "home.rooms.bathroom.sensor.moveBathIn.state",
        "propertyType": "global",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1670,
        "y": 980,
        "wires": [
            [
                "9c17bd96c53d883c",
                "fd794de8a8f19b62"
            ]
        ]
    },
    {
        "id": "bf1b7ca553a95c38",
        "type": "On_Off",
        "z": "c41c951762d4a8a3",
        "device": "4e9c5ce08da3beac",
        "name": "Ванная:Яркий свет",
        "retrievable": true,
        "response": true,
        "x": 1460,
        "y": 2300,
        "wires": [
            [
                "bba3edb93385706a"
            ]
        ]
    },
    {
        "id": "3b789ec233df452b",
        "type": "On_Off",
        "z": "c41c951762d4a8a3",
        "device": "cb9d0652a99fe22e",
        "name": "Ванная:Слабый свет",
        "retrievable": true,
        "response": true,
        "x": 1460,
        "y": 2220,
        "wires": [
            [
                "64a03085735ec755"
            ]
        ]
    },
    {
        "id": "bb237e0906021a01",
        "type": "On_Off",
        "z": "c41c951762d4a8a3",
        "device": "d7333dc2ca307d6b",
        "name": "Ванная:Вентилятор",
        "retrievable": true,
        "response": true,
        "x": 1460,
        "y": 1960,
        "wires": [
            [
                "3c6348b1b6f5b935"
            ]
        ]
    },
    {
        "id": "576930a8697deece",
        "type": "mqtt out",
        "z": "c41c951762d4a8a3",
        "name": "Switches",
        "topic": "",
        "qos": "0",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2f328598c5b8aac0",
        "x": 2060,
        "y": 1960,
        "wires": []
    },
    {
        "id": "75edb24ccb8d9a15",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "linkquality",
        "property": "payload.linkquality",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 1640,
        "wires": [
            [
                "f16a13fa0a92c084",
                "24f6865907e8fd39"
            ]
        ]
    },
    {
        "id": "24f6865907e8fd39",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "state_right",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state_right",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 1560,
        "wires": [
            [
                "23e6270e7c6ed13d"
            ]
        ]
    },
    {
        "id": "f16a13fa0a92c084",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "state_left",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state_left",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 1640,
        "wires": [
            [
                "050227f9ecade526"
            ]
        ]
    },
    {
        "id": "23e6270e7c6ed13d",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "ON/OFF",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1080,
        "y": 1560,
        "wires": [
            [
                "cfe6e124784a0f17"
            ],
            [
                "22b4afd6db10c528"
            ]
        ]
    },
    {
        "id": "cfe6e124784a0f17",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "ON",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bedroom.lights.lampLow",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1250,
        "y": 1540,
        "wires": [
            [
                "8459ea1579c12796"
            ]
        ]
    },
    {
        "id": "22b4afd6db10c528",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bedroom.lights.lampLow",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1250,
        "y": 1580,
        "wires": [
            [
                "8459ea1579c12796"
            ]
        ]
    },
    {
        "id": "050227f9ecade526",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "ON/OFF",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1080,
        "y": 1640,
        "wires": [
            [
                "e46d3ca4a21bd8ce"
            ],
            [
                "fd803aebe5c85218"
            ]
        ]
    },
    {
        "id": "e46d3ca4a21bd8ce",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "ON",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bedroom.lights.lampHigh",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1250,
        "y": 1620,
        "wires": [
            [
                "8777c66006376e5a"
            ]
        ]
    },
    {
        "id": "fd803aebe5c85218",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bedroom.lights.lampHigh",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1250,
        "y": 1660,
        "wires": [
            [
                "8777c66006376e5a"
            ]
        ]
    },
    {
        "id": "cb95e896478aa225",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "doorBath",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bathroom.sensor.doorBath.state",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "home.rooms.bathroom.sensor.doorBath.time",
                "pt": "global",
                "to": "$flowContext(\"timeStamp\")()",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 1240,
        "wires": [
            [
                "ce4d78cd30dfbe13"
            ]
        ]
    },
    {
        "id": "42bb6c1b10c6c724",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "contact",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.contact",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 1240,
        "wires": [
            [
                "46a8d2c17d0fd6a4"
            ]
        ]
    },
    {
        "id": "892dbf364edb29c7",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "SwCoridor",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "SwCoridor",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 3320,
        "wires": [
            [
                "38787909a3517658"
            ]
        ]
    },
    {
        "id": "38787909a3517658",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 3320,
        "wires": [
            [
                "d8346f3233360313"
            ]
        ],
        "l": false
    },
    {
        "id": "d8346f3233360313",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "linkquality",
        "property": "payload.linkquality",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 720,
        "y": 3320,
        "wires": [
            [
                "cf80c882f9a1be48",
                "adaa189416cbcfd1"
            ]
        ]
    },
    {
        "id": "cf80c882f9a1be48",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "state",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 3320,
        "wires": [
            [
                "12a6c60970fa9297"
            ]
        ]
    },
    {
        "id": "392b863252425793",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "ON/OFF",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1180,
        "y": 2880,
        "wires": [
            [
                "7aad36c044c6d6c1"
            ],
            [
                "89fa6a526a1f500d"
            ]
        ]
    },
    {
        "id": "7aad36c044c6d6c1",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "ON",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.coridor.lights.lamp",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 2860,
        "wires": [
            [
                "78abb323aed3e30a",
                "4546b63325b4d54e"
            ]
        ]
    },
    {
        "id": "89fa6a526a1f500d",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.coridor.lights.lamp",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 2900,
        "wires": [
            [
                "78abb323aed3e30a",
                "4546b63325b4d54e"
            ]
        ]
    },
    {
        "id": "77104418b2ef85d3",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "DoorHome",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "DoorHome",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 3060,
        "wires": [
            [
                "e8f23f0620329feb"
            ]
        ]
    },
    {
        "id": "e8f23f0620329feb",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 3060,
        "wires": [
            [
                "60ea6ffd872323a8",
                "1412f680e6168273"
            ]
        ],
        "l": false
    },
    {
        "id": "043858ba18b3fd54",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "doorHome",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.coridor.sensor.doorHome.state",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "home.rooms.coridor.sensor.doorHome.time",
                "pt": "global",
                "to": "$flowContext(\"timeStamp\")()",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.state",
                "pt": "global",
                "to": "home.rooms.coridor.sensor.doorHome.state",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.time",
                "pt": "global",
                "to": "home.rooms.coridor.sensor.doorHome.time",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 3060,
        "wires": [
            [
                "7125610ebdde7c1f",
                "04fa42d3a7979684"
            ]
        ]
    },
    {
        "id": "60ea6ffd872323a8",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "contact",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.contact",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 3060,
        "wires": [
            [
                "2c66e56645e96883"
            ]
        ]
    },
    {
        "id": "65127d1b3d807a3a",
        "type": "delay",
        "z": "c41c951762d4a8a3",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1460,
        "y": 3080,
        "wires": [
            [
                "423d2bd438ce9cc2"
            ]
        ]
    },
    {
        "id": "423d2bd438ce9cc2",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "Last+1min",
        "property": "$globalContext(\"home.rooms.coridor.sensor.doorHome.time\")+60000",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "gte",
                "v": "$globalContext(\"home.rooms.moveLast.time\")",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1650,
        "y": 3080,
        "wires": [
            [
                "4e0bbd78b3732c4a"
            ]
        ]
    },
    {
        "id": "78abb323aed3e30a",
        "type": "On_Off",
        "z": "c41c951762d4a8a3",
        "device": "70d37abe80c32a5e",
        "name": "Коридор:Свет",
        "retrievable": true,
        "response": true,
        "x": 1620,
        "y": 2880,
        "wires": [
            [
                "612777cc153311f2"
            ]
        ]
    },
    {
        "id": "213f3589d47c2ddf",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Коридор свет",
        "func": "if (global.get(\"home.rooms.coridor.lights.lamp\")) {\nnode.status({fill:\"green\",shape:\"dot\",text:\"on\"})\nnode.send({payload: global.get(\"home.rooms.moveLast.time\")}) \n}\nelse node.status({fill:\"red\",shape:\"ring\",text:\"off\"});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1480,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "96e9e54c52683eae",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Кухня свет",
        "func": "\nif (global.get(\"home.rooms.kitchen.lights.lamp\")) node.status({fill:\"green\",shape:\"dot\",text:\"on\"})\nelse node.status({fill:\"red\",shape:\"ring\",text:\"off\"});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1470,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "b9dd0fdf734e8170",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Ванная свет",
        "func": "//node.send({payload: global.get(\"home.rooms.bathroom.lights\").stateLampBath()})\nif (global.get(\"home.rooms.bathroom.lights\").stateLampBath()) node.status({fill:\"red\",shape:\"ring\",text:\"off\"})\nelse node.status({fill:\"green\",shape:\"dot\",text:\"on\"});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1470,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "174a78ace40d8997",
        "type": "complete",
        "z": "c41c951762d4a8a3",
        "name": "",
        "scope": [
            "de73baab2962637a",
            "6ca3e0b175c58a56",
            "e3d52c4c6cccfc9c",
            "576930a8697deece",
            "b3e185866eb9c27d"
        ],
        "uncaught": false,
        "x": 1480,
        "y": 120,
        "wires": [
            [
                "540fb3f4991f139e"
            ]
        ]
    },
    {
        "id": "540fb3f4991f139e",
        "type": "delay",
        "z": "c41c951762d4a8a3",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1315,
        "y": 200,
        "wires": [
            [
                "e48e1a9768bd6665"
            ]
        ],
        "l": false
    },
    {
        "id": "dfc28e837675e0d4",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "Coridor lamp",
        "property": "home.rooms.coridor.lights.lamp",
        "propertyType": "global",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1190,
        "y": 3060,
        "wires": [
            [
                "2a65ddb6f8c102d5"
            ],
            [
                "65127d1b3d807a3a"
            ]
        ]
    },
    {
        "id": "1e7bc46c0df3501f",
        "type": "On_Off",
        "z": "c41c951762d4a8a3",
        "device": "354b1a97ab509173",
        "name": "Кухня:Свет",
        "retrievable": true,
        "response": true,
        "x": 1550,
        "y": 3640,
        "wires": [
            [
                "61ad7db55d206e53"
            ]
        ]
    },
    {
        "id": "304f4fa53482db25",
        "type": "Sensor",
        "z": "c41c951762d4a8a3",
        "device": "3cd247b18e2daef9",
        "name": "Комната:Датчики:Illumination",
        "stype": "devices.properties.float",
        "instance": "illumination",
        "unit": "unit.illumination.lux",
        "x": 1250,
        "y": 760,
        "wires": []
    },
    {
        "id": "f12a569f540994ea",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Ванная общий OFF",
        "func": "node.send({topic: \"home/SwBath/set\", payload: {\"state_center\":\"OFF\",\"state_left\":\"OFF\",\"state_right\":\"OFF\"}})",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1760,
        "y": 1900,
        "wires": [
            [
                "e69afec2e74fe258"
            ]
        ]
    },
    {
        "id": "fd794de8a8f19b62",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1835,
        "y": 980,
        "wires": [],
        "l": false
    },
    {
        "id": "a8d6789adda561cb",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Ванная проем",
        "func": "//node.send({payload: global.get(\"home.rooms.bathroom.lights\").stateLampBath()})\nif (global.get(\"home.rooms.bathroom.sensor.moveBathDoor.state\")) node.status({fill:\"green\",shape:\"ring\",text:new Date(global.get(\"home.rooms.bathroom.sensor.moveBathDoor.time\")).toLocaleString()})\nelse node.status({fill:\"red\",shape:\"dot\",text:new Date(global.get(\"home.rooms.bathroom.sensor.moveBathDoor.time\")).toLocaleString()});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 260,
        "wires": [
            [
                "540fb3f4991f139e"
            ]
        ]
    },
    {
        "id": "cc594e6465e0bacf",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Human1",
        "func": "//node.send({payload: global.get(\"home.rooms.bathroom.lights\").stateLampBath()})\nif (global.get(\"home.rooms.bathroom.sensor.human1.state\")) node.status({ fill: \"green\", shape: \"ring\", text: new Date(global.get(\"home.rooms.bathroom.sensor.human1.time\")).toLocaleString()})\nelse node.status({ fill: \"red\", shape: \"dot\", text: new Date(global.get(\"home.rooms.bathroom.sensor.human1.time\")).toLocaleString()});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "b3e483ae07e249a3",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Последнее движение",
        "func": "if (global.get(\"home.rooms.moveLast.state\")) node.status({fill:\"green\",shape:\"ring\",text:new Date(global.get(\"home.rooms.moveLast.time\")).toLocaleString()}) \nelse {\n    node.status({fill:\"red\",shape:\"dot\",text:new Date(global.get(\"home.rooms.moveLast.time\")).toLocaleString()})\n    node.send({payload: global.get(\"home.rooms.moveLast.time\")})\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "441f4d0a9950467e",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Комната",
        "func": "//node.send({payload: global.get(\"home.rooms.bathroom.lights\").stateLampBath()})\nif (global.get(\"home.rooms.bedroom.sensor.moveWhite.state\")) node.status({fill:\"green\",shape:\"ring\",text:new Date(global.get(\"home.rooms.bedroom.sensor.moveWhite.time\")).toLocaleString()})\nelse node.status({fill:\"red\",shape:\"dot\",text:new Date(global.get(\"home.rooms.bedroom.sensor.moveWhite.time\")).toLocaleString()});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "f4ae07e0ff5ab7e3",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "LampBath state ON",
        "func": "if (global.get(\"home.rooms.bathroom.lights\").stateLampBath() || global.get(\"home.rooms.bathroom.sensor.human1.state\")) {return null} else return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1450,
        "y": 980,
        "wires": [
            [
                "1c92863ab6734a5d"
            ]
        ]
    },
    {
        "id": "5d8ef1edf3801359",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Кухня",
        "func": "//node.send({payload: global.get(\"home.rooms.bathroom.lights\").stateLampBath()})\nif (global.get(\"home.rooms.kitchen.sensor.moveKitchen.state\")) node.status({fill:\"green\",shape:\"ring\",text:new Date(global.get(\"home.rooms.kitchen.sensor.moveKitchen.time\")).toLocaleString()})\nelse node.status({fill:\"red\",shape:\"dot\",text:new Date(global.get(\"home.rooms.kitchen.sensor.moveKitchen.time\")).toLocaleString()});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1130,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "4364a71543edf12d",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "doorBath",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bathroom.sensor.doorBath.state",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "home.rooms.bathroom.sensor.doorBath.time",
                "pt": "global",
                "to": "$flowContext(\"timeStamp\")()",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.state",
                "pt": "global",
                "to": "home.rooms.bathroom.sensor.doorBath.state",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.time",
                "pt": "global",
                "to": "home.rooms.bathroom.sensor.doorBath.time",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "66b2bbddb48ea88c",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "SwCentral",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "SwCentral",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 2760,
        "wires": [
            [
                "e0eeca91fb1a2b8b"
            ]
        ]
    },
    {
        "id": "e0eeca91fb1a2b8b",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 2760,
        "wires": [
            [
                "6835d6a282c6138e"
            ]
        ],
        "l": false
    },
    {
        "id": "be56ef97bf2fc1b4",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 735,
        "y": 2680,
        "wires": [],
        "l": false
    },
    {
        "id": "6835d6a282c6138e",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "linkquality",
        "property": "payload.linkquality",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 720,
        "y": 2760,
        "wires": [
            [
                "4e9767ddb3f25391",
                "be56ef97bf2fc1b4",
                "c162de837b841ca2"
            ]
        ]
    },
    {
        "id": "4e9767ddb3f25391",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "state_right",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state_right",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 2760,
        "wires": [
            [
                "4c4a536df0c4975a",
                "16ab4bf080001705"
            ]
        ]
    },
    {
        "id": "c162de837b841ca2",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "state_left",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state_left",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 2880,
        "wires": [
            [
                "b04dab14daadb2b9",
                "64e85e970f6ed245"
            ]
        ]
    },
    {
        "id": "0c1178999ef3e72f",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "ON/OFF",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1180,
        "y": 2760,
        "wires": [
            [
                "9d74ebe1a0cd5885"
            ],
            [
                "1c9d610d8beda22a"
            ]
        ]
    },
    {
        "id": "9d74ebe1a0cd5885",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "ON",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.central.lights.lamp",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 2740,
        "wires": [
            [
                "76badcf601ef117b"
            ]
        ]
    },
    {
        "id": "1c9d610d8beda22a",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.central.lights.lamp",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 2780,
        "wires": [
            [
                "76badcf601ef117b"
            ]
        ]
    },
    {
        "id": "b3e185866eb9c27d",
        "type": "mqtt out",
        "z": "c41c951762d4a8a3",
        "name": "Switches",
        "topic": "",
        "qos": "0",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2f328598c5b8aac0",
        "x": 2140,
        "y": 2880,
        "wires": []
    },
    {
        "id": "76badcf601ef117b",
        "type": "On_Off",
        "z": "c41c951762d4a8a3",
        "device": "b010b8d2e9a3c06c",
        "name": "Центр:Свет",
        "retrievable": true,
        "response": true,
        "x": 1610,
        "y": 2760,
        "wires": [
            [
                "8d8c4fcffd239004"
            ]
        ]
    },
    {
        "id": "52f2ddcbbb75d9dd",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Центр свет",
        "func": "\nif (global.get(\"home.rooms.central.lights.lamp\")) node.status({fill:\"green\",shape:\"dot\",text:\"on\"})\nelse node.status({fill:\"red\",shape:\"ring\",text:\"off\"});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1470,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "c88658d8ed137133",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Комната свет",
        "func": "\nif (global.get(\"home.rooms.bedroom.lights.lampLow\") || global.get(\"home.rooms.bedroom.lights.lampHigh\")) node.status({fill:\"green\",shape:\"dot\",text:\"on\"})\nelse node.status({fill:\"red\",shape:\"ring\",text:\"off\"});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1480,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "7125610ebdde7c1f",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1055,
        "y": 3060,
        "wires": [
            [
                "dfc28e837675e0d4"
            ]
        ],
        "l": false
    },
    {
        "id": "612777cc153311f2",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Coridor",
        "func": "//node.send({topic: \"home/SwCentral/set\", payload: msg.payload ? {\"state_left\":\"ON\"} : {\"state_left\":\"OFF\"}})\nnode.send({topic: \"home/SwCoridor/set\", payload: msg.payload ? {\"state\":\"ON\"} : {\"state\":\"OFF\"}})",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1840,
        "y": 2880,
        "wires": [
            [
                "3342ed7037652575"
            ]
        ]
    },
    {
        "id": "8d8c4fcffd239004",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Central",
        "func": "node.send({topic: \"home/SwCentral/set\", payload: msg.payload ? {\"state_right\":\"ON\"} : {\"state_right\":\"OFF\"}})",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1840,
        "y": 2760,
        "wires": [
            [
                "3342ed7037652575"
            ]
        ]
    },
    {
        "id": "4e0bbd78b3732c4a",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "false",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1810,
        "y": 3080,
        "wires": [
            [
                "5db36222a47b34b7"
            ]
        ]
    },
    {
        "id": "2a65ddb6f8c102d5",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "true",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1430,
        "y": 3040,
        "wires": [
            [
                "4546b63325b4d54e"
            ]
        ]
    },
    {
        "id": "e98fa074b731653c",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1480,
        "y": 80,
        "wires": [
            [
                "540fb3f4991f139e"
            ]
        ]
    },
    {
        "id": "bba3edb93385706a",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Bath High",
        "func": "node.send({topic: \"home/SwBath/set\", payload: msg.payload ? {\"state_center\":\"ON\"} : {\"state_center\":\"OFF\"}})",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1800,
        "y": 2300,
        "wires": [
            [
                "ef516afa39b78457"
            ]
        ]
    },
    {
        "id": "64a03085735ec755",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Bath Low",
        "func": "node.send({topic: \"home/SwBath/set\", payload: msg.payload ? {\"state_right\":\"ON\"} : {\"state_right\":\"OFF\"}})",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1800,
        "y": 2220,
        "wires": [
            [
                "ef516afa39b78457"
            ]
        ]
    },
    {
        "id": "3c6348b1b6f5b935",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Bath Vent",
        "func": "node.send({topic: \"home/SwBath/set\", payload: msg.payload ? {\"state_left\":\"ON\"} : {\"state_left\":\"OFF\"}})",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1800,
        "y": 1960,
        "wires": [
            [
                "e69afec2e74fe258"
            ]
        ]
    },
    {
        "id": "335a03a69b926287",
        "type": "link out",
        "z": "c41c951762d4a8a3",
        "name": "Home",
        "links": [
            "5046ba2e25e368b1",
            "ef66cd4724b95dc9",
            "c3dbcf373f09cd19",
            "61142dd569d3a678",
            "d829e40f1228d0c8",
            "8b3662895bcdd2fe",
            "0a774eac8f31dcd5",
            "7f046c5d17865a3c",
            "5674155550affcd8",
            "6ac15c684a570f00",
            "e3e213d9d94656cb",
            "7354fe283dd33911",
            "b58404f355a1769b",
            "2e59f490c65c8911",
            "8cc1a7bac2ec8dd0",
            "edb2b8f6bceb37a7",
            "5b848e2f1a5462fc",
            "90386b112cdc507e",
            "3f482c4afb63f30f",
            "07d9d62bc2e61774"
        ],
        "x": 195,
        "y": 520,
        "wires": []
    },
    {
        "id": "5046ba2e25e368b1",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "Lumi",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 760,
        "wires": [
            [
                "0de44d74708b1e41"
            ]
        ]
    },
    {
        "id": "ef66cd4724b95dc9",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "Temperature",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 820,
        "wires": [
            [
                "b6e366205ed05d32"
            ]
        ]
    },
    {
        "id": "c3dbcf373f09cd19",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "MoveWhite",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 960,
        "wires": [
            [
                "940e44ee8f3d3154"
            ]
        ]
    },
    {
        "id": "61142dd569d3a678",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "MoveKitchen",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 1060,
        "wires": [
            [
                "a539bd93b5debcc6"
            ]
        ]
    },
    {
        "id": "8b3662895bcdd2fe",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "MoveBath",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 1140,
        "wires": [
            [
                "e02d44aa5a2267b1"
            ]
        ]
    },
    {
        "id": "0a774eac8f31dcd5",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "DoorBath",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 1240,
        "wires": [
            [
                "962c2a152fc3a121"
            ]
        ]
    },
    {
        "id": "7f046c5d17865a3c",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "Button",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 1360,
        "wires": [
            [
                "0a9243e039e932df"
            ]
        ]
    },
    {
        "id": "5674155550affcd8",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "SwRoom",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 1640,
        "wires": [
            [
                "983cab34251c6577"
            ]
        ]
    },
    {
        "id": "6ac15c684a570f00",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "SwBath",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 1900,
        "wires": [
            [
                "9cf36fbc58e483dd"
            ]
        ]
    },
    {
        "id": "e3e213d9d94656cb",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "SwCentral",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 2760,
        "wires": [
            [
                "66b2bbddb48ea88c"
            ]
        ]
    },
    {
        "id": "7354fe283dd33911",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "SwCoridor",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 3320,
        "wires": [
            [
                "892dbf364edb29c7"
            ]
        ]
    },
    {
        "id": "b58404f355a1769b",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "DoorHome",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 3060,
        "wires": [
            [
                "77104418b2ef85d3"
            ]
        ]
    },
    {
        "id": "2e59f490c65c8911",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "SwKitchen",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 3640,
        "wires": [
            [
                "9162dae5258ad37a"
            ]
        ]
    },
    {
        "id": "91bcdaa48594b75d",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Room High",
        "func": "node.send({topic: \"home/SwRoom/set\", payload: msg.payload ? {\"state_left\":\"ON\"} : {\"state_left\":\"OFF\"}})",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1730,
        "y": 1640,
        "wires": [
            [
                "2cc2c4e2e809d64d"
            ]
        ]
    },
    {
        "id": "bbefb6765c4849a4",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Room Low",
        "func": "node.send({topic: \"home/SwRoom/set\", payload: msg.payload ? {\"state_right\":\"ON\"} : {\"state_right\":\"OFF\"}})",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1730,
        "y": 1560,
        "wires": [
            [
                "2cc2c4e2e809d64d"
            ]
        ]
    },
    {
        "id": "93078390057d61f3",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 995,
        "y": 3760,
        "wires": [
            [
                "3e508e33f5df6707"
            ]
        ],
        "l": false
    },
    {
        "id": "61ad7db55d206e53",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Kitchen",
        "func": "node.send({topic: \"home/SwKitchen/set\", payload: msg.payload ? {\"state_right\":\"ON\"} : {\"state_left\":\"OFF\",\"state_right\":\"OFF\"}})",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1840,
        "y": 3640,
        "wires": [
            [
                "6ca3e0b175c58a56"
            ]
        ]
    },
    {
        "id": "7fa0e3b87c6cb9f4",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "false",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1570,
        "y": 3740,
        "wires": [
            [
                "74a4cd811e226bf3"
            ]
        ]
    },
    {
        "id": "253564f224ea4631",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "true",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1570,
        "y": 3780,
        "wires": [
            [
                "94d31378a4702a51",
                "74a4cd811e226bf3"
            ]
        ]
    },
    {
        "id": "8b999d3bd5387b6c",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "false",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1570,
        "y": 3840,
        "wires": [
            [
                "ebaf25df1d568789",
                "74a4cd811e226bf3"
            ]
        ]
    },
    {
        "id": "94d31378a4702a51",
        "type": "delay",
        "z": "c41c951762d4a8a3",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1475,
        "y": 3840,
        "wires": [
            [
                "8b999d3bd5387b6c"
            ]
        ],
        "l": false
    },
    {
        "id": "ebaf25df1d568789",
        "type": "delay",
        "z": "c41c951762d4a8a3",
        "name": "",
        "pauseType": "delay",
        "timeout": "700",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1475,
        "y": 3900,
        "wires": [
            [
                "cbb233dd6fa7d767"
            ]
        ],
        "l": false
    },
    {
        "id": "cbb233dd6fa7d767",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "true",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1570,
        "y": 3900,
        "wires": [
            [
                "d3320625d4bb6f36",
                "74a4cd811e226bf3"
            ]
        ]
    },
    {
        "id": "fdc9bf7e9ea08a5d",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "false",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1570,
        "y": 3960,
        "wires": [
            [
                "9008fe91c8dc65b0",
                "74a4cd811e226bf3"
            ]
        ]
    },
    {
        "id": "d3320625d4bb6f36",
        "type": "delay",
        "z": "c41c951762d4a8a3",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1475,
        "y": 3960,
        "wires": [
            [
                "fdc9bf7e9ea08a5d"
            ]
        ],
        "l": false
    },
    {
        "id": "9008fe91c8dc65b0",
        "type": "delay",
        "z": "c41c951762d4a8a3",
        "name": "",
        "pauseType": "delay",
        "timeout": "700",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1475,
        "y": 4020,
        "wires": [
            [
                "712c9d481ff74e4f"
            ]
        ],
        "l": false
    },
    {
        "id": "712c9d481ff74e4f",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "true",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1570,
        "y": 4020,
        "wires": [
            [
                "74a4cd811e226bf3"
            ]
        ]
    },
    {
        "id": "46a8d2c17d0fd6a4",
        "type": "trigger",
        "z": "c41c951762d4a8a3",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "nul",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 855,
        "y": 1240,
        "wires": [
            [
                "cb95e896478aa225"
            ]
        ],
        "l": false
    },
    {
        "id": "2c66e56645e96883",
        "type": "trigger",
        "z": "c41c951762d4a8a3",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "nul",
        "duration": "500",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 815,
        "y": 3060,
        "wires": [
            [
                "043858ba18b3fd54"
            ]
        ],
        "l": false
    },
    {
        "id": "aad17c84ee2c3cab",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Коридор (aqara)",
        "func": "//node.send({payload: global.get(\"home.rooms.bathroom.lights\").stateLampBath()})\nif (global.get(\"home.rooms.coridor.sensor.aqara.state\")) {\n    node.status({fill:\"green\",shape:\"ring\",text:new Date(global.get(\"home.rooms.coridor.sensor.aqara.time\")).toLocaleString()})\n    node.send({payload: \"clear\"})\n}\nelse node.status({fill:\"red\",shape:\"dot\",text:new Date(global.get(\"home.rooms.coridor.sensor.aqara.time\")).toLocaleString()});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "72530dd621decc12",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Ванная внутри",
        "func": "//node.send({payload: global.get(\"home.rooms.bathroom.lights\").stateLampBath()})\nif (global.get(\"home.rooms.bathroom.sensor.moveBathIn.state\")) node.status({fill:\"green\",shape:\"ring\",text:new Date(global.get(\"home.rooms.bathroom.sensor.moveBathIn.time\")).toLocaleString()})\nelse node.status({fill:\"red\",shape:\"dot\",text:new Date(global.get(\"home.rooms.bathroom.sensor.moveBathIn.time\")).toLocaleString()});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "c318c316beb63979",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "Коридор",
        "links": [
            "f3aed31d290db938"
        ],
        "x": 1385,
        "y": 2960,
        "wires": [
            [
                "89fa6a526a1f500d"
            ]
        ]
    },
    {
        "id": "f3aed31d290db938",
        "type": "link out",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "mode": "link",
        "links": [
            "7787f5c8ef1fb55b",
            "a2e066c419e6be2e",
            "c318c316beb63979",
            "ce6f8edea271c145",
            "1b8832b5de312038"
        ],
        "x": 1335,
        "y": 120,
        "wires": []
    },
    {
        "id": "a2e066c419e6be2e",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "Комната",
        "links": [
            "f3aed31d290db938"
        ],
        "x": 1675,
        "y": 1480,
        "wires": [
            [
                "07bcf83e6a7212a9"
            ]
        ]
    },
    {
        "id": "ce6f8edea271c145",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "Ванная",
        "links": [
            "f3aed31d290db938"
        ],
        "x": 1615,
        "y": 1900,
        "wires": [
            [
                "f12a569f540994ea"
            ]
        ]
    },
    {
        "id": "7787f5c8ef1fb55b",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "Кухня",
        "links": [
            "f3aed31d290db938"
        ],
        "x": 1735,
        "y": 3600,
        "wires": [
            [
                "61ad7db55d206e53"
            ]
        ]
    },
    {
        "id": "1b8832b5de312038",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "Центр",
        "links": [
            "f3aed31d290db938"
        ],
        "x": 1285,
        "y": 2800,
        "wires": [
            [
                "1c9d610d8beda22a"
            ]
        ]
    },
    {
        "id": "bfc70346bd0c9f24",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "timer",
        "func": "function fmtMSS(s){return(s-(s%=60))/60+(9<s?':':':0')+s}\n//fmtMSS(current) (current != flow.get(\"timer\")) || \nfunction printNumbers() {\n    //let current = flow.get(\"timer\");\n    let count = 0;\n    let timerId = setInterval(function() {\n        count++;\n        node.status({fill:\"green\",shape:\"ring\",text:fmtMSS(count)})\n        if (flow.get(\"timer\") == 0) {\n            clearInterval(timerId)\n            count = 0\n            node.status({fill:\"red\",shape:\"ring\",text:fmtMSS(0)})\n        }\n    }, 1000);\n}\n\n// использование:\nif (msg.payload) {\n    flow.set(\"timer\", 0) \n    printNumbers()\n    \n    flow.set(\"timer\", 1)\n    printNumbers()\n}\nelse { \n    flow.set(\"timer\", 0) \n    printNumbers()\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1970,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "3f8ddbbdc543f4c0",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 1790,
        "y": 160,
        "wires": [
            [
                "bfc70346bd0c9f24"
            ]
        ]
    },
    {
        "id": "d062e97279937556",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 1790,
        "y": 100,
        "wires": [
            [
                "bfc70346bd0c9f24"
            ]
        ]
    },
    {
        "id": "77076a124ada36d6",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "msg.payload = new Date(msg.payload)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 360,
        "wires": [
            [
                "a0a6f3cd1e28787f"
            ]
        ]
    },
    {
        "id": "5c79390f96f5ad51",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1640436223539",
        "payloadType": "num",
        "x": 130,
        "y": 360,
        "wires": [
            [
                "77076a124ada36d6"
            ]
        ]
    },
    {
        "id": "a0a6f3cd1e28787f",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 490,
        "y": 360,
        "wires": []
    },
    {
        "id": "8c6aa383cef92e73",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Входная дверь",
        "func": "if (global.get(\"home.rooms.coridor.sensor.doorHome.state\")) node.status({fill:\"red\",shape:\"dot\",text:new Date(global.get(\"home.rooms.coridor.sensor.doorHome.time\")).toLocaleString()})\nelse node.status({fill:\"green\",shape:\"ring\",text:new Date(global.get(\"home.rooms.coridor.sensor.doorHome.time\")).toLocaleString()});\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "59a959a21ae9b6cc",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Ванная дверь",
        "func": "if (global.get(\"home.rooms.bathroom.sensor.doorBath.state\")) node.status({fill:\"red\",shape:\"dot\",text:new Date(global.get(\"home.rooms.bathroom.sensor.doorBath.time\")).toLocaleString()})\nelse node.status({fill:\"green\",shape:\"ring\",text:new Date(global.get(\"home.rooms.bathroom.sensor.doorBath.time\")).toLocaleString()});\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "bda4d944899372eb",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1095,
        "y": 3260,
        "wires": [],
        "l": false
    },
    {
        "id": "b04dab14daadb2b9",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 955,
        "y": 2820,
        "wires": [],
        "l": false
    },
    {
        "id": "4c4a536df0c4975a",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1035,
        "y": 2760,
        "wires": [
            [
                "0c1178999ef3e72f"
            ]
        ],
        "l": false
    },
    {
        "id": "12a6c60970fa9297",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1035,
        "y": 3320,
        "wires": [
            [
                "bda4d944899372eb",
                "e52ea210cfe03e8d"
            ]
        ],
        "l": false
    },
    {
        "id": "64e85e970f6ed245",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 1035,
        "y": 2880,
        "wires": [
            [
                "392b863252425793",
                "1b0442745708df6a"
            ]
        ],
        "l": false
    },
    {
        "id": "1b0442745708df6a",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1155,
        "y": 2820,
        "wires": [],
        "l": false
    },
    {
        "id": "adaa189416cbcfd1",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 825,
        "y": 3260,
        "wires": [],
        "l": false
    },
    {
        "id": "e52ea210cfe03e8d",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "ON/OFF",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "OFF",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1180,
        "y": 3320,
        "wires": [
            [
                "c92787d07026ce4d"
            ],
            [
                "6574e404dc362e16"
            ]
        ]
    },
    {
        "id": "c92787d07026ce4d",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "ON",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 3300,
        "wires": [
            [
                "21aa9a0a80807757"
            ]
        ]
    },
    {
        "id": "6574e404dc362e16",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 3340,
        "wires": [
            [
                "21aa9a0a80807757"
            ]
        ]
    },
    {
        "id": "dec20595df7fe0f8",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 1625,
        "y": 3300,
        "wires": [
            [
                "195170539ff68435"
            ]
        ],
        "l": false
    },
    {
        "id": "3414d2e01ccfc62b",
        "type": "mqtt in",
        "z": "c41c951762d4a8a3",
        "name": "home",
        "topic": "Mikrotik/user",
        "qos": "2",
        "datatype": "auto",
        "broker": "2f328598c5b8aac0",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 770,
        "y": 4400,
        "wires": [
            [
                "e7bf7069fb39fcc2"
            ]
        ]
    },
    {
        "id": "44c162417d556312",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "user",
        "active": true,
        "tosidebar": false,
        "console": false,
        "tostatus": true,
        "complete": "payload.user",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1035,
        "y": 4320,
        "wires": [],
        "l": false
    },
    {
        "id": "e7bf7069fb39fcc2",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 910,
        "y": 4400,
        "wires": [
            [
                "44c162417d556312",
                "66b6d0eb665412a1",
                "ef449d2836c1e51b"
            ]
        ]
    },
    {
        "id": "ce16ccc836e8efb7",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "not un",
        "property": "data",
        "propertyType": "flow",
        "rules": [
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 270,
        "y": 60,
        "wires": [
            [
                "e67e534c20398aef"
            ]
        ]
    },
    {
        "id": "7d77beaae2bccf7a",
        "type": "Event",
        "z": "c41c951762d4a8a3",
        "device": "2fe36fc12d1eb493",
        "name": "Ванная:Дверь:open",
        "stype": "devices.properties.event",
        "instance": "open",
        "events": [
            "opened",
            "closed"
        ],
        "x": 1640,
        "y": 1260,
        "wires": []
    },
    {
        "id": "04fa42d3a7979684",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "Дверь",
        "property": "home.rooms.coridor.sensor.doorHome.state",
        "propertyType": "global",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1110,
        "y": 3160,
        "wires": [
            [
                "9989a5749239d007"
            ],
            [
                "9321b32ed254d179"
            ]
        ]
    },
    {
        "id": "9989a5749239d007",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": " opened",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1280,
        "y": 3140,
        "wires": [
            [
                "921eb41a6e85caa1"
            ]
        ]
    },
    {
        "id": "9321b32ed254d179",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "closed",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "closed",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1270,
        "y": 3180,
        "wires": [
            [
                "921eb41a6e85caa1"
            ]
        ]
    },
    {
        "id": "921eb41a6e85caa1",
        "type": "Event",
        "z": "c41c951762d4a8a3",
        "device": "4cfa43921fd99ad3",
        "name": "Прихожая:Дверь:open",
        "stype": "devices.properties.event",
        "instance": "open",
        "events": [
            "opened",
            "closed"
        ],
        "x": 1500,
        "y": 3140,
        "wires": []
    },
    {
        "id": "a4bdffdf579ec301",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "ON",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 1530,
        "y": 1500,
        "wires": [
            [
                "bbefb6765c4849a4"
            ]
        ]
    },
    {
        "id": "1c9e1f739db3c62a",
        "type": "alice-local-out",
        "z": "c41c951762d4a8a3",
        "name": "Кондер",
        "token": "324e986f5718e2ac",
        "station_id": "M00SSB30038MEB",
        "debugFlag": false,
        "input": "voice",
        "payload": "payload",
        "payloadType": "msg",
        "volume": "50",
        "volumeFlag": true,
        "stopListening": true,
        "pauseMusic": false,
        "noTrack": "",
        "whisper": false,
        "ttsVoice": "",
        "ttsEffect": "",
        "x": 2000,
        "y": 4480,
        "wires": []
    },
    {
        "id": "2fe53ae2b98336d4",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Включи кондиционер",
        "func": "global.set(\"home.rooms.bedroom.devices.conditioner.state\", true);\nglobal.set(\"home.rooms.bedroom.devices.conditioner.time\", flow.get(\"timeStamp\")());\nmsg.payload = \"Включи кондиционер\"\nnode.status({ fill: \"green\", shape: \"ring\", text: new Date(global.get(\"home.rooms.bedroom.devices.conditioner.time\")).toLocaleString() })\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1720,
        "y": 4380,
        "wires": [
            [
                "1c9e1f739db3c62a",
                "eeb43482c71c2385",
                "7bf7f54274e0c84c"
            ]
        ]
    },
    {
        "id": "a794395c58bbb132",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": ">= 30",
        "property": "home.rooms.bedroom.sensor.temperature",
        "propertyType": "global",
        "rules": [
            {
                "t": "gte",
                "v": "30",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1530,
        "y": 4380,
        "wires": [
            [
                "2fe53ae2b98336d4"
            ]
        ]
    },
    {
        "id": "128bfe6fb8f12f4c",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Выключи кондиционер",
        "func": "global.set(\"home.rooms.bedroom.devices.conditioner.state\", false);\nglobal.set(\"home.rooms.bedroom.devices.conditioner.time\", flow.get(\"timeStamp\")());\nmsg.payload = \"Выключи кондиционер\"\nnode.status({ fill: \"red\", shape: \"ring\", text: new Date(global.get(\"home.rooms.bedroom.devices.conditioner.time\")).toLocaleString() })\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1730,
        "y": 4500,
        "wires": [
            [
                "1c9e1f739db3c62a",
                "89738dc9dc22c954",
                "72be97ce7f01ef96"
            ]
        ]
    },
    {
        "id": "66b6d0eb665412a1",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "Я дома",
        "property": "payload.user",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1080,
        "y": 4400,
        "wires": [
            [
                "601c0126b32967e1",
                "638199839570ec62"
            ],
            [
                "c9698ef5c8324e75"
            ]
        ]
    },
    {
        "id": "ef449d2836c1e51b",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "t°",
        "active": true,
        "tosidebar": false,
        "console": false,
        "tostatus": true,
        "complete": "$globalContext(\"home.rooms.bedroom.sensor.temperature\")\t",
        "targetType": "jsonata",
        "statusVal": "$globalContext(home.rooms.bedroom.sensor.temperature)\t",
        "statusType": "auto",
        "x": 1035,
        "y": 4260,
        "wires": [],
        "l": false
    },
    {
        "id": "ae44cec19838dca7",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "< 27",
        "property": "home.rooms.bedroom.sensor.temperature",
        "propertyType": "global",
        "rules": [
            {
                "t": "lt",
                "v": "27",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1530,
        "y": 4460,
        "wires": [
            [
                "128bfe6fb8f12f4c"
            ],
            [
                "cad61023219977eb"
            ]
        ]
    },
    {
        "id": "c9698ef5c8324e75",
        "type": "trigger",
        "z": "c41c951762d4a8a3",
        "name": "",
        "op1": "true",
        "op2": "true",
        "op1type": "bool",
        "op2type": "bool",
        "duration": "0",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1280,
        "y": 4500,
        "wires": [
            [
                "c9d1b9866e723e36"
            ]
        ]
    },
    {
        "id": "601c0126b32967e1",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "reset",
        "func": "msg.reset = true\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 4460,
        "wires": [
            [
                "c9698ef5c8324e75"
            ]
        ]
    },
    {
        "id": "6beaacd923c58f82",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2135,
        "y": 4400,
        "wires": [],
        "l": false
    },
    {
        "id": "cad61023219977eb",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "conditioner is ON",
        "property": "home.rooms.bedroom.devices.conditioner.state",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1730,
        "y": 4460,
        "wires": [
            [
                "eeb43482c71c2385"
            ]
        ]
    },
    {
        "id": "eeb43482c71c2385",
        "type": "trigger",
        "z": "c41c951762d4a8a3",
        "name": "30 мин",
        "op1": "",
        "op2": "true",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "30",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 2000,
        "y": 4400,
        "wires": [
            [
                "ae44cec19838dca7",
                "6beaacd923c58f82"
            ]
        ]
    },
    {
        "id": "89738dc9dc22c954",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "reset",
        "func": "msg.reset = true\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1970,
        "y": 4340,
        "wires": [
            [
                "eeb43482c71c2385"
            ]
        ]
    },
    {
        "id": "305125d1cfd7e56e",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "Блок",
        "rules": [
            {
                "t": "set",
                "p": "cond",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2150,
        "y": 4560,
        "wires": [
            [
                "8d0ac0c882ebd1b9"
            ]
        ]
    },
    {
        "id": "6e097cd1bfe44df8",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "cond",
        "rules": [
            {
                "t": "set",
                "p": "cond",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1090,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "638199839570ec62",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "блок",
        "func": "if (flow.get(\"cond\"))  {\n    node.status({ fill: \"green\", shape: \"dot\", text: \"открыт\" });\n    return msg\n} \nelse {\n    node.status({ fill: \"red\", shape: \"dot\", text: \"закрыт\" });\n    return null\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1330,
        "y": 4380,
        "wires": [
            [
                "a794395c58bbb132"
            ]
        ],
        "outputLabels": [
            "не совпадает"
        ]
    },
    {
        "id": "bcfe6bccd6b7b4e2",
        "type": "On_Off",
        "z": "c41c951762d4a8a3",
        "device": "939815ebfe2ebd0a",
        "name": "Комната:Кондер",
        "retrievable": true,
        "response": true,
        "x": 1250,
        "y": 4560,
        "wires": [
            [
                "d61f1d827bc77258",
                "6de149340e985c07"
            ]
        ]
    },
    {
        "id": "d61f1d827bc77258",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "Статус",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bedroom.devices.conditioner.state",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "home.rooms.bedroom.devices.conditioner.time",
                "pt": "global",
                "to": "$flowContext(\"timeStamp\")()",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1500,
        "y": 4600,
        "wires": [
            []
        ]
    },
    {
        "id": "7bf7f54274e0c84c",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "Блок",
        "rules": [
            {
                "t": "set",
                "p": "cond",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1690,
        "y": 4320,
        "wires": [
            [
                "4d314b3c29038691"
            ]
        ]
    },
    {
        "id": "6de149340e985c07",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "false",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1510,
        "y": 4560,
        "wires": [
            [
                "af66f5a760c367d1",
                "805d3757513ccfdc",
                "7bf7f54274e0c84c"
            ]
        ]
    },
    {
        "id": "af66f5a760c367d1",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "reset",
        "func": "msg.reset = true\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1770,
        "y": 4560,
        "wires": [
            [
                "eeb43482c71c2385",
                "72be97ce7f01ef96"
            ]
        ]
    },
    {
        "id": "5c5dab860890f31c",
        "type": "trigger",
        "z": "c41c951762d4a8a3",
        "name": "30 мин",
        "op1": "",
        "op2": "true",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "30",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 2000,
        "y": 4560,
        "wires": [
            [
                "305125d1cfd7e56e"
            ]
        ]
    },
    {
        "id": "805d3757513ccfdc",
        "type": "delay",
        "z": "c41c951762d4a8a3",
        "name": "250 mc",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1760,
        "y": 4600,
        "wires": [
            [
                "72be97ce7f01ef96"
            ]
        ]
    },
    {
        "id": "8d0ac0c882ebd1b9",
        "type": "link out",
        "z": "c41c951762d4a8a3",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "89d860a66b6d005c"
        ],
        "x": 2245,
        "y": 4560,
        "wires": []
    },
    {
        "id": "89d860a66b6d005c",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "link in 1",
        "links": [
            "8d0ac0c882ebd1b9",
            "4d314b3c29038691"
        ],
        "x": 1205,
        "y": 4360,
        "wires": [
            [
                "638199839570ec62"
            ]
        ]
    },
    {
        "id": "4d314b3c29038691",
        "type": "link out",
        "z": "c41c951762d4a8a3",
        "name": "link out 2",
        "mode": "link",
        "links": [
            "89d860a66b6d005c"
        ],
        "x": 1785,
        "y": 4320,
        "wires": []
    },
    {
        "id": "c9d1b9866e723e36",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "conditioner is ON",
        "property": "home.rooms.bedroom.devices.conditioner.state",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1490,
        "y": 4500,
        "wires": [
            [
                "128bfe6fb8f12f4c"
            ]
        ]
    },
    {
        "id": "7076d87cb9149e7e",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "TemperatureBath",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "TemperatureBath",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 4080,
        "wires": [
            [
                "1057a1f39b3698bc"
            ]
        ]
    },
    {
        "id": "1057a1f39b3698bc",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 625,
        "y": 4080,
        "wires": [
            [
                "dde1285e9f5a8c9e",
                "d8894fdde22a6bbf"
            ]
        ],
        "l": false
    },
    {
        "id": "dde1285e9f5a8c9e",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "temperature",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bathroom.sensor.temperature",
                "pt": "global",
                "to": "payload.temperature",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 4080,
        "wires": [
            [
                "1a3d9a70b5b5a9fc"
            ]
        ]
    },
    {
        "id": "d8894fdde22a6bbf",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "humidity",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bathroom.sensor.humidity",
                "pt": "global",
                "to": "payload.humidity",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 4140,
        "wires": [
            [
                "8f9b1d01858f610f"
            ]
        ]
    },
    {
        "id": "1a3d9a70b5b5a9fc",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "Home.temp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "home.rooms.bathroom.sensor.temperature",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 4080,
        "wires": [
            [
                "8eff580830b4826c"
            ]
        ]
    },
    {
        "id": "8f9b1d01858f610f",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "Home.humidity",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "home.rooms.bathroom.sensor.humidity",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 4140,
        "wires": [
            [
                "75475854ca872b56"
            ]
        ]
    },
    {
        "id": "75475854ca872b56",
        "type": "Sensor",
        "z": "c41c951762d4a8a3",
        "device": "a825d5fc0b8b4bea",
        "name": "Ванная:Датчики:Humidity",
        "stype": "devices.properties.float",
        "instance": "humidity",
        "unit": "unit.percent",
        "x": 1150,
        "y": 4140,
        "wires": []
    },
    {
        "id": "8eff580830b4826c",
        "type": "Sensor",
        "z": "c41c951762d4a8a3",
        "device": "a825d5fc0b8b4bea",
        "name": "Ванная:Датчики:Temperature",
        "stype": "devices.properties.float",
        "instance": "temperature",
        "unit": "unit.temperature.celsius",
        "x": 1170,
        "y": 4080,
        "wires": []
    },
    {
        "id": "5b848e2f1a5462fc",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "Temperature",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 4080,
        "wires": [
            [
                "7076d87cb9149e7e"
            ]
        ]
    },
    {
        "id": "0d081e836d30c616",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "Aqara",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Aqara",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 450,
        "y": 2960,
        "wires": [
            [
                "bc5650c668824666"
            ]
        ]
    },
    {
        "id": "bc5650c668824666",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 2960,
        "wires": [
            [
                "4a895149ee077fdc"
            ]
        ],
        "l": false
    },
    {
        "id": "90386b112cdc507e",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "DoorBath",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 2960,
        "wires": [
            [
                "0d081e836d30c616"
            ]
        ]
    },
    {
        "id": "1fbefc23af9b11ca",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "debug 2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 585,
        "y": 2880,
        "wires": [],
        "l": false
    },
    {
        "id": "4a895149ee077fdc",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 685,
        "y": 2960,
        "wires": [
            [
                "1fbefc23af9b11ca",
                "4ae6a95272849bb7"
            ]
        ],
        "l": false
    },
    {
        "id": "4ae6a95272849bb7",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "event",
        "property": "payload.presence_event",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "enter",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "leave",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 2960,
        "wires": [
            [
                "e8d5ac146af50038"
            ],
            [
                "08d7d4547f1a8cfe"
            ]
        ]
    },
    {
        "id": "9f04e2466697c283",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "Lamp set On",
        "rules": [
            {
                "t": "set",
                "p": "lamp",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 4680,
        "wires": [
            [
                "749ad7b5f6282380"
            ]
        ]
    },
    {
        "id": "84ad67e900aa1f74",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "Lamp set Off",
        "rules": [
            {
                "t": "set",
                "p": "lamp",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 4720,
        "wires": [
            [
                "749ad7b5f6282380"
            ]
        ]
    },
    {
        "id": "749ad7b5f6282380",
        "type": "link out",
        "z": "c41c951762d4a8a3",
        "name": "Aqara",
        "mode": "link",
        "links": [
            "dfc32e9ed474a49b"
        ],
        "x": 455,
        "y": 4700,
        "wires": []
    },
    {
        "id": "dfc32e9ed474a49b",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "Aqara in 2",
        "links": [
            "749ad7b5f6282380"
        ],
        "x": 545,
        "y": 4700,
        "wires": [
            [
                "af1a380647b92ef1"
            ]
        ]
    },
    {
        "id": "f17bd33bf6a813e0",
        "type": "Mode",
        "z": "c41c951762d4a8a3",
        "device": "354b1a97ab509173",
        "name": "Кухня:Свет",
        "instance": "input_source",
        "modes": [
            "one",
            "two",
            "three",
            "four"
        ],
        "response": true,
        "x": 1830,
        "y": 4020,
        "wires": [
            [
                "738a1a16174b8b1c",
                "8dc5ef1a3c33e815",
                "1119bdb2ba0078d3"
            ]
        ]
    },
    {
        "id": "738a1a16174b8b1c",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "debug 3",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2060,
        "y": 4020,
        "wires": []
    },
    {
        "id": "1bf49ddf51ae6709",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "one",
        "payloadType": "str",
        "x": 1610,
        "y": 4100,
        "wires": [
            [
                "f17bd33bf6a813e0"
            ]
        ]
    },
    {
        "id": "09bdf5c0463c3f50",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "two",
        "payloadType": "str",
        "x": 1610,
        "y": 4140,
        "wires": [
            [
                "f17bd33bf6a813e0"
            ]
        ]
    },
    {
        "id": "8dc5ef1a3c33e815",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "three",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "three",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1790,
        "y": 3780,
        "wires": [
            [
                "2f6b46a2bfd4ce0b"
            ]
        ]
    },
    {
        "id": "2f6b46a2bfd4ce0b",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "false",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1950,
        "y": 3780,
        "wires": [
            [
                "61ad7db55d206e53",
                "fad8bb5ccbeed9f8"
            ]
        ]
    },
    {
        "id": "fad8bb5ccbeed9f8",
        "type": "delay",
        "z": "c41c951762d4a8a3",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2095,
        "y": 3780,
        "wires": [
            [
                "c28952f94c712445"
            ]
        ],
        "l": false
    },
    {
        "id": "c28952f94c712445",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "true",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1950,
        "y": 3820,
        "wires": [
            [
                "61ad7db55d206e53",
                "b8022d4caedf6427"
            ]
        ]
    },
    {
        "id": "433c7949e416cece",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "false",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1950,
        "y": 3860,
        "wires": [
            [
                "53a85997a5b1b617",
                "61ad7db55d206e53"
            ]
        ]
    },
    {
        "id": "53a85997a5b1b617",
        "type": "delay",
        "z": "c41c951762d4a8a3",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2095,
        "y": 3860,
        "wires": [
            [
                "cb4d7c5ea828f6c6"
            ]
        ],
        "l": false
    },
    {
        "id": "cb4d7c5ea828f6c6",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "true",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1950,
        "y": 3900,
        "wires": [
            [
                "61ad7db55d206e53"
            ]
        ]
    },
    {
        "id": "b8022d4caedf6427",
        "type": "delay",
        "z": "c41c951762d4a8a3",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2095,
        "y": 3820,
        "wires": [
            [
                "433c7949e416cece"
            ]
        ],
        "l": false
    },
    {
        "id": "1119bdb2ba0078d3",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "two",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "two",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1790,
        "y": 3860,
        "wires": [
            [
                "433c7949e416cece"
            ]
        ]
    },
    {
        "id": "195170539ff68435",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "Central",
        "func": "node.send({topic: \"home/SwCentral/set\", payload: msg.payload ? {\"state_left\":\"ON\"} : {\"state_left\":\"OFF\"}})",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1840,
        "y": 3300,
        "wires": [
            [
                "3342ed7037652575"
            ]
        ]
    },
    {
        "id": "b947529834b5bf72",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "moveAqara",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.coridor.sensor.aqara.state",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "home.rooms.coridor.sensor.aqara.time",
                "pt": "global",
                "to": "$flowContext(\"timeStamp\")()",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.state",
                "pt": "global",
                "to": "home.rooms.coridor.sensor.aqara.state",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.time",
                "pt": "global",
                "to": "home.rooms.coridor.sensor.aqara.time",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1110,
        "y": 2960,
        "wires": [
            []
        ]
    },
    {
        "id": "b752372b84761fec",
        "type": "trigger",
        "z": "c41c951762d4a8a3",
        "name": "1 min OFF",
        "op1": "",
        "op2": "false",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1315,
        "y": 2980,
        "wires": [
            [
                "89fa6a526a1f500d"
            ]
        ],
        "l": false
    },
    {
        "id": "b0ff5bd12b65a806",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "reset",
        "func": "msg.reset = true\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1255,
        "y": 2940,
        "wires": [
            [
                "b752372b84761fec"
            ]
        ],
        "l": false
    },
    {
        "id": "08d7d4547f1a8cfe",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "false",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 2980,
        "wires": [
            [
                "b752372b84761fec",
                "b947529834b5bf72"
            ]
        ]
    },
    {
        "id": "e8d5ac146af50038",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "true",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 2940,
        "wires": [
            [
                "88f00b03c015c655",
                "b947529834b5bf72"
            ]
        ]
    },
    {
        "id": "16ab4bf080001705",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1045,
        "y": 2700,
        "wires": [],
        "l": false
    },
    {
        "id": "5db36222a47b34b7",
        "type": "link out",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "mode": "link",
        "links": [
            "fc0feec3f8327304"
        ],
        "x": 1905,
        "y": 3080,
        "wires": []
    },
    {
        "id": "fc0feec3f8327304",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "OFF2",
        "links": [
            "5db36222a47b34b7",
            "a5c2fef54092e312"
        ],
        "x": 1255,
        "y": 60,
        "wires": [
            [
                "f3aed31d290db938"
            ]
        ]
    },
    {
        "id": "00767cc255dd5138",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "Human1",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Human1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 460,
        "y": 2140,
        "wires": [
            [
                "8f7a1baf1ec3bdf5"
            ]
        ]
    },
    {
        "id": "8f7a1baf1ec3bdf5",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 2140,
        "wires": [
            [
                "4bd16f7e716ffb08"
            ]
        ],
        "l": false
    },
    {
        "id": "3f482c4afb63f30f",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "DoorBath",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 2140,
        "wires": [
            [
                "00767cc255dd5138"
            ]
        ]
    },
    {
        "id": "008125d328c93830",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "debug 4",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 845,
        "y": 2080,
        "wires": [],
        "l": false
    },
    {
        "id": "4bd16f7e716ffb08",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload.presence",
        "topi": "topic",
        "x": 775,
        "y": 2140,
        "wires": [
            [
                "13f47e4044026db8"
            ]
        ],
        "l": false
    },
    {
        "id": "8317f837f74f2f48",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1640,
        "y": 3200,
        "wires": [
            [
                "4e0bbd78b3732c4a"
            ]
        ]
    },
    {
        "id": "13f47e4044026db8",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "presence",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.presence",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 2140,
        "wires": [
            [
                "008125d328c93830",
                "66dd99fd8b8b514e"
            ]
        ]
    },
    {
        "id": "66dd99fd8b8b514e",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "moveHuman1",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bathroom.sensor.human1.state",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "home.rooms.bathroom.sensor.human1.time",
                "pt": "global",
                "to": "$flowContext(\"timeStamp\")()",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.state",
                "pt": "global",
                "to": "home.rooms.bathroom.sensor.human1.state",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "home.rooms.bathroom.sensor.human1.time",
                "pt": "global",
                "to": "home.rooms.coridor.sensor.aqara.time",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1280,
        "y": 2140,
        "wires": [
            [
                "acc7ad47dea17535",
                "b16c39fce743ec0c",
                "d4106cf35330bb69"
            ]
        ]
    },
    {
        "id": "acc7ad47dea17535",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "is false",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1480,
        "y": 2140,
        "wires": [
            [
                "bba3edb93385706a",
                "fe46112f2b0271d6",
                "58c9cccc0fbe5e0a"
            ]
        ]
    },
    {
        "id": "0bdcbb395781b3a2",
        "type": "json",
        "z": "c41c951762d4a8a3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 595,
        "y": 2380,
        "wires": [
            [
                "cc72ba0fdb3ae158"
            ]
        ],
        "l": false
    },
    {
        "id": "39f9de20a393f615",
        "type": "rbe",
        "z": "c41c951762d4a8a3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 835,
        "y": 2380,
        "wires": [
            [
                "921e53ca7d458c15"
            ]
        ],
        "l": false
    },
    {
        "id": "cc72ba0fdb3ae158",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "occupancy",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.occupancy",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 2380,
        "wires": [
            [
                "39f9de20a393f615"
            ]
        ]
    },
    {
        "id": "07d9d62bc2e61774",
        "type": "link in",
        "z": "c41c951762d4a8a3",
        "name": "SwBath",
        "links": [
            "335a03a69b926287"
        ],
        "x": 335,
        "y": 2380,
        "wires": [
            [
                "d7893c4a7d474b23"
            ]
        ]
    },
    {
        "id": "921e53ca7d458c15",
        "type": "change",
        "z": "c41c951762d4a8a3",
        "name": "moveBathIn",
        "rules": [
            {
                "t": "set",
                "p": "home.rooms.bathroom.sensor.moveBathIn.state",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "home.rooms.bathroom.sensor.moveBathIn.time",
                "pt": "global",
                "to": "$flowContext(\"timeStamp\")()",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.state",
                "pt": "global",
                "to": "home.rooms.bathroom.sensor.moveBathIn.state",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "home.rooms.moveLast.time",
                "pt": "global",
                "to": "home.rooms.bathroom.sensor.moveBathIn.time",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 2380,
        "wires": [
            [
                "4ffcbe71dca406cc",
                "5bf4c9ce30b1a3f9"
            ]
        ]
    },
    {
        "id": "d7893c4a7d474b23",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "MoveBathIn",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "MoveBathIn",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 470,
        "y": 2380,
        "wires": [
            [
                "0bdcbb395781b3a2"
            ]
        ]
    },
    {
        "id": "d4106cf35330bb69",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "is true",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1470,
        "y": 2040,
        "wires": [
            [
                "e288404b897129e9",
                "a47d41d3644af027"
            ]
        ]
    },
    {
        "id": "fe46112f2b0271d6",
        "type": "trigger",
        "z": "c41c951762d4a8a3",
        "name": "2 min OFF",
        "op1": "",
        "op2": "false",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "2",
        "extend": false,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1690,
        "y": 2140,
        "wires": [
            [
                "3c6348b1b6f5b935"
            ]
        ]
    },
    {
        "id": "58c9cccc0fbe5e0a",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "reset",
        "func": "msg.reset = true\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1555,
        "y": 2080,
        "wires": [
            [
                "e288404b897129e9"
            ]
        ],
        "l": false
    },
    {
        "id": "5bf4c9ce30b1a3f9",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "is false",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1200,
        "y": 2420,
        "wires": [
            [
                "a25346176180285a"
            ]
        ]
    },
    {
        "id": "4ffcbe71dca406cc",
        "type": "switch",
        "z": "c41c951762d4a8a3",
        "name": "is true",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1190,
        "y": 2380,
        "wires": [
            [
                "388c8f23408d56f6",
                "50b43888a0f91079"
            ]
        ]
    },
    {
        "id": "a25346176180285a",
        "type": "trigger",
        "z": "c41c951762d4a8a3",
        "name": "2m OFF",
        "op1": "",
        "op2": "false",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "2",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1600,
        "y": 2420,
        "wires": [
            [
                "bba3edb93385706a"
            ]
        ]
    },
    {
        "id": "388c8f23408d56f6",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "reset",
        "func": "msg.reset = true\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1425,
        "y": 2380,
        "wires": [
            [
                "a25346176180285a"
            ]
        ],
        "l": false
    },
    {
        "id": "a47d41d3644af027",
        "type": "function",
        "z": "c41c951762d4a8a3",
        "name": "reset",
        "func": "msg.reset = true\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1595,
        "y": 2100,
        "wires": [
            [
                "fe46112f2b0271d6"
            ]
        ],
        "l": false
    },
    {
        "id": "1b2528dfb266f964",
        "type": "inject",
        "z": "c41c951762d4a8a3",
        "name": "OFF",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "OFF",
        "payloadType": "str",
        "x": 1550,
        "y": 1840,
        "wires": [
            [
                "f12a569f540994ea"
            ]
        ]
    },
    {
        "id": "1d9d19ad36c7a455",
        "type": "debug",
        "z": "c41c951762d4a8a3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1745,
        "y": 2960,
        "wires": [],
        "l": false
    },
    {
        "id": "be79017b.ada3b",
        "type": "trigger",
        "z": "760faf65.70c2b",
        "name": "monitor",
        "op1": "trigger",
        "op2": "newcycle",
        "op1type": "str",
        "op2type": "str",
        "duration": "6",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "stopcounting",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 400,
        "y": 140,
        "wires": [
            [
                "cf8b1b07.16c518",
                "5c274368.b7f35c",
                "3681edac.7f5c72"
            ]
        ]
    },
    {
        "id": "cf8b1b07.16c518",
        "type": "debug",
        "z": "760faf65.70c2b",
        "name": "Right Kitchen light",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 750,
        "y": 140,
        "wires": []
    },
    {
        "id": "57510a4d.ef00e4",
        "type": "inject",
        "z": "760faf65.70c2b",
        "name": "Data from PIR (MQTT)",
        "props": [
            {
                "p": "payload",
                "v": "on",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "on",
        "payloadType": "str",
        "x": 180,
        "y": 140,
        "wires": [
            [
                "be79017b.ada3b",
                "72817943.f6bb28"
            ]
        ]
    },
    {
        "id": "bf7c304f.8d5ec",
        "type": "function",
        "z": "760faf65.70c2b",
        "name": "Display time",
        "func": "if (msg.payload === \"count\") {\n   cc = (flow.get('counter') || 0);\n   cc = cc + 1;\n   node.status({text:cc + \" seconds\"});\n   flow.set('counter', cc);\n} else {\n        flow.set('counter' , 0);\n        node.status({text:\"Restarted\"});\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "5c274368.b7f35c",
        "type": "trigger",
        "z": "760faf65.70c2b",
        "name": "heartbeat",
        "op1": "count",
        "op2": "fail",
        "op1type": "str",
        "op2type": "str",
        "duration": "-1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "newcycle",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 460,
        "y": 200,
        "wires": [
            [
                "bf7c304f.8d5ec"
            ]
        ],
        "outputLabels": [
            "send \"fail\" if not feeded"
        ]
    },
    {
        "id": "3681edac.7f5c72",
        "type": "debug",
        "z": "760faf65.70c2b",
        "name": "Left Kitchen light",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 740,
        "y": 100,
        "wires": []
    },
    {
        "id": "e5b4631e.403ca",
        "type": "link in",
        "z": "760faf65.70c2b",
        "name": "",
        "links": [
            "72817943.f6bb28"
        ],
        "x": 535,
        "y": 260,
        "wires": [
            [
                "bf7c304f.8d5ec"
            ]
        ]
    },
    {
        "id": "72817943.f6bb28",
        "type": "link out",
        "z": "760faf65.70c2b",
        "name": "",
        "links": [
            "e5b4631e.403ca"
        ],
        "x": 320,
        "y": 260,
        "wires": []
    }
]